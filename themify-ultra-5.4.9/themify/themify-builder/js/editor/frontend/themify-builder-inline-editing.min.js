'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(h,n,m){if(h==Array.prototype||h==Object.prototype)return h;h[n]=m.value;return h};
$jscomp.getGlobal=function(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var n=0;n<h.length;++n){var m=h[n];if(m&&m.Math==Math)return m}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(h,n){var m=$jscomp.propertyToPolyfillSymbol[n];if(null==m)return h[n];m=h[m];return void 0!==m?m:h[n]};$jscomp.polyfill=function(h,n,m,g){n&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(h,n,m,g):$jscomp.polyfillUnisolated(h,n,m,g))};
$jscomp.polyfillUnisolated=function(h,n,m,g){m=$jscomp.global;h=h.split(".");for(g=0;g<h.length-1;g++){var l=h[g];if(!(l in m))return;m=m[l]}h=h[h.length-1];g=m[h];n=n(g);n!=g&&null!=n&&$jscomp.defineProperty(m,h,{configurable:!0,writable:!0,value:n})};
$jscomp.polyfillIsolated=function(h,n,m,g){var l=h.split(".");h=1===l.length;g=l[0];g=!h&&g in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var M=0;M<l.length-1;M++){var e=l[M];if(!(e in g))return;g=g[e]}l=l[l.length-1];m=$jscomp.IS_SYMBOL_NATIVE&&"es6"===m?g[l]:null;n=n(m);null!=n&&(h?$jscomp.defineProperty($jscomp.polyfills,l,{configurable:!0,writable:!0,value:n}):n!==m&&(void 0===$jscomp.propertyToPolyfillSymbol[l]&&(m=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[l]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(l):$jscomp.POLYFILL_PREFIX+m+"$"+l),$jscomp.defineProperty(g,$jscomp.propertyToPolyfillSymbol[l],{configurable:!0,writable:!0,value:n})))};$jscomp.arrayIteratorImpl=function(h){var n=0;return function(){return n<h.length?{done:!1,value:h[n++]}:{done:!0}}};$jscomp.arrayIterator=function(h){return{next:$jscomp.arrayIteratorImpl(h)}};$jscomp.makeIterator=function(h){var n="undefined"!=typeof Symbol&&Symbol.iterator&&h[Symbol.iterator];return n?n.call(h):$jscomp.arrayIterator(h)};
$jscomp.polyfill("Promise.allSettled",function(h){function n(g){return{status:"fulfilled",value:g}}function m(g){return{status:"rejected",reason:g}}return h?h:function(g){var l=this;g=Array.from(g,function(M){return l.resolve(M).then(n,m)});return l.all(g)}},"es_2020","es3");
(function(h,n,m,g,l,M){let e,ea,H,fa,Ba,pa,Ca,D,r=null,ha=null,Z=null,K=null,x=null,w=null,F=!1,ia=!1,T=!1,aa,u,ja,qa=!1,ba,U=!1,V=!1;const z=l.Utils.getMouseEvents(),ra=h.isTouch?z:{mousedown:"click"},N=function(a,b){l.hasChanged=!0;g.execCommand(a,!1,void 0!==b?b:null);X()},Fa=function(a){a=g.queryCommandState(a);return-1===a?!1:a},Q={formatBlock:{result(a){a=a.parentNode.classList.contains("tb_editor_selected")?"p":a.getAttribute("data-action");N("formatBlock","<"+a+">")},state(a){a=a.getElementsByClassName("tb_editor_options")[0].getElementsByClassName("tb_editor_action");
const b=g.queryCommandValue("formatBlock");for(let c=a.length-1;-1<c;--c){let d=a[c].parentNode.classList;b===a[c].getAttribute("data-action")?d.contains("tb_editor_selected")||(d.add("tb_editor_selected"),Ga(a[c])):d.remove("tb_editor_selected")}}},text_align:{result(a){a.parentNode.classList.contains("tb_editor_selected")?w&&(w.startContainer&&(w.startContainer.parentNode.style.textAlign="",(a=w.startContainer.parentNode.closest("[style*=text-align]"))&&(a.style.textAlign="")),w.commonAncestorContainer&&
(w.commonAncestorContainer.nodeType!==Node.TEXT_NODE&&(w.commonAncestorContainer.style.textAlign=""),(a=w.startContainer.parentNode.closest("[style*=text-align]"))&&(a.style.textAlign="")),X()):N(a.getAttribute("data-action"))},state(a){const b=a.getElementsByClassName("tb_editor_options")[0].getElementsByClassName("tb_editor_action");let c=!1;for(let d=b.length-1;-1<d;--d){let k=b[d].parentNode.classList;b[d].hasAttribute("data-action")&&Fa(b[d].getAttribute("data-action"))?(k.contains("tb_editor_selected")||
Ga(b[d]),c=!0):k.remove("tb_editor_selected")}!1===c&&a.classList.remove("tb_editor_selected")}},list:{result(a){N(a.getAttribute("data-action"))},state(a){Q.text_align.state(a)}},image:{state(a){},result(a){const b=g.createElement("div"),c=g.createElement("hidden");qa=!0;let d;c.addEventListener("change",function(f){f.stopImmediatePropagation();f=d.state().get("selection").first().toJSON();var p=f.id;const v=null!==e.closest("[data-hasEditor]");var q=e.classList;let A=f.title||"",t=f.alt||A;for(var B=
q.length-1;-1<B;--B)if(0===q[B].indexOf("wp-image-")){q.remove(q[B]);break}q.add("wp-image-"+p);if(F){aa=e.closest(".active_module").outerHTML;const I=g.createElement("div");p=e.hasAttribute("data-w")||e.hasAttribute("data-h");q=e.hasAttribute("data-w")?e.getAttribute("width"):!1;B=e.hasAttribute("data-h")?e.getAttribute("height"):!1;const Y=function(){U=!0;sa(!v);const C=e.closest(".active_module");C&&(e.hasAttribute("data-update")&&(C.innerHTML=C.innerHTML,e=C.getElementsByClassName("tb_selected_img")[0]),
l.Utils.runJs(n(C),"module"));h.trigger("tb_image_resize",e);ta();W();h.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(W)},25)},500);I.remove()};I.className="tf_loader";x.appendChild(I);x.classList.add("tb_image_editor_loading");e.removeAttribute("srcset");!v&&p?(e.setAttribute("data-orig",f.url),e.setAttribute("data-ext",f.mime)):(e.removeAttribute("data-ext"),e.removeAttribute("data-orig"),v&&(e.alt=t,e.title=A));if(!p||v&&!q&&!B)e.width=f.width,e.height=f.height;!q&&
!B||v?(e.addEventListener("load",Y,{passive:!0,once:!0}),e.setAttribute("src",f.url)):l.Utils.resizeImage(e,q,B).finally(Y)}else O(),N("insertImage",f.url);c.remove();b.remove();qa=!1},{passive:!0,once:!0});ThemifyConstructor.file.browse(b,c,ThemifyConstructor,"image");b.click();d=ThemifyConstructor.file._frames.image;const k=function(){d.off("close",k);qa=!1;setTimeout(function(){d=null},50)};d.on("close",k)}},link:{state(a){if(w){a=w.startContainer.parentNode.closest("a");const b=r.classList;a&&
a===w.endContainer.parentNode.closest("a")?(Z.firstChild.textContent=Z.nextElementSibling.href=a.getAttribute("href"),b.add("tb_editor_show_link"),P(),R(!0)):r.classList.contains("tb_editor_show_link")&&(Z.firstChild.textContent=Z.nextElementSibling.href="",b.remove("tb_editor_show_link"),P(),R(!0))}},result(a){a=r.getElementsByClassName("tb_editor_link_options")[0].cloneNode(!0);const b=a.getElementsByClassName("tb_editor_link_input")[0];var c=a.querySelector("#tb_editor_link_type"),d=w.startContainer.parentNode.closest("a"),
k=ThemifyConstructor,f={px:{min:1,max:5E4},"%":{min:1,max:500}};a.querySelector("#tb_editor_lb_w_holder").replaceWith(k.range.render({id:"tb_editor_lb_w",control:!1,units:f},k));a.querySelector("#tb_editor_lb_h_holder").replaceWith(k.range.render({id:"tb_editor_lb_h",control:!1,units:f},k));k=a.querySelector("#tb_editor_lb_w");f=a.querySelector("#tb_editor_lb_h");const p=a.querySelector("#tb_editor_lb_w_unit"),v=a.querySelector("#tb_editor_lb_h_unit");b.value=k.value=f.value="";c.selectedIndex=p.selectedIndex=
v.selectedIndex=0;if(d&&d===w.endContainer.parentNode.closest("a")){var q=d.getAttribute("target");b.value=d.getAttribute("href");"_blank"!==q&&d.hasAttribute("data-zoom-config")&&(q="lightbox");q&&(c.value!==q&&(c.value=q),"lightbox"===q&&(c=d.getAttribute("data-zoom-config").split("|"),d=-1!==c[0].indexOf("%")?"%":"px",q=c[1]&&-1!==c[1].indexOf("%")?"%":"px",parseInt(c[0])!==parseInt(k.value)&&(k.value=parseInt(c[0])),parseInt(c[1])!==parseInt(f.value)&&(f.value=parseInt(c[1])),p.value!==d&&(p.value=
d),v.value!==q&&(v.value=q),a.querySelector(".tb_editor_lightbox_actions").classList.remove("tf_hide")))}a.addEventListener("focusout",Ha,{passive:!0});a.addEventListener("change",Ha,{passive:!0});a.querySelector("#tb_editor_link_type").addEventListener("change",function(A){this.closest("form").querySelector(".tb_editor_lightbox_actions").classList.toggle("tf_hide","lightbox"!==this.value);O();P();R(!0)},{passive:!0});K.appendChild(Ia());K.appendChild(a);r.classList.add("tf_hide","tb_editor_dialog_open",
"tb_editor_dialog_link","tf_opacity");a.classList.remove("tf_hide");O();P();R(!0);setTimeout(function(){b.focus()},100)}},font:{state(a){g.queryCommandValue("fontName")},result(a){var b=g.createElement("span"),c=g.createDocumentFragment();a=g.queryCommandValue("fontName");b.className="themify_tooltip";b.textContent="themify_tooltip";c.appendChild(ThemifyConstructor.font_select.render({id:"",control:!1},ThemifyConstructor));c=c.firstChild;r.classList.add("tf_hide","tb_editor_dialog_open","tb_editor_dialog_font",
"tf_opacity");Ja(c);b=c.getElementsByClassName("font-family-select")[0];h.triggerEvent(b.closest(".tb_font_preview_wrapper"),"tf_init");b.addEventListener("change",function(d){d.stopPropagation();T=!0;O();N("styleWithCSS",!0);N("fontName",this.value||"inherit");setTimeout(function(){ka();T=!1},10)},{passive:!0});O();P();R(!0);a&&(a=a.replace(/["']/g,""),b.querySelector('[value="'+CSS.escape(a)+'"]')&&(b.value=a,c.getElementsByClassName("themify-combo-input")[0].value=a,c=c.getElementsByClassName("themify-combo-dropdown")[0],
a=c.querySelector('[data-value="'+CSS.escape(a)+'"]')))&&(a.classList.add("themify-combo-selected"),c.style.scrollBehavior="auto",c.scrollTop=a.offsetTop-a.offsetHeight,c.style.scrollBehavior="")}},unlink:{result(a){O();if((a=w?w.startContainer.parentNode.closest("a"):null)&&a===w.endContainer.parentNode.closest("a")){const b=g.createRange(),c=m.getSelection();b.selectNodeContents(a);c.removeAllRanges();c.addRange(b)}N("unlink");ka()}},unlinkBack:{result(a){Q.unlink.result(a);la()}},color:{result(a){var b=
g.createElement("span");const c=function(f){T=!0;O();N("styleWithCSS",!0);N("foreColor",f);setTimeout(function(){ka();T=!1},10)};var d=g.createDocumentFragment();a=g.queryCommandValue("foreColor");b.className="themify_tooltip";b.textContent="themify_tooltip";d.appendChild(ThemifyConstructor.color.render({id:"",control:!1},ThemifyConstructor));d=d.firstChild;r.classList.add("tf_hide","tb_editor_dialog_open","tb_editor_dialog_color","tf_opacity");Ja(d);const k=d.getElementsByClassName("tfminicolors-input")[0];
b=d.getElementsByClassName("tfminicolors-swatch")[0];d=d.getElementsByClassName("color_opacity")[0];if(a){let f=1;-1<a.indexOf("rgb")&&(f=-1<a.indexOf("rgba")?parseFloat(a.split(",").slice(-1).pop()):1,a=(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):"");k.value=a;d.value=f}b.click();k.addEventListener("themify_builder_color_picker_change",
function(f){f.stopPropagation();"tb_editor_dialog_content"!==g.activeElement.id&&K.contains(g.activeElement)||c(f.detail.val)},{passive:!0});k.addEventListener("change",function(f){f.stopPropagation();c(n(this).tfminicolors("rgbaString"))},{passive:!0});d.addEventListener("change",function(f){U=!0;f.stopPropagation();h.triggerEvent(k,"change")},{passive:!0});P();R(!0)}}},sa=function(a){if(e&&U){const B=l.Models.Registry.lookup(H),I=!(!l.activeModel||H!==l.activeModel.cid);if(B){var b=I?{}:B.get("mod_settings"),
c=n.extend(!0,{},b),d=!1,k=!a&&F,f=e;b||(b={});if(k){var p=f.getAttribute("data-w");var v=f.getAttribute("data-h");if(!p&&!v){f=f.closest("[data-hasEditor]");if(!f)return;k=!1;V=!0}if(k&&(a=!1,p&&(b[p]=f.getAttribute("width"),a=parseInt(c[p])!==parseInt(b[p])),v&&(b[v]=f.getAttribute("height"),!0!==a&&(a=parseInt(c[v])!==parseInt(b[v]))),!a))return}(a=f.getAttribute("data-repeat"))&&!isNaN(a)&&(a=!1);var q=f.getAttribute("data-name");if(a){void 0===b[a]&&(b[a]={});d=f.hasAttribute("data-index")?parseInt(f.getAttribute("data-index")):
!1;if(!1===d){var A=f.closest(".tf_swiper-slide");A||(A=f.closest("li"))||(A=f.closest(".module-"+B.get("mod_name")+"-item"));if(A){const Y=A.parentNode.children;for(let C=Y.length-1;-1<C;--C)if(Y[C]===A){d=C;break}}}if(!1!==d)void 0===b[a][d]&&(b[a][d]={});else return}if(!k){if(!q)return;var t="IMG"===f.tagName?f.hasAttribute("data-orig")?f.getAttribute("data-orig"):f.getAttribute("src"):V?f.innerHTML:f.innerText;!1!==d?(A=void 0!==c[a]&&void 0!==c[a][d]&&void 0!==c[a][d][q]?c[a][d][q]:null,b[a][d][q]=
t):(A=c[q],b[q]=t);if(A===t)return}if(c!==b){if(I){c=M.Lightbox.$lightbox[0];if(k){if(t=!1,d=p?c.querySelector(".tb_lb_option#"+p):null,a=v?c.querySelector(".tb_lb_option#"+v):null,d&&d.value!=b[p]&&(t=!0,d.value=ThemifyConstructor.settings[p]=b[p]),a&&a.value!=b[v]&&(t=!0,a.value=ThemifyConstructor.settings[v]=b[v]),!1===t)return}else if(a?(void 0===ThemifyConstructor.settings[a]&&(ThemifyConstructor.settings[a]={}),void 0===ThemifyConstructor.settings[a][d]&&(ThemifyConstructor.settings[a][d]={}),
ThemifyConstructor.settings[a][d][q]=t):ThemifyConstructor.settings[q]=t,b={el:"",val:t,data:b,cid:H,activeEl:e},h.triggerEvent(g,"tb_inline_item",b),t=b.val,(b=b.el)||(b=a?c.querySelector("#"+a).querySelectorAll('[data-input-id="'+q+'"]'):c.querySelector(".tb_lb_option#"+q)),b){if(a&&(b=b[d],!b)||b.value===t)return;b.value=t;F&&(p=b.closest(".tb_uploader_wrapper"))&&(p=p.querySelector(".tb_media_uploader img"))&&(p.src=t);V&&"undefined"!==typeof tinyMCE&&tinyMCE&&(b=tinyMCE.get(b.id))&&b.setContent(t)}l.hasChanged=
!0}else b={val:k?b[q]:t,data:b,cid:H,activeEl:e},h.triggerEvent(g,"tb_inline_save",b),t=b.val,b=b.data,!1!==d?b[a][d][q]=t:b[q]=t,l.hasChanged=!0,aa&&(l.undoManager.push(H,aa,M.clone(f.closest(".active_module")),"save",{bsettings:c,asettings:n.extend(!0,{},b)}),aa=null),B.set(b,{silent:!0});ta()}}}},Ka=function(a){a.preventDefault()},ua=function(a){a.stopImmediatePropagation();F&&(e.hasAttribute("data-name")||e.closest("[data-hasEditor]"))&&(a.target===x||x.contains(a.target))&&Q.image.result()},
Oa=function(){l.Instances.Builder[l.builderIndex].el.addEventListener(z.mousedown,function(a){if(!0===l.ActionBar.inlineEditor&&(1===a.which||a.touches)){const b=(F="IMG"===a.target.tagName)?a.target:a.target.closest("[contenteditable]");if(b&&!b.closest(".tb_disable_sorting")&&(F||!1===b.contentEditable||"false"===b.contentEditable)){ca();m.getSelection().removeAllRanges();const c=b.closest(".active_module");if(c){if((a=l.Models.Registry.lookup(c.dataset.cid))&&void 0!==a.attributes.mod_settings.__dc__&&
void 0!==a.attributes.mod_settings.__dc__[b.dataset.name])return!1;c.classList.add("tb_editor_clicked")}F||(b.contentEditable=!0);let d=[];for(a=b.closest("[draggable]");null!==a;)d.push(a),a=a.parentNode.closest("[draggable]");if(0<d.length){const k=function(p){g.removeEventListener(z.mousemove,f,{passive:!0,once:!0});for(p=d.length-1;-1<p;--p)d[p].setAttribute("draggable",!1),d[p].removeEventListener("drag",f,{passive:!0,once:!0})},f=function(p){b.setAttribute("contenteditable",!1);g.removeEventListener(z.mousemove,
f,{passive:!0,once:!0});b.removeEventListener(z.mouseup,k,{passive:!0,once:!0});c&&c.classList.remove("tb_editor_clicked");for(let v=d.length-1;-1<v;--v)d[v].removeEventListener("drag",f,{passive:!0,once:!0});Da();"drag"===p.type&&E()};b.addEventListener(z.mouseup,k,{passive:!0,once:!0});g.addEventListener(z.mousemove,f,{passive:!0,once:!0});for(a=d.length-1;-1<a;--a)d[a].addEventListener("drag",f,{passive:!0,once:!0})}}}},{passive:!0});l.Instances.Builder[l.builderIndex].el.addEventListener(ra.mousedown,
function(a){if(!0===l.ActionBar.inlineEditor){var b=a.target;if(b.hasAttribute("data-target")){var c=b.closest(".active_module");c&&(c=c.querySelector(b.getAttribute("data-target")))&&(b=c)}var d=(F="IMG"===b.tagName)?b:b.closest("[contentEditable]");if(d&&((d.closest("label")||d.closest("a")||d.closest("button"))&&a.preventDefault(),e!==d&&(e&&E(),(1===a.which||a.touches)&&(!F||d.getAttribute("data-w")||d.getAttribute("data-h")||d.getAttribute("data-name")||d.closest("[data-hasEditor]"))))){var k=
d.closest(".active_module");if(k&&(H=k.getAttribute("data-cid"),(a=l.Models.Registry.lookup(H))&&void 0!==a.attributes.mod_settings.__dc__&&void 0!==a.attributes.mod_settings.__dc__[d.dataset.name]))return;U=!1;D=h.body[0].classList;ca();D.add("tb_editor_active");m.top.document.body.classList.add("tb_editor_active");V=!F&&d.hasAttribute("data-hasEditor");e=d;k&&(aa=k.outerHTML,k.classList.add("tb_editor_on"),k.classList.remove("tb_editor_clicked"));a=e;c=d.closest("form");b=d.closest("[draggable]");
if(c){c.addEventListener("submit",Ka);c=c.querySelectorAll("[required]");for(let f=c.length-1;-1<f;--f)c[f].removeAttribute("required"),c[f].setAttribute("data-required",1)}for(;a&&a!==k;)a.style["animation-name"]&&(a.setAttribute("data-tmp-animation",a.style["animation-name"]),a.style["animation-name"]="none"),a=a.parentNode;for(;null!==b;)b.setAttribute("draggable",!1),b=b.parentNode.closest("[draggable]");a=b=c=null;(u=(u=e.closest(".tf_swiper-container"))&&u.swiper?u.swiper:null)&&u.params&&u.params.autoplay&&
u.params.autoplay.enabled&&(u.el.dataset.stopped=!0,u.autoplay.stop(),u.params.thumbs&&u.params.thumbs.swiper&&u.params.thumbs.swiper.autoplay&&u.params.thumbs.swiper.autoplay.enabled&&(u.params.thumbs.swiper.el.dataset.stopped=!0,u.params.thumbs.swiper.autoplay.stop()));F?(D.add("tb_editor_image_active"),m.top.document.body.classList.add("tb_editor_image_active"),h.on("tfsmartresize",W).on("tbresizeImageEditor",W)):(ja=V?e.innerHTML:e.textContent,e.contentEditable=!0,e.focus(),e.addEventListener("blur",
E,{passive:!0}),e.addEventListener("input",X,{passive:!0}),e.addEventListener("change",X,{passive:!0}),h.isTouch||setTimeout(function(){k&&k.addEventListener("dblclick",ua,{passive:!0})},800),ea=l.undoManager.stack,l.undoManager.reset());h.on("tbDisableInline",E);g.addEventListener(z.mousedown,E,{passive:!0});m.top.document.addEventListener(z.mousedown,E,{passive:!0});setTimeout(function(){M.Lightbox.$lightbox.one("themify_opened_lightbox",La)},600);V?(g.addEventListener("selectionchange",Ma,{passive:!0}),
Va(),P(),r.addEventListener(ra.mousedown,Na),Z=r.querySelector("#tb_editor_link_value"),K=r.querySelector("#tb_editor_dialog")):F&&(d.closest(".masonry")?h.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(function(){Ea(d)})},25)},500):Ea(d))}}})},P=function(){const a=r.className;var b=r.classList;b.add("tf_hidden");b.remove("tf_hide");b=r.getBoundingClientRect();fa=b.width+40;Ba=b.height+30;r.className=a},ka=function(){const a=m.getSelection();w=!1===a.isCollapsed?a.getRangeAt(0).cloneRange():
null},O=function(){if(!1===ia&&w){ia=!0;e.focus();const a=m.getSelection();a.removeAllRanges();a.addRange(w);ia=!1}},Va=function(){if(null===r){const a=g.getElementById("tmpl-builder_inline_editor");a&&(g.body.appendChild(a.content),a.remove());r=g.getElementById("tb_editor")}return r},Na=function(a){var b=a.target.closest(".tb_editor_action");a.stopPropagation();b&&"submit"!==b.type&&(a.preventDefault(),T=!0,(a=b.getAttribute("data-type"))||(a=b.closest("[data-type]").getAttribute("data-type")),
"expand"!==a?(void 0!==Q[a]&&void 0!==Q[a].result?Q[a].result(b):(O(),N(a)),Pa()):!b.classList.contains("tb_editor_disable")&&(b=l.Models.Registry.lookup(H))&&(E(),m.getSelection().removeAllRanges(),b.trigger("edit",null)),T=!1)},X=function(a){a&&a.stopPropagation();if(e){U=!0;const b=V?e.innerHTML:e.textContent;if(ja!==b||F)l.hasChanged=!0,l.activeModel&&l.activeModel.cid===H&&sa(),a&&"input"!==a.type||l.undoManager.push(H,ja,b,"inline",e),ja=b}},Ha=function(a){a.stopPropagation();if(!("focusout"===
a.type&&!a.target.classList.contains("tb_range")||"change"===a.type&&a.target.classList.contains("tb_range"))&&(a=this.getElementsByClassName("tb_editor_link_input")[0].value.trim())){U=!0;O();var b=m.getSelection(),c=w?w.startContainer.parentNode.closest("a"):null,d=this.querySelector("#tb_editor_link_type").value;if(c&&c===w.endContainer.parentNode.closest("a")){var k=g.createRange();k.selectNodeContents(c);b.removeAllRanges();b.addRange(k)}N("createLink",a);ka();if(b.anchorNode&&b.anchorNode.parentNode&&
(a=b.anchorNode.parentNode.closest("a")))if(a.removeAttribute("target"),a.removeAttribute("data-zoom-config"),a.classList.remove("themify_lightbox"),"_blank"===d)a.setAttribute("target",d);else if("lightbox"===d&&(a.classList.add("themify_lightbox"),d=this.querySelector("#tb_editor_lb_w").value,b=this.querySelector("#tb_editor_lb_h").value,c=this.querySelector("#tb_editor_lb_w_unit").value||"px",k=this.querySelector("#tb_editor_lb_h_unit").value||"px",0<d||0<b)){let f="|";d&&(f=d+c+f);b&&(f+=b+k);
a.setAttribute("data-zoom-config",f)}X()}},Ga=function(a){var b=a.parentNode;const c=b.parentNode.closest("li");b.classList.add("tb_editor_selected");c&&(c.classList.add("tb_editor_selected"),b=c.getElementsByClassName("tb_editor_action")[0],void 0!==b&&b.parentNode.replaceChild(a.cloneNode(!0),b))},Pa=function(){null===ha&&(ha=r.querySelectorAll("[data-type]"));for(let b=ha.length-1;-1<b;--b){var a=ha[b];let c=a.getAttribute("data-type");a="LI"===a.tagName?a:a.parentNode;"expand"===c?a.classList.toggle("tb_editor_disable",
l.activeModel&&H===l.activeModel.cid):c&&(void 0!==Q[c]&&void 0!==Q[c].state?Q[c].state(a):a.classList.toggle("tb_editor_selected",Fa(c)))}},R=function(a){if(null!==r){var b=m.getSelection(),c=r.classList;if(!1===b.isCollapsed){ka();c.contains("tf_hide")&&(P(),c.remove("tf_hide"),setTimeout(function(){c.remove("tf_opacity")},20));b=w.getBoundingClientRect();let d=b.left+(b.width-fa)/2,k=b.top-Ba-10;d+fa>=h.w&&(d-=fa+Math.ceil(d)+m.pageXOffset-h.w-1);c.toggle("tb_editor_top_viewport",0>=k);0>=k&&(k=
b.bottom+10);0>=d&&(d=15);k+=m.pageYOffset;r.style.transform="translate("+d+"px,"+k+"px)";void 0===a&&Pa();D&&(D.contains("tb_editor_start_select")||(m.top.document.body.classList.add("tb_editor_start_select"),D.add("tb_editor_start_select")),ba&&clearTimeout(ba),ba=setTimeout(ca,500))}else w=null,c.add("tf_hide","tf_opacity"),c.remove("tb_editor_top_viewport"),la()}},Ma=function(){null!==e&&!1===ia&&!1===T&&g.activeElement===e&&(pa&&cancelAnimationFrame(pa),Ca&&clearTimeout(Ca),pa=requestAnimationFrame(function(){Ca=
setTimeout(function(){null!==e&&!1===ia&&!1===T&&g.activeElement===e&&R()},20)}))},ca=function(a){D&&D.contains("tb_editor_start_select")&&(m.top.document.body.classList.remove("tb_editor_start_select"),D.remove("tb_editor_start_select"));ba&&clearTimeout(ba);ba=null},Ia=function(){const a=g.createElement("button");a.type="button";a.className="tf_close";a.title="Back";a.addEventListener(ra.mousedown,function(b){b.stopImmediatePropagation();b.preventDefault();la();r.classList.add("tf_hide","tf_opacity");
O();P();R()},{once:!0});return a},Ja=function(a){const b=g.createElement("div"),c=g.createElement("div");b.id="tb_editor_dialog_header";c.id="tb_editor_dialog_content";c.tabIndex="-1";b.appendChild(Ia());c.appendChild(a);K.appendChild(b);K.appendChild(c)},la=function(){if(r){r.style.display="none";if(K&&K.firstChild)for(;K.firstChild;)K.removeChild(K.lastChild);r.classList.remove("tb_editor_dialog_open","tb_editor_dialog_color","tb_editor_dialog_font","tb_editor_dialog_link","tb_editor_show_link");
r.style.display="";P()}},La=function(a){e&&E()},Ea=function(a){Da();x=g.createElement("div");var b=a.getBoundingClientRect();const c=0!==(e.dataset.orig?e.dataset.orig.trim():e.src.trim()).indexOf(themifyBuilder.upload_url)?themifyBuilder.i18n.image_help:null!==e.closest("[data-hasEditor]")?themifyBuilder.i18n.image_help2:!1,d=["w","s","e","n"];x.id="tb_editor_image";x.style.top=b.top+m.scrollY+"px";x.style.left=b.left+m.scrollX+"px";x.style.width=b.width+"px";x.style.height=b.height+"px";for(b=d.length-
1;-1<b;--b){let k=g.createElement("div"),f=g.createElement("div"),p=g.createElement("div");k.className="tb_editor_image_handler tb_editor_"+d[b];f.className="tb_editor_image_border tb_editor_border_"+d[b];p.className="tb_image_editor_tooltip tb_image_editor_tooltip_"+d[b];x.appendChild(f);x.appendChild(p);x.appendChild(k)}a.hasAttribute("data-w")||a.hasAttribute("data-h")?!1!==c&&x.appendChild(ThemifyConstructor.help(c)):x.className="tb_image_editor_disable";x.addEventListener(z.mousedown,Qa,{passive:!0});
h.isTouch||x.addEventListener("dblclick",ua,{passive:!0});e.classList.add("tb_selected_img");h.body[0].appendChild(x)},Qa=function(a){if(1===a.which||a.touches){var b=a.target;a.stopPropagation();if((e.hasAttribute("data-w")||e.hasAttribute("data-h"))&&(b.classList.contains("tb_editor_image_handler")||b.classList.contains("tb_editor_image_border"))){this.style.willChange="width,height,left,top";e.parentNode.style.willChange="contents";e.style.willChange="width,height";let d,k,f,p,v,q,A,t=new Image;
var c=e.getAttribute("data-maxw");let B=!1;c&&(c=e.closest(c));c||(c=e.closest("[data-hasEditor]"),c||(c=e.parentNode));const I=b.classList[1].replace("tb_editor_border_","").replace("tb_editor_",""),Y=b.classList.contains("tb_editor_image_handler"),C=this,Ra=Number.MAX_VALUE;c=e.getBoundingClientRect();const da=parseInt(c.width),va=parseInt(c.height),Wa=parseFloat(da/va),wa=a.touches?a.touches[0].clientX:a.clientX,Sa=a.touches?a.touches[0].clientY:a.clientY,xa=C.getElementsByClassName("tb_image_editor_tooltip"),
ya=e.dataset.orig?e.dataset.orig.trim():e.src.trim(),za=0===ya.indexOf(themifyBuilder.upload_url)&&!e.closest("[data-hasEditor]"),ma=!0===za?g.createElement("div"):null,Ta=function(G){G.stopPropagation();f=G.touches?G.touches[0].clientX:G.clientX;p=G.touches?G.touches[0].clientY:G.clientY;!1===B?(B=!0,e.classList.add("tb_resized_img")):d&&cancelAnimationFrame(d);d=requestAnimationFrame(function(){if(null===e)Aa();else{if(!0===Y){var y="n"===I||"s"===I?wa+da-f:da+f-wa;var L=parseInt(y/Wa)}else"s"===
I||"n"===I?(L="s"===I?va+p-Sa:Sa+va-p,y=da):(y="w"===I?da+f-wa:wa+da-f,L=va);40>y?y=40:y>Ra&&(y=Ra);void 0!==L&&40>L&&(L=40);if(v!==y||q!==L)v=y,q=L,l.Utils.resizeImage(e,y,L,t).then(function(S){if(null===S[0]||null===e)Aa();else{var J=!1===za?S[0].parentNode:null;null!==J&&"FIGURE"===J.tagName&&(J.style.width&&(J.style.width=S[1]+"px"),J.style.height&&(J.style.height=S[2]+"px"));J=S[0].getBoundingClientRect();C.style.left=J.left+m.scrollX+"px";C.style.top=J.top+m.scrollY+"px";C.style.width=J.width+
"px";C.style.height=J.height+"px";xa[0].textContent=xa[3].textContent=parseInt(S[1])+"px";xa[1].textContent=xa[2].textContent=parseInt(S[2])+"px";ta()}})}})};a=function(){g.addEventListener(z.mousemove,Ta,{passive:!0});C.classList.remove("tb_image_editor_loading");ma&&ma.remove()};const Aa=function(G){G&&G.stopPropagation();d&&cancelAnimationFrame(d);k&&clearTimeout(k);g.removeEventListener(z.mousemove,Ta,{passive:!0});g.removeEventListener(z.mouseup,Aa,{passive:!0,once:!0});m.top.document.body.classList.remove("tb_start_animate",
"tb_image_editor_resing");(D?D:h.body[0].classList).remove("tb_start_animate","tb_image_editor_resing");h.body[0].style.cursor=m.top.document.body.style.cursor=C.style.willChange=e.style.willChange=e.parentNode.style.willChange="";e.classList.remove("tb_resized_img");if(!0===B){U=!0;let y=e.closest(".active_module");y||(y=e.closest(".module_column"));sa();const L=function(){requestAnimationFrame(function(){t&&(A=h.hash(ya+e.getAttribute("width")+e.getAttribute("height")),l.Utils.cache_images[A]=t,
t=null);ta();y&&(e.hasAttribute("data-update")&&(y.innerHTML=y.innerHTML,e=F?y.getElementsByClassName("tb_selected_img")[0]:y.querySelector('[contenteditable="true"]')),l.Utils.runJs(n(y),"module"));h.trigger("tb_image_resize",e);W();h.requestIdleCallback(function(){setTimeout(function(){requestAnimationFrame(W)},25)},500);l.Utils.canvas=l.Utils.ctx=null})};if(y)if(G=y.querySelectorAll('img[data-w="'+e.getAttribute("data-w")+'"]'),1<G.length){const S=e.getAttribute("width"),J=e.getAttribute("height"),
na=za?g.createElement("div"):null,Ua=[];na&&(na.className="tf_loader tf_loader_center",y.appendChild(na),y.classList.add("tf_image_editor_working"));for(let oa=G.length-1;-1<oa;--oa)G[oa]!==e&&Ua.push(l.Utils.resizeImage(G[oa],S,J));Promise.allSettled(Ua).finally(oa=>{na&&na.remove();y.classList.remove("tf_image_editor_working");L()})}else L();else L()}B=!1;d=k=v=q=null};D.add("tb_start_animate","tb_image_editor_resing");m.top.document.body.classList.add("tb_start_animate","tb_image_editor_resing");
h.body[0].style.cursor=m.top.document.body.style.cursor=getComputedStyle(b).getPropertyValue("cursor");!0===za?(A=h.hash(ya+e.getAttribute("width")+e.getAttribute("height")),void 0!==l.Utils.cache_images[A]?(t=l.Utils.cache_images[A],a()):(ma&&(ma.className="tf_loader",this.appendChild(ma),this.classList.add("tb_image_editor_loading")),t.src=ya,t.crossOrigin="anonymous",t.decode().then(a))):a();g.addEventListener(z.mouseup,Aa,{passive:!0,once:!0})}}},W=function(){x&&requestAnimationFrame(function(){x&&
e&&Ea(e)})},ta=function(){null!==u&&u.update()},Da=function(){x&&(x.removeEventListener(z.mousedown,Qa,{passive:!0}),x.removeEventListener("dblclick",ua,{passive:!0}),x.remove(),x=null)},E=function(a){if(!qa){var b=null;if(a&&(b="blur"===a.type?a.relatedTarget?a.relatedTarget:M.Lightbox.$lightbox[0].contains(m.top.document.activeElement)?m.top.document.activeElement:g.activeElement:a.target,!F&&b.closest(".tb_toolbar_undo"))){e&&e.removeEventListener("blur",E,{passive:!0});setTimeout(function(){e&&
e.addEventListener("blur",E,{passive:!0});w=null;la();e&&e.focus();R()},120);return}if(!a||"blur"===a.type||1===a.which)if(!a||!r||(a.touches||"blur"===a.type||1===a.which)&&r!==b&&!r.contains(b)){let k=e&&l.Instances.Builder[l.builderIndex].el.contains(e)?e.closest(".module"):l.Instances.Builder[l.builderIndex].el.querySelector(".tb_element_cid_"+H+" .module");la();if(a&&k&&(k===b||k.contains(b)))a&&"blur"!==a.type&&e&&!1===m.getSelection().isCollapsed&&(D.contains("tb_editor_start_select")||(m.top.document.body.classList.add("tb_editor_start_select"),
D.add("tb_editor_start_select")),this.addEventListener(z.mouseup,ca,{passive:!0,once:!0}));else{g.removeEventListener(z.mousedown,E,{passive:!0});g.removeEventListener("selectionchange",Ma,{passive:!0});g.removeEventListener(z.mouseup,ca,{passive:!0,once:!0});m.top.document.removeEventListener(z.mousedown,E,{passive:!0});M.Lightbox.$lightbox.off("themify_opened_lightbox",La);ca();ea&&(l.undoManager.stack=ea,l.undoManager.index=ea.length-1,l.undoManager.updateUndoBtns());if(e){e.removeEventListener("input",
X,{passive:!0});e.removeEventListener("change",X,{passive:!0});e.removeEventListener("blur",E,{passive:!0});"IMG"!==e.tagName&&e.setAttribute("contenteditable","false");e.classList.remove("tb_selected_img");b=e.closest("form");for(var c=[],d=e.closest("[draggable]");null!==d;)c.push(d),d=d.parentNode.closest("[draggable]");for(d=c.length-1;-1<d;--d)c[d].setAttribute("draggable",!0);if(b)for(b.removeEventListener("submit",Ka),b=b.querySelectorAll("[data-required]"),c=b.length-1;-1<c;--c)b[c].removeAttribute("data-required"),
b[c].setAttribute("required","required");for(b=e;b&&b.classList&&!b.classList.contains("active_module");)b.getAttribute("data-tmp-animation")&&(b.style["animation-name"]=b.getAttribute("data-tmp-animation"),b.removeAttribute("data-tmp-animation")),b=b.parentNode;b=null}u&&u.params&&u.params.autoplay&&u.params.autoplay.enabled&&(u.el.dataset.stopped=!1,u.autoplay.start(),u.params.thumbs&&u.params.thumbs.swiper.autoplay&&u.params.thumbs.swiper.autoplay.enabled&&(u.params.thumbs.swiper.el.dataset.stopped=
!1,u.params.thumbs.swiper.autoplay.start()));r&&(r.classList.add("tf_hide","tf_opacity"),r.classList.remove("tb_editor_top_viewport","tb_editor_show_link"),r.removeEventListener(ra.mousedown,Na));a&&m.getSelection().removeAllRanges();h.off("tfsmartresize",W).off("tbresizeImageEditor",W).off("tbDisableInline",E);Da();D&&D.remove("tb_editor_active","tb_editor_image_active","tb_editor_start_select");m.top.document.body.classList.remove("tb_editor_active","tb_editor_image_active","tb_editor_start_select");
l.ActionBar.clear();k&&(k=k.closest(".active_module"))&&(k.classList.remove("tb_editor_on","tb_editor_clicked"),k.removeEventListener("dblclick",ua,{passive:!0}),U&&(sa(),e.hasAttribute("data-no-update")||l.Utils.runJs(n(k),"module")));l.ActionBar.hoverCid=aa=r=D=V=w=fa=Ba=pa=ha=K=Z=H=ea=ja=u=e=null}}}};if(h.is_builder_loaded)Oa();else h.on("tb_css_visual_modules_load",Oa,!0);h.on("undo",function(a,b,c,d){"inline"!==b&&E()}).on("disableInline",function(){E()})})(Themify,jQuery,window,document,tb_app,
ThemifyBuilderCommon);
