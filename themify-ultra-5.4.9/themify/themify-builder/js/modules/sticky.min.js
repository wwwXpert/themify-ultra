'use strict';(function(q,n){let x,r,t=!1,y=q.w,p=q.h,z=!1;const l=new Map,A="m"===tbLocalScript.is_sticky?parseInt(tbLocalScript.breakpoints.tablet[1]):!1,v=function(a,c){x&&cancelAnimationFrame(x);if(!0!==t){var d=a?this:n;x=requestAnimationFrame(function(){const m=d.pageYOffset;var e=c?c:l;for(let h of e){e=h[0];let b=h[1];var f=e.classList.contains("tb_sticky_scroll_active");if("disable"!==b)if(!0===b.isBottom&&m+p>=b.space||!0!==b.isBottom&&m>b.space){if(!1===f&&(e.style.width=b.w+"px",e.parentNode.style.height=
b.h+"px",e.style.position="fixed",e.style.top=b.value,e.classList.add("tb_sticky_scroll_active")),b.unstick&&b.unstick.item){f=b.unstick;let k=parseInt(b.value);var g=f.item.getBoundingClientRect();if("builder"===f.type)g=g.bottom-b.h-k;else if(g="passes"===f.r?g.bottom-k:g.top-b.h-k,"top"===f.cur||"bottom"===f.cur)g+=f.v,"bottom"===f.cur&&(g-=p);g=0>g?g+k+"px":b.value;b.currentTop!==g&&(b.currentTop=g,l.set(e,b),e.style.top=g)}}else!0===f&&u(e)}})}},u=function(a){a.style.width=a.style.top=a.style.bottom=
a.style.position=a.parentNode.style.height="";a.classList.remove("tb_sticky_scroll_active")},C=new MutationObserver(function(a){if(a[0]){let c=a[0].target.closest("[data-sticky-active]");c&&(r&&cancelAnimationFrame(r),r=requestAnimationFrame(function(){q.imagesLoad(c,function(){const d=new Map;u(c);w(c);d.set(c,l.get(c));v(null,d);c=r=null})}))}}),w=function(a,c,d){const m=a.classList.contains("tb_sticky_scroll_active");if(!1===m||!0===d){if(!l.has(a)||!0===d){d=JSON.parse(a.getAttribute("data-sticky-active"));
var e=!1,f=tbLocalScript.breakpoints,g=Object.keys(f);for(var h=g.length-1;-1<h;--h){let k=g[h],B="tablet_landscape"===k?"tl":k[0];if(void 0!==d[B]&&("mobile"!==k?f[k][1]:f[k])>=y){e=d[B];break}}!1===e&&(e=d.d);d=e;if(!d){l.set(a,"disable");u(a);return}f=d.stick||{};g=f.v?parseInt(f.v):0;e=d.unstick;h=f.u||"px";"px"!==h?d.u=h:d.value=g+h;d.v=g;"bottom"===f.p&&(d.isBottom=!0);if(e){var b;f=a.closest(".themify_builder_content");if("builder"===e.type){if(b=f.closest("#tbp_header"))b=document.getElementById("tbp_content"),
(b=null!==b?b.getElementsByClassName("themify_builder_content")[0]:document.getElementsByClassName("themify_builder_content")[1])&&(f=b);b=f}else"row"===e.type&&(b=f.getElementsByClassName("tb_"+e.el)[0]),b||(b=f.getElementsByClassName("tb_"+e.el)[0]),b&&(e.v=parseInt(e.v));b&&(e.item=b)}a.parentNode.classList.contains("tb_sticky_wrapper")||(b=document.createElement("div"),b.className="tb_sticky_wrapper",a.parentNode.insertBefore(b,a),b.appendChild(a));l.set(a,d)}d=l.get(a);"disable"!==d&&(!0===m&&
(a.style.position=""),c||(c=a.getBoundingClientRect()),d.w=0<c.width?c.width:a.offsetWidth,d.h=0<c.height?c.height:a.offsetHeight,b=d.v,"%"===d.u&&0!==b&&(b=b/100*p),!0===d.isBottom&&(b=p-b-d.h),d.value=b+"px",d.space=void 0!==d.isBottom?c.bottom+n.pageYOffset+b:c.top+n.pageYOffset-b,d.t=c.top,a.parentNode.style.height!==d.h+"px"&&(a.parentNode.style.height=d.h+"px"),!0===m&&(a.style.position="fixed"),l.set(a,d))}},D=new IntersectionObserver(function(a,c){for(c=a.length-1;-1<c;--c)!0===a[c].isIntersecting&&
w(a[c].target,a[c].boundingClientRect)},{threshold:[.3,.4,.5,.6,.7,.8,.9,1]});q.on("tb_sticky_init",function(a){a instanceof jQuery&&(a=a.get());for(var c=a.length-1;-1<c;--c)D.observe(a[c]),C.observe(a[c],{subtree:!0,childList:!0});if(!1===z){z=!0;if(0<n.pageYOffset){for(c=a.length-1;-1<c;--c)w(a[c],a[c].getBoundingClientRect());v()}n.addEventListener("scroll",v,{passive:!0})}}).on("tfsmartresize",function(a){if(a){y=a.w;p=a.h;t=!!(A&&A>=y);for(let c of l)!0===t?u(c[0]):w(c[0],null,!0);!1===t&&v()}})})(Themify,
window);
