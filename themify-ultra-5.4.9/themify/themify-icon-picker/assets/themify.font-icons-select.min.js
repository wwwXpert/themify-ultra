'use strict';var Themify_Icons={};
(function(b){const n={};Themify_Icons={target:"",ajaxurl:tfIconPicker.ajaxurl,top:b(window.top.document),loader:null,init(){const c=Themify_Icons;c.top.on("click",".themify_fa_toggle",function(a){a.preventDefault();a.stopPropagation();a=b(this);c.target=a.attr("data-target")?b(a.attr("data-target"),c.top):a.prev();c.showLightbox(c.target.val())}).on("click","#themify_lightbox_fa .lightbox_container a:not(.external-link)",function(a){a.preventDefault();a.stopPropagation();c.setIcon(b(this).data("icon"))}).on("click",
"#themify_lightbox_overlay, #themify_lightbox_fa .close_lightbox",function(a){a.preventDefault();a.stopPropagation();c.closeLightbox()}).on("change",".tf-icon-group-select input",function(a){a=b(this);const e=a.val();b("#themify_lightbox_fa .tf-font-group",c.top).hide().filter('[data-group="'+e+'"]').show();"fontawesome"===e&&"true"!==a.attr("data-icons")&&b(this).attr("data-icons",!0);c.getByCategory()});c.Category();c.Search()},getByCategory(c){const a=this,e=b("#themify_lightbox_fa",a.top),f=e.find(".tf-icon-group-select input:checked").val();
n[f]?(c&&c(),a.Loader("spinhide")):(a.Loader("show"),n[f]=!0,b.ajax({url:a.ajaxurl,data:{action:"tf_icon_get_by_type",type:f},type:"POST",success:function(d){var h=a.top[0],g=h.createElement("div");g.innerHTML=d;var k=g.getElementsByClassName("tf_icons_groups"),l=g.querySelector("#tf_svg");g=h.getElementById("tf_svg");if(0<k.length){for(d=k.length-1;-1<d;--d){var m=e[0].querySelector("#"+k[d].id+" .row");m&&(m.innerHTML=k[d].innerHTML)}if(l){if(g){d=g.getElementsByTagName("symbol");k={};for(m=d.length-
1;-1<m;--m)k[d[m].id]=!0;l=l.getElementsByTagName("symbol");h=h.createDocumentFragment();for(d=l.length-1;-1<d;--d)k[l[d].id]||h.appendChild(l[d]);g.firstChild.appendChild(h)}else h.appendChild(l);if(window.top!=window.self)if(h=document.getElementById("tf_svg")){l={};k=document.createDocumentFragment();d=h.getElementsByTagName("symbol");g=g.getElementsByTagName("symbol");for(m=d.length-1;-1<m;--m)l[d[m].id]=!0;for(d=g.length-1;-1<d;--d)l[g[d].id]||k.appendChild(g[d].cloneNode(!0));h.firstChild.appendChild(k)}else document.appendChild(g.cloneNode(!0))}}else if(g=
e[0].querySelector('.tf-font-group[data-group="'+f+'"]'))g.innerHTML=d;c&&c();a.Loader("spinhide")}}))},showLightbox(c){const a=this;a.Loader("show");a.loadIconsList(function(){a.getByCategory(function(){const e=a.top.scrollTop()+80,f=b("#themify_lightbox_fa",a.top),d=b("#themify_lightbox_overlay",a.top);c&&b("a",f).removeClass("selected").filter('[data-icon="'+c+'"]').addClass("selected");0===d.length&&b("body",a.top).hasClass("themify_builder_active")&&b("body",a.top).append(d);if(0<f.find("a.selected").length){const h=
f.find("a.selected").closest(".tf-font-group").data("group");f.find('.tf-icon-group-select input[value="'+h+'"]').click()}else f.find(".tf-icon-group-select input:first").click();b("#themify-search-icon-input",f).val("").trigger("keyup");b(".themify-lightbox-icon".$lightbox).find(".selected").trigger("click");d.show();f.css("top",a.top.height()).show().animate({top:e},600)})})},loadIconsList(c){const a=this;if(0<b("#themify_lightbox_fa",a.top).length)c();else{let e=!1,f=!1;window.top.Themify.LoadCss(tfIconPicker.url+
"styles.css",null,null,null,function(){e=!0;!0===f&&c()});b.ajax({url:a.ajaxurl,data:{action:"tf_icon_picker_lightbox"},type:"POST",success:function(d){b("body",a.top).append(d);f=!0;!0===e&&c()}})}},setIcon(c){Themify_Icons.target.val(c).trigger("change");"undefined"!==typeof Themify&&Themify.triggerEvent(Themify_Icons.target[0],"change");let a=b(".fa:not(.icon-close)",Themify_Icons.target.parent().parent());0>=a.length&&(a=b(".font-icon-preview i",Themify_Icons.target.parent().parent()));0<a.length&&
b.ajax({url:Themify_Icons.ajaxurl,data:{action:"tf_get_icon",tf_icon:c},success:function(e){e.match(/<svg/)?a.empty().html(e):a.removeClass().addClass(e)}});Themify_Icons.closeLightbox()},closeLightbox(){b("#themify_lightbox_fa",Themify_Icons.top).animate({top:Themify_Icons.top.height()},400,function(){b("#themify_lightbox_overlay",Themify_Icons.top).hide();b(this).hide()})},Category(){const c=this;c.top.on("click",".themify-lightbox-icon li",function(a){a.preventDefault();a.stopPropagation();a=b(this).hasClass("selected");
b(this).closest(".themify-lightbox-icon").find(".selected").removeClass("selected");if(a)b(this).closest(".lightbox_container").find("section").fadeIn("fast",function(){b("#themify-search-icon-input",c.top).trigger("keyup")});else{a=b(this).data("id");const e=b("#"+a,c.top);b(this).addClass("selected");0<e.length&&b(this).closest(".lightbox_container").find("section").not("#"+a).fadeOut("fast",function(){e.fadeIn("normal")})}c.getByCategory()})},Search(){b.expr[":"].contains=b.expr.createPseudo(function(c){return function(a){return 0<=
b(a).text().toUpperCase().indexOf(c.toUpperCase())}});Themify_Icons.top.on("keyup","#themify-search-icon-input",function(){var c=b.trim(b(this).val()),a=b("#themify_lightbox_fa",Themify_Icons.top).find(".tf-font-group a"),e=b("#themify_lightbox_fa",Themify_Icons.top).find("section");c?(e.hide(),a.hide().filter(":contains("+c.toUpperCase()+")").show().each(function(){b(this).closest("section").show()})):(e.show(),a.show())})},Loader(c){"undefined"!==typeof ThemifyBuilderCommon?ThemifyBuilderCommon.showLoader(c):
(null===this.loader&&(this.loader=b(".tb_alert",this.top)),0>=this.loader.length||("show"===c?this.loader.addClass("busy").fadeIn(800):"spinhide"===c&&this.loader.removeClass("busy").fadeOut(800)))}};Themify_Icons.init()})(jQuery);
