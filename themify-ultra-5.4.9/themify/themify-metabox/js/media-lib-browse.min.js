'use strict';var themifyMediaLib={};
(function(b){themifyMediaLib={init:function(){themifyMediaLib.mediaUploader()},mediaUploader:function(){var a="";b("body").on("click",".themify-media-lib-browse",function(c){var d=b(this),g=d.data("submit"),e=d.data("type");a=wp.media.frames.file_frame=wp.media({title:b(this).data("uploader-title"),library:{type:e},button:{text:b(this).data("uploader-button-text")},multiple:!1});a.on("select",function(){var f=a.state().get("selection").first().toJSON();g.attach_id=f.id;var h=d.data("fields");b("#"+
h).val(f.url);b("body").trigger("themify_metabox_lib_selected",[d,f,a]);"image"===e?b.ajax({type:"POST",url:ajaxurl,data:g,dataType:"json",success:function(k){themifyMediaLib.setPreviewIcon(d.closest(".themify_field, .themify_field_row"),k.thumb)}}):("audio"===e||"video"===e)&&d.closest(".themify_field_row").find(".themify_featimg_remove").removeClass("hide")});a.open();c.preventDefault()})},setPreviewIcon:function(a,c){c=b('<a href="'+c+'" target="_blank"><img src="'+c+'" width="40" /></a>').fadeIn(1E3).css("display",
"inline-block");0<a.find(".themify_upload_preview").find("a").length&&a.find(".themify_upload_preview").find("a").remove();a.find(".themify_upload_preview").fadeIn().append(c);a.find(".themify_featimg_remove").removeClass("hide")}};b(themifyMediaLib.init)})(jQuery);
