'use strict';(function(h){function M(a,b){var e=h('<div class="tfminicolors" />'),c=h.tfminicolors.defaults,d;if(!a.data("tfminicolors-initialized")){b=h.extend(!0,{},c,b);e.addClass("tfminicolors-theme-"+b.theme).addClass(b.opacity?"tfminicolors-with-opacity":"tfminicolors-without-opacity");void 0!==b.position&&h.each(b.position.split(" "),function(){e.addClass("tfminicolors-position-"+this)});c="rgb"===b.format?b.opacity?"25":"20":b.keywords?"11":"7";a.addClass("tfminicolors-input").data("tfminicolors-initialized",
!1).data("tfminicolors-settings",b).prop("size",c).attr("autocomplete","off").wrap(e).after('<div class="tfminicolors-panel tfminicolors-slider-'+b.control+'"><div class="tfminicolors-slider tfminicolors-sprite"><div class="tfminicolors-picker"></div></div><div class="tfminicolors-opacity-slider tfminicolors-sprite"><div class="tfminicolors-picker"></div></div><div class="tfminicolors-grid tfminicolors-sprite"><div class="tfminicolors-grid-inner tf_abs tf_w tf_h"></div><div class="tfminicolors-picker"><div></div></div></div></div>');
b.inline||a.after('<span class="tfminicolors-swatch tfminicolors-sprite tfminicolors-input-swatch"><span class="tfminicolors-swatch-color tf_abs"></span></span>');a.on("focus.tfminicolors blur.tfminicolors keydown.tfminicolors keyup.tfminicolors paste.tfminicolors",function(g){var f=g.type;if("focus"===f)k(a);else if("blur"===f){if(g=a.data("tfminicolors-settings"),a.data("tfminicolors-initialized")){f=g.keywords?h.map(g.keywords.split(","),function(t){return h.trim(t.toLowerCase())}):[];if(""!==
a.val()&&-1<h.inArray(a.val().toLowerCase(),f))var E=a.val();else f=H(a.val())?w(a.val(),!0):(f=u(a.val(),!0))?J(f):null,E=null===f?g.defaultValue:"rgb"===g.format?g.opacity?w("rgba("+f.r+","+f.g+","+f.b+","+a.attr("data-opacity")+")"):w("rgb("+f.r+","+f.g+","+f.b+")"):O(f);f=g.opacity?a.attr("data-opacity"):1;"transparent"===E.toLowerCase()&&(f=0);a.closest(".tfminicolors").find(".tfminicolors-input-swatch > span").css("opacity",f);a.val(E);""===a.val()&&a.val(N(g.defaultValue,!0));a.val(v(a.val(),
g.letterCase))}}else if("keydown"===f)switch(g.which){case 9:m();break;case 13:case 27:m(),a.blur()}else if("keyup"===f||"paste"===f)"keyup"===f?z(a,!0):setTimeout(function(){z(a,!0)},1)}).closest(".tfminicolors").on("mousedown.tfminicolors touchstart.tfminicolors",".tfminicolors-grid, .tfminicolors-slider, .tfminicolors-opacity-slider",function(g){if(1===g.which){g.preventDefault();const f=h(this),E=document.body.contains(this)?document:top.document;n(f,g,!0);h(E).on("mousemove.tfminicolors touchmove.tfminicolors",
function(t){n(f,t)}).one("mouseup.tfminicolors touchend.tfminicolors",function(){h(E).off("mousemove.tfminicolors touchmove.tfminicolors")})}}).on("click.tfminicolors",".tfminicolors-swatches li",function(g){g.preventDefault();var f=h(this);g=f.parents(".tfminicolors").find(".tfminicolors-input");f=f.data("swatch-color");A(g,f,P(f));z(g)}).find(".tfminicolors-input-swatch").on("click mousedown.tfminicolors touchstart.tfminicolors",function(g){if("click"===g.type)b.inline||a.focus();else if(1===g.which)k(a);
else return;g.preventDefault()});c=a.parent().find(".tfminicolors-panel");c.on("selectstart",function(){return!1}).end();if(b.swatches&&0!==b.swatches.length){c.addClass("tfminicolors-with-swatches");var p=h('<ul class="tfminicolors-swatches tf_scrollbar"></ul>').appendTo(c);for(d=0;d<b.swatches.length;++d){if("object"===typeof b.swatches[d]){c=b.swatches[d].name;var l=b.swatches[d].color}else c="",l=b.swatches[d];var B=l;l=H(l)?w(l,!0):J(u(l,!0));h('<li class="tfminicolors-swatch tfminicolors-sprite"><span class="tfminicolors-swatch-color tf_abs" title="'+
c+'"></span></li>').appendTo(p).data("swatch-color",B).find(".tfminicolors-swatch-color").css({backgroundColor:O(l),opacity:l.a});b.swatches[d]=l}}b.inline&&a.parent().addClass("tfminicolors-inline");z(a,!1);a.data("tfminicolors-initialized",!0)}}function y(a){const b=a.parent();a.removeData("tfminicolors-initialized").removeData("tfminicolors-settings").removeProp("size").removeClass("tfminicolors-input");b.before(a).remove()}function k(a){var b=a.parent(),e=b.find(".tfminicolors-panel"),c=a.data("tfminicolors-settings"),
d=document.body.contains(a[0])?document:top.document;!a.data("tfminicolors-initialized")||a.prop("disabled")||b.hasClass("tfminicolors-inline")||b.hasClass("tfminicolors-focus")||(m(window.top.document),b.addClass("tfminicolors-focus"),e.animate?e.stop(!0,!0).fadeIn(c.showSpeed,function(){c.show&&c.show.call(a.get(0))}):(e.show(),c.show&&c.show.call(a.get(0))),h(d).on("mousedown.tfminicolors touchstart.tfminicolors",function(p){1===p.which&&0===h(p.target).closest(".tfminicolors,.tfminicolors_wrapper").length&&
(h(this).off("mousemove.tfminicolors touchmove.tfminicolors mousedown.tfminicolors touchstart.tfminicolors mouseup.tfminicolors touchend.tfminicolors"),m(this),d=null)}))}function m(a){h(".tfminicolors-focus",a).each(function(){const b=h(this),e=b.find(".tfminicolors-input"),c=b.find(".tfminicolors-panel"),d=e.data("tfminicolors-settings");c.animate?c.fadeOut(d.hideSpeed,function(){d.hide&&d.hide.call(e.get(0));b.removeClass("tfminicolors-focus")}):(c.hide(),d.hide&&d.hide.call(e.get(0)),b.removeClass("tfminicolors-focus"))})}
function n(a,b,e){let c=a.parents(".tfminicolors").find(".tfminicolors-input"),d=c.data("tfminicolors-settings"),p=a.find("[class$=-picker]");var l=a.offset().left,B=a.offset().top;let g=Math.round(b.pageX-l);var f=Math.round(b.pageY-B);e=e?d.animationSpeed:0;b.originalEvent.changedTouches&&(g=b.originalEvent.changedTouches[0].pageX-l,f=b.originalEvent.changedTouches[0].pageY-B);0>g&&(g=0);0>f&&(f=0);g>a.width()&&(g=a.width());f>a.height()&&(f=a.height());a.parent().hasClass("tfminicolors-slider-wheel")&&
p.parent().hasClass("tfminicolors-grid")&&(l=75-g,B=75-f,b=Math.sqrt(l*l+B*B),l=Math.atan2(B,l),0>l&&(l+=2*Math.PI),75<b&&(b=75,g=75-75*Math.cos(l),f=75-75*Math.sin(l)),g=Math.round(g),f=Math.round(f));f={top:f+"px"};a.is(".tfminicolors-grid")&&(f.left=g+"px");p.animate?p.stop(!0).animate(f,e,d.animationEasing,function(){q(c,a)}):(p.css(f),q(c,a))}function q(a,b){function e(I,K){return I.length&&K?{x:I.offset().left-K.offset().left+I.outerWidth()/2,y:I.offset().top-K.offset().top+I.outerHeight()/
2}:null}var c=a.val();var d=a.attr("data-opacity");var p=a.parent();let l=a.data("tfminicolors-settings"),B=p.find(".tfminicolors-input-swatch");var g=p.find(".tfminicolors-grid");let f=p.find(".tfminicolors-slider"),E=p.find(".tfminicolors-opacity-slider");var t=g.find("[class$=-picker]");var G=f.find("[class$=-picker]"),L=E.find("[class$=-picker]");t=e(t,g);G=e(G,f);L=e(L,E);if(b.is(".tfminicolors-grid, .tfminicolors-slider, .tfminicolors-opacity-slider")){switch(l.control){case "wheel":c=g.width()/
2-t.x;p=g.height()/2-t.y;g=Math.sqrt(c*c+p*p);c=Math.atan2(p,c);0>c&&(c+=2*Math.PI);75<g&&(g=75,t.x=69-75*Math.cos(c),t.y=69-75*Math.sin(c));b=r(g/.75,0,100);d=r(180*c/Math.PI,0,360);t=r(100-Math.floor(G.y*(100/f.height())),0,100);c=F({h:d,s:b,b:t});f.css("backgroundColor",F({h:d,s:b,b:100}));break;case "saturation":d=r(parseInt(t.x*(360/g.width()),10),0,360);b=r(100-Math.floor(G.y*(100/f.height())),0,100);t=r(100-Math.floor(t.y*(100/g.height())),0,100);c=F({h:d,s:b,b:t});f.css("backgroundColor",
F({h:d,s:100,b:t}));p.find(".tfminicolors-grid-inner").css("opacity",b/100);break;case "brightness":d=r(parseInt(t.x*(360/g.width()),10),0,360);b=r(100-Math.floor(t.y*(100/g.height())),0,100);t=r(100-Math.floor(G.y*(100/f.height())),0,100);c=F({h:d,s:b,b:t});f.css("backgroundColor",F({h:d,s:b,b:100}));p.find(".tfminicolors-grid-inner").css("opacity",1-t/100);break;default:d=r(360-parseInt(G.y*(360/f.height()),10),0,360),b=r(Math.floor(t.x*(100/g.width())),0,100),t=r(100-Math.floor(t.y*(100/g.height())),
0,100),c=F({h:d,s:b,b:t}),g.css("backgroundColor",F({h:d,s:100,b:100}))}d=l.opacity?parseFloat(1-L.y/E.height()).toFixed(2):1;A(a,c,d)}else B.find("span").css({backgroundColor:c,opacity:d}),C(a,c,d)}function A(a,b,e){var c=a.parent();let d=a.data("tfminicolors-settings");c=c.find(".tfminicolors-input-swatch");d.opacity&&a.attr("data-opacity",e);if("rgb"===d.format){b=H(b)?w(b,!0):J(u(b,!0));e=""===a.attr("data-opacity")?1:r(parseFloat(a.attr("data-opacity")).toFixed(2),0,1);if(isNaN(e)||!d.opacity)e=
1;b=1>=a.tfminicolors("rgbObject").a&&b&&d.opacity?"rgba("+b.r+", "+b.g+", "+b.b+", "+parseFloat(e)+")":"rgb("+b.r+", "+b.g+", "+b.b+")"}else H(b)&&(b=Q(b)),b=v(b,d.letterCase);a.val(b);c.find("span").css({backgroundColor:b,opacity:e});C(a,b,e)}function z(a,b){let e;var c;let d;var p=a.parent();var l=a.data("tfminicolors-settings");var B=p.find(".tfminicolors-input-swatch");let g=p.find(".tfminicolors-grid"),f=p.find(".tfminicolors-slider"),E=p.find(".tfminicolors-opacity-slider"),t=g.find("[class$=-picker]"),
G=f.find("[class$=-picker]"),L=E.find("[class$=-picker]");H(a.val())?(e=Q(a.val()),(c=r(parseFloat(P(a.val())).toFixed(2),0,1))&&a.attr("data-opacity",c)):e=v(u(a.val(),!0),l.letterCase);e||(e=v(N(l.defaultValue,!0),l.letterCase));c=R(e);var I=l.keywords?h.map(l.keywords.split(","),function(K){return h.trim(K.toLowerCase())}):[];I=""!==a.val()&&-1<h.inArray(a.val().toLowerCase(),I)?v(a.val()):H(a.val())?w(a.val()):e;b||a.val(I);l.opacity&&(d=""===a.attr("data-opacity")?1:r(parseFloat(a.attr("data-opacity")).toFixed(2),
0,1),isNaN(d)&&(d=1),a.attr("data-opacity",d),B.find("span").css("opacity",d),b=r(E.height()-E.height()*d,0,E.height()),L.css("top",b+"px"));"transparent"===a.val().toLowerCase()&&B.find("span").css("opacity",0);B.find("span").css("backgroundColor",e);switch(l.control){case "wheel":p=r(Math.ceil(.75*c.s),0,g.height()/2);B=c.h*Math.PI/180;l=r(75-Math.cos(B)*p,0,g.width());b=r(75-Math.sin(B)*p,0,g.height());t.css({top:b+"px",left:l+"px"});b=150-c.b/(100/g.height());""===e&&(b=0);G.css("top",b+"px");
f.css("backgroundColor",F({h:c.h,s:c.s,b:100}));break;case "saturation":l=r(5*c.h/12,0,150);b=r(g.height()-Math.ceil(c.b/(100/g.height())),0,g.height());t.css({top:b+"px",left:l+"px"});b=r(f.height()-c.s*(f.height()/100),0,f.height());G.css("top",b+"px");f.css("backgroundColor",F({h:c.h,s:100,b:c.b}));p.find(".tfminicolors-grid-inner").css("opacity",c.s/100);break;case "brightness":l=r(5*c.h/12,0,150);b=r(g.height()-Math.ceil(c.s/(100/g.height())),0,g.height());t.css({top:b+"px",left:l+"px"});b=r(f.height()-
c.b*(f.height()/100),0,f.height());G.css("top",b+"px");f.css("backgroundColor",F({h:c.h,s:c.s,b:100}));p.find(".tfminicolors-grid-inner").css("opacity",1-c.b/100);break;default:l=r(Math.ceil(c.s/(100/g.width())),0,g.width()),b=r(g.height()-Math.ceil(c.b/(100/g.height())),0,g.height()),t.css({top:b+"px",left:l+"px"}),b=r(f.height()-c.h/(360/f.height()),0,f.height()),G.css("top",b+"px"),g.css("backgroundColor",F({h:c.h,s:100,b:100}))}a.data("tfminicolors-initialized")&&C(a,I,d)}function C(a,b,e){let c=
a.data("tfminicolors-settings");var d=a.data("tfminicolors-lastChange");let p,l;if(!d||d.value!==b||d.opacity!==e){a.data("tfminicolors-lastChange",{value:b,opacity:e});if(c.swatches&&0!==c.swatches.length){d=H(b)?w(b,!0):J(b);p=-1;for(l=0;l<c.swatches.length;++l)if(d.r===c.swatches[l].r&&d.g===c.swatches[l].g&&d.b===c.swatches[l].b&&d.a===c.swatches[l].a){p=l;break}a.parent().find(".tfminicolors-swatches .tfminicolors-swatch").removeClass("selected");-1!==p&&a.parent().find(".tfminicolors-swatches .tfminicolors-swatch").eq(l).addClass("selected")}c.change&&
(c.changeDelay?(clearTimeout(a.data("tfminicolors-changeTimeout")),a.data("tfminicolors-changeTimeout",setTimeout(function(){c.change.call(a.get(0),b,e)},c.changeDelay))):c.change.call(a.get(0),b,e));a.trigger("change").trigger("input")}}function D(a){var b=h(a);a=b.attr("data-opacity");b=b.val();b=H(b)?w(b,!0):J(u(b,!0));if(!b)return null;void 0!==a&&h.extend(b,{a:parseFloat(a)});return b}function x(a,b){a=h(a);var e=a.val();e=H(e)?w(e,!0):J(u(e,!0));a=a.attr("data-opacity");if(!e)return null;void 0===
a&&(a=1);return b?"rgba("+e.r+", "+e.g+", "+e.b+", "+parseFloat(a)+")":"rgb("+e.r+", "+e.g+", "+e.b+")"}function v(a,b){return"uppercase"===b?a.toUpperCase():a.toLowerCase()}function u(a,b){a=a.replace(/^#/g,"");if(!a.match(/^[A-F0-9]{3,6}/ig)||3!==a.length&&6!==a.length)return"";3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);return"#"+a}function w(a,b){a=a.replace(/[^\d,.]/g,"").split(",");a[0]=r(parseInt(a[0],10),0,255);a[1]=r(parseInt(a[1],10),0,255);a[2]=r(parseInt(a[2],10),0,255);void 0!==
a[3]&&(a[3]=r(parseFloat(a[3],10),0,1));return b?void 0!==a[3]?{r:a[0],g:a[1],b:a[2],a:a[3]}:{r:a[0],g:a[1],b:a[2]}:"undefined"!==typeof a[3]&&1>=a[3]?"rgba("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")":"rgb("+a[0]+", "+a[1]+", "+a[2]+")"}function N(a,b){return H(a)?w(a):u(a,b)}function r(a,b,e){a<b?a=b:a>e&&(a=e);return a}function H(a){a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return!(!a||4!==a.length)}function P(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&
6===a.length?a[4]:"1"}function Q(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"#"+("0"+parseInt(a[1],10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""}function O(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];h.each(b,function(e,c){1===c.length&&(b[e]="0"+c)});return"#"+b.join("")}function F(a){var b=O,e,c;var d=Math.round(a.h);var p=Math.round(255*
a.s/100);a=Math.round(255*a.b/100);if(0===p)d=e=c=a;else{p=(255-p)*a/255;var l=d%60*(a-p)/60;360===d&&(d=0);60>d?(d=a,c=p,e=p+l):120>d?(e=a,c=p,d=a-l):180>d?(e=a,d=p,c=p+l):240>d?(c=a,d=p,e=a-l):300>d?(c=a,e=p,d=p+l):360>d?(d=a,e=p,c=a-l):c=e=d=0}return b({r:Math.round(d),g:Math.round(e),b:Math.round(c)})}function R(a){a=J(a);var b={h:0,s:0,b:0},e=Math.max(a.r,a.g,a.b),c=e-Math.min(a.r,a.g,a.b);b.b=e;b.s=0!==e?255*c/e:0;b.h=0!==b.s?a.r===e?(a.g-a.b)/c:a.g===e?2+(a.b-a.r)/c:4+(a.r-a.g)/c:-1;b.h*=60;
0>b.h&&(b.h+=360);b.s*=100/255;b.b*=100/255;0===b.s&&(b.h=360);return b}function J(a){a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16);return{r:a>>16,g:(a&65280)>>8,b:a&255}}h.tfminicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}};h.extend(h.fn,{tfminicolors:function(a,
b){switch(a){case "destroy":return h(this).each(function(){y(h(this))}),h(this);case "hide":return m(),h(this);case "opacity":if(void 0===b)return h(this).attr("data-opacity");h(this).each(function(){z(h(this).attr("data-opacity",b))});return h(this);case "rgbObject":return D(h(this),"rgbaObject"===a);case "rgbString":case "rgbaString":return x(h(this),"rgbaString"===a);case "settings":if(void 0===b)return h(this).data("tfminicolors-settings");h(this).each(function(){var e=h(this).data("tfminicolors-settings")||
{};y(h(this));h(this).tfminicolors(h.extend(!0,e,b))});return h(this);case "show":return k(h(this).eq(0)),h(this);case "value":if(void 0===b)return h(this).val();h(this).each(function(){"object"===typeof b&&null!==b?(void 0!==b.opacity&&h(this).attr("data-opacity",r(b.opacity,0,1)),b.color&&h(this).val(b.color)):h(this).val(b);z(h(this))});return h(this);default:return"create"!==a&&(b=a),h(this).each(function(){M(h(this),b)}),h(this)}}})})(jQuery);
(function(h,M,y){M.themifyColorManager={colorSwatches:{},initilized:!1,init(){if(!this.initilized&&"undefined"!==typeof themifyCM){this.initilized=!0;for(let k=Object.keys(themifyCM.colors),m=0,n=k.length;m<n;++m)this.colorSwatches[k[m]]=themifyCM.colors[k[m]]}},toRgba(k){return k.color.replace("rgb","rgba").replace(")",","+k.opacity+")")},toColorsArray(){let k=[];for(let m=Object.keys(this.colorSwatches),n=m.length-1;-1<n;--n)k.push(this.toRgba(this.colorSwatches[m[n]]));k.length||(k=["#FFF"]);return k},
initColorPicker(k){k=k.closest(".tfminicolors").querySelector(".tfminicolors-focus .tfminicolors-panel");if(!k.getElementsByClassName("tf_swatches_container")[0]){var m=y.createElement("div"),n=m.getElementsByClassName("tfminicolors-swatch"),q=Object.keys(this.colorSwatches).reverse(),A=y.createElement("div"),z=y.createElement("span"),C=y.createElement("span"),D=y.createElement("div");m.className="tf_swatches_container";m.addEventListener("click",this.initClick.bind(this));m.appendChild(k.getElementsByClassName("tfminicolors-swatches")[0]);
for(let x=n.length-1;-1<x;--x){if(!q.length){n[x].parentNode.removeChild(n[x]);break}let v=y.createElement("span"),u="undefined"!==typeof this.colorSwatches[q[x]].uid?this.colorSwatches[q[x]].uid:this.UID()+x;v.className="tf_delete_swatch tf_close";n[x].appendChild(v);n[x].dataset.uid=this.colorSwatches[q[x]].uid=u}C.className=z.className="tf_cm_tooltip";z.innerText=themifyCM.labels.save;A.appendChild(z);A.className="tf_add_swatch tf_plus_icon";A.setAttribute("tabIndex","-1");m.appendChild(A);C.innerText=
themifyCM.labels.ie;D.appendChild(C);D.className="tf_cm_dropdown_icon";D.appendChild(this.getIcon("ti-import"));D.setAttribute("tabIndex","-1");D.appendChild(this.makeImportExportDropdown());m.appendChild(D);k.appendChild(m)}},makeImportExportDropdown(){const k=y.createElement("div"),m=y.createElement("ul"),n=y.createElement("li"),q=y.createElement("li");k.className="tf_cm_dropdown";n.className="tb_cm_import";n.textContent=themifyCM.labels.import;n.appendChild(this.getIcon("ti-import"));m.appendChild(n);
q.className="tb_cm_export";q.textContent=themifyCM.labels.export;q.appendChild(this.getIcon("ti-export"));m.appendChild(q);k.appendChild(m);return k},getIcon(k,m){k="tf-"+k.trim().replace(" ","-");const n=y.createElementNS("http://www.w3.org/2000/svg","use"),q=y.createElementNS("http://www.w3.org/2000/svg","svg");let A="tf_fa "+k;m&&(A+=" "+m);q.setAttribute("class",A);n.setAttributeNS(null,"href","#"+k);q.appendChild(n);return q},UID(){return(Math.random().toString(36).substring(2)+(new Date).getTime().toString(36)).substring(0,
5)},initClick(k){k.preventDefault();const m=k.target,n=m.classList;n.contains("tf_delete_swatch")?this.deleteSwatch(k):n.contains("tf_add_swatch")?this.addSwatch(m.ownerDocument):n.contains("tb_cm_export")?(m.parentNode.parentNode.parentNode.blur(),y.location.assign(themifyCM.exportColorsURL)):n.contains("tb_cm_import")&&(m.parentNode.parentNode.parentNode.blur(),this.importColors("colors",m.ownerDocument))},importColors(k,m){m=m||y;let n=m.getElementsByClassName("themify_cm_input")[0];if(n)n.dataset.type=
k;else{n=y.createElement("input");n.type="file";n.dataset.type=k;n.className="themify_cm_input";const q=this;n.addEventListener("change",function(A){const z=A.target.files[0],C=new FormData,D=A.target.dataset.type;C.append("file",z,z.name);C.append("action","themify_import_colors");C.append("tb_load_nonce",themifyCM.nonce);C.append("type",D);h.ajax({url:themifyCM.ajax_url,type:"POST",data:C,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(x){if("SUCCESS"===x.status)if("colors"===
D){q.colorSwatches=x.colors;for(let v=m.querySelectorAll(".tf_swatches_container .tfminicolors-swatch"),u=v.length-1;-1<u;--u)v[u].parentNode.removeChild(v[u]);for(let v=Object.keys(q.colorSwatches),u=v.length,w=0;w<u;w++)q.addSwatchHtml(m,q.colorSwatches[v[w]].color,q.colorSwatches[v[w]].opacity,v[w])}else if("gradients"===D){const v=ThemifyBuilderCommon.Lightbox.$lightbox.find(".tb_gradient_container").first().data("themifyGradient");for(let u=Object.keys(themifyCM.gradients),w=u.length-1;-1<w;--w)v.removeSwatch(u[w]);
themifyCM.gradients=x.colors;for(let u=Object.keys(themifyCM.gradients),w=0,N=u.length;w<N;++w)v.addSwatch(themifyCM.gradients[u[w]])}alert(x.msg)}})})}n.click()},deleteSwatch(k){k.preventDefault();k.stopPropagation();const m=k.target.parentNode.dataset.uid;for(let n=k.target.ownerDocument.querySelectorAll('[data-uid="'+m+'"]'),q=n.length-1;-1<q;--q)n[q].parentNode.removeChild(n[q]);delete this.colorSwatches[m];this.updateColorSwatches("colors")},updateColorSwatches(k){h.ajax({type:"POST",url:themifyCM.ajax_url,
dataType:"json",data:{action:"themify_save_colors",type:k,tb_load_nonce:themifyCM.nonce,colors:"colors"===k?this.colorSwatches:themifyCM.gradients}})},addSwatch(k){var m=k.querySelector(".tfminicolors-focus .tfminicolors-input");const n=this.hex2Rgb(m.value);m=m.dataset.opacity;if(null===n)return!1;for(let A=Object.keys(this.colorSwatches),z=A.length-1;-1<z;--z)if(this.colorSwatches[A[z]].color.replace(/\s/g,"")===n&&parseFloat(this.colorSwatches[A[z]].opacity)===parseFloat(m))return!1;const q=this.UID();
this.addSwatchHtml(k,n,m,q);this.colorSwatches[q]={color:n,opacity:m,uid:q};this.updateColorSwatches("colors")},addSwatchHtml(k,m,n,q){for(let C=k.querySelectorAll(".tf_swatches_container .tfminicolors-swatches"),D=C.length-1;-1<D;--D){k=C[D];var A=k.insertBefore,z=q;const x=y.createElement("li"),v=y.createElement("span"),u=y.createElement("span");x.className="tfminicolors-swatch tfminicolors-sprite";x.dataset.uid=z;x.dataset.swatchColor=m.replace(")",", "+n+")").replace("rgb","rgba");v.className=
"tfminicolors-swatch-color tf_abs";v.style.backgroundColor=m;v.style.opacity=n;x.appendChild(v);u.className="tf_delete_swatch tf_close";x.appendChild(u);A.call(k,x,C[D].firstChild)}},hex2Rgb(k){return(k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(k))?"rgb("+parseInt(k[1],16)+","+parseInt(k[2],16)+","+parseInt(k[3],16)+")":null}};M.themifyColorManager.init()})(jQuery,window,document);
