'use strict';jQuery(function(a){var n=function(h,c,b){var d=document.createElement("script");d.type="text/javascript";d.readyState?d.onreadystatechange=function(){if("loaded"==d.readyState||"complete"==d.readyState)d.onreadystatechange=null,b()}:d.onload=function(){b()};var e="type src htmlFor event charset async defer crossOrigin text onerror".split(" ");if("object"==typeof c&&!a.isEmptyObject(c))for(var f in c)c.hasOwnProperty(f)&&a.inArray(f,e)&&(d[f]=c[f]);d.src=h;document.getElementsByTagName(c.lazyLoad?
"body":"head")[0].appendChild(d)};a.loadScript=function(h,c,b){2===arguments.length&&"function"==typeof arguments[1]&&(b=arguments[1],c={});c=c||{};var d=a.Deferred();return"function"==typeof b&&d.done(function(){b()}),n(h,c,function(){d.resolve()}),d.promise()}});
window.Themify_Metabox=function(a){function n(c){var b="";a('input[type="checkbox"]',c).each(function(){b+=a(this).attr("id")+"="+a(this).val()+"&"});a('input[type="text"]',c).val(b.slice(0,-1))}var h={loadScript:function(c,b,d){d?b():a.loadScript(c).done(function(){b()})},init:function(){this.bind_events()},bind_events:function(){a(h.document_ready)},document_ready:function(){h.init_metabox_tabs();h.gallery_shortcode();h.repeater();h.enable_toggle();h.query_category();h.post_meta_checkbox();h.init_fields(a("body"));
h.pagination(a("body"));h.audioRemoveAction();h.builder_page()},init_metabox_tabs:function(){a(".themify-meta-box-tabs").each(function(){var c=a(this),b=a(".ilc-htabs li",c);1<b.length?ilcTabs({ilctabs:"#"+c.attr("id")}):(a(".ilc-tab",c).show(),b.addClass("select"))});a(".ilc-htabs a").on("click",function(){h.set_cookie("themify-builder-tabs",a(this).attr("id"))});"undefined"!=typeof h.get_cookie("themify-builder-tabs")&&null!==h.get_cookie("themify-builder-tabs")&&a("#"+h.get_cookie("themify-builder-tabs")).trigger("click")},
init_fields:function(c){h.layout(c);h.color_picker(c);c.find(".themifyDatePicker").length&&h.loadScript(TF_Metabox.includes_url+"js/jquery/ui/datepicker.min.js",function(){h.loadScript(TF_Metabox.includes_url+"js/jquery/ui/slider.min.js",function(){h.loadScript(TF_Metabox.url+"js/jquery-ui-timepicker.min.js",function(){h.date_picker(c)},"undefined"!==typeof a.ui.timepicker)},"undefined"!==typeof a.fn.slider)},"undefined"!==typeof a.fn.datepicker);h.assignments(c);h.dropdownbutton(c);h.togglegroup(c);
a(document).triggerHandler("themify_metabox_init_fields",[h])},repeater:function(){a("body").on("click",".themify-repeater-add",function(c){c.preventDefault();var b=a(this).closest(".themify_field_row");c=b.find(".themify-repeater-rows");b=b.find(".themify-repeater-template").html();var d=1;c.find("> div").length&&(c.find("> div").each(function(){d=Math.max(d,a(this).data("id"))}),d++);b=a(b.replace(/__i__/g,d));b.find(".ajaxnonceplu").attr("id","");c.append(b);b.has(".plupload-upload-uic").length&&
b.find(".plupload-upload-uic").each(function(){themify_create_pluploader(a(this))});h.init_fields(c.find(".themify-repeater-row:last-child"))});a("body").on("click",".themify-repeater-remove-row",function(c){c.preventDefault();a(this).parent().remove()})},audioRemoveAction:function(){a("body").on("click","[data-audio-remove] a",function(c){c.preventDefault();var b=a(this).parent();c=b.data("audio-remove");var d=function(){b.parent().find(".themify_upload_field").val("");b.addClass("hide")};d();c.action=
"themify_remove_audio";a.post(ajaxurl,c,d)})},color_picker:function(c){"function"===typeof a.fn.tfminicolors&&(c.find(".colorSelectInput").each(function(){var b={},d=a(this).data("format");"rgba"==d?(b.format="rgb",b.opacity=!0):"rgb"==d&&(b.format="rgb");a(this).tfminicolors(b)}),c.find(".clearColor").on("click",function(){a(this).parent().find(".colorSelectInput").tfminicolors("value","");a(this).parent().find(".colorSelectInput").val("")}))},date_picker:function(c){c.find(".themifyDatePicker").each(function(){var b=
a(this),d=b.data("label"),e=b.data("close"),f=b.data("dateformat"),g=b.data("timeformat"),k=b.data("timeseparator");a.fn.datetimepicker.call(b,{showOn:"both",showButtonPanel:!0,closeButton:e,buttonText:d,dateFormat:f,timeFormat:g,stepMinute:5,firstDay:b.data("first-day"),separator:k,onClose:function(l){""!=l&&a("#"+b.data("clear")).addClass("themifyFadeIn")},beforeShow:function(){a("#ui-datepicker-div").addClass("themifyDateTimePickerPanel")}});b.next().addClass("button")});c.find(".themifyClearDate").on("click",
function(b){b.preventDefault();b=a(this);a("#"+b.data("picker")).val("").trigger("change");b.removeClass("themifyFadeIn")})},assignments:function(c){c.find(".themify-assignments, .themify-assignment-inner-tabs").tabs();c.on("change",'.themify-assignments input[type="checkbox"]',function(){var b=a(this);b.is(":checked")?b.closest(".themify-assignments").find(".values").append('<input type="hidden" name="'+b.attr("data-name")+'" value="on" />'):b.closest(".themify-assignments").find('.values input[type="hidden"][name="'+
b.attr("data-name")+'"]').remove()})},layout:function(c){c.find(".preview-icon").each(function(){var b=a(this),d=b.parent(),e=d.find(".val"),f="",g="";if(0<b.closest(".group-hide").length){g="theme-settings";var k=b.closest(".group-hide");f=k.data("hide")}else 0<b.closest(".themify_field_row").length&&(g="custom-panel",k=b.closest(".themify_field_row"),"undefined"!==typeof k.data("hide")&&(f=k.data("hide")));b.click(function(m){m.preventDefault();d.find(".selected").removeClass("selected");b.addClass("selected");
e.val(b.find("img").attr("alt")).trigger("change");""!==f&&("custom-panel"==g?(m=k.nextUntil("[data-hide]"),m.add(m.find(".themify_field .hide-if")).not(".toggled-off").filter("."+f.replace(/\s/g,",.")).show().filter("."+e.val()).hide()):"theme-settings"==g&&k.find(".hide-if").filter("."+f.replace(/\s/g,",.")).show().filter("."+e.val()).hide())});if(""!==f)if("custom-panel"==g){var l=k.nextUntil("[data-hide]");l.add(l.find(".themify_field .hide-if")).not(".toggled-off").filter("."+f.replace(/\s/g,
",.")).filter("."+e.val()).hide()}else"theme-settings"==g&&k.find(".hide-if").filter("."+f.replace(/\s/g,",.")).show().filter("."+e.val()).hide()});c.find(".themify_field .preview-icon").on("click",function(b){b.preventDefault();a(this).parent().find(".selected").removeClass("selected");a(this).addClass("selected");a(this).parent().find(".val").val(a(this).find("img").attr("alt")).trigger("change")});c.find(".themify_field_row[data-hide]").each(function(){var b=a(this).data("hide");if("string"===
typeof b&&(b=b.split(" "),1<b.length)){var d=b.shift();d=d.split("|");var e=a("."+b.join(", ."));a("select, input",this).on("change",function(){var f=a(this).val();!d.includes(f)&&e.is(":visible")||e.toggle(!d.includes(f))}).trigger("change")}})},dropdownbutton:function(c){c.find(".dropdownbutton-group").each(function(){var b=a(this);b.on("mouseenter mouseleave",".dropdownbutton-list",function(e){e.preventDefault();var f=a(this);if(f.hasClass("disabled"))return!1;"mouseenter"==e.type&&(f.children(".dropdownbutton").is(":visible")||
f.children(".dropdownbutton").show());"mouseleave"==e.type&&f.children(".dropdownbutton").is(":visible")&&f.children(".dropdownbutton").hide()});b.on("click",".first-ddbtn a",function(e){e.preventDefault()});b.on("click",".ddbtn a",function(e){e.preventDefault();var f=a(this).find("img").attr("src"),g=a(this).data("val");e=a(this).closest(".dropdownbutton-list");var k=e.attr("id");a(this).closest(".dropdownbutton-list").find(".first-ddbtn img").attr("src",f);a(this).closest(".dropdownbutton").hide();
a("input#"+k).val(g);e.next().hasClass("ddbtn-all")&&(b.hasClass("multi-ddbtn")?(f=a(".multi-ddbtn-sub",b.parent().parent()),g=a(".multi-ddbtn-sub + input",b.parent().parent())):(g=e.next(),f=g.prev().siblings(".dropdownbutton-list"),g=g.siblings("input")),"yes"==e.next().val()?(f.addClass("disabled opacity-5"),f.each(function(){var l=a(this).data("def-icon");a(this).find(".first-ddbtn img").attr("src",l)}),g.val("")):f.removeClass("disabled opacity-5"))});var d=b.find("input.ddbtn-all");"yes"==d.val()&&
(b.hasClass("multi-ddbtn")?a(".multi-ddbtn-sub",b.parent().parent()).addClass("disabled opacity-5"):d.prev().siblings(".dropdownbutton-list").addClass("disabled opacity-5"))})},togglegroup:function(c){c.find(".themify_toggle_group_wrapper").each(function(){var b=a(this);b.find(".themify_toggle_group_inner").hide();b.on("click",".themify_toggle_group_label",function(d){var e=a(this),f=e.find("i");e=e.next();e.hasClass("is-activated")?(f.removeClass("ti-minus").addClass("tf_plus_icon"),e.hide().removeClass("is-activated")):
(e.show().addClass("is-activated"),f.removeClass("tf_plus_icon").addClass("ti-minus"));d.preventDefault()})})},gallery_shortcode:function(){var c=wp.media.gallery.shortcode,b=wp.media.gallery,d;a("body").on("click",".themify-gallery-shortcode-btn",function(e){var f=a(this).closest(".themify_field").find(".themify-gallery-shortcode-input");f.html()&&(f.val(f.html()),f.html(""),f.text(""));d?d.open():d=0<a.trim(f.val()).length?b.edit(a.trim(f.val())):wp.media.frames.file_frame=wp.media({frame:"post",
state:"gallery-edit",title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1});wp.media.gallery.shortcode=function(g){var k=g.props.toJSON(),l=_.pick(k,"orderby","order");g.gallery&&_.extend(l,g.gallery.toJSON());l.ids=g.pluck("id");k.uploadedTo&&(l.id=k.uploadedTo);l._orderbyRandom&&(l.orderby="rand");delete l._orderbyRandom;l.ids&&"post__in"===l.orderby&&delete l.orderby;_.each(wp.media.gallery.defaults,function(m,p){m===l[p]&&delete l[p]});g=new wp.shortcode({tag:"gallery",
attrs:l,type:"single"});f.val(g.string());wp.media.gallery.shortcode=c;return g};d.on("update",function(g){g=wp.media.gallery.shortcode(g).string().slice(1,-1);f.val("["+g+"]")});0==a.trim(f.val()).length&&a(".media-menu").find(".media-menu-item").last().trigger("click");e.preventDefault()})},set_cookie:function(c,b){document.cookie=c+"="+b+"; path=/"},get_cookie:function(c){c+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var e=b[d];" "==e.charAt(0);)e=e.substring(1,e.length);
if(0==e.indexOf(c))return e.substring(c.length,e.length)}return null},enable_toggle:function(){var c=a(".enable_toggle");0<c.length&&c.each(function(){var b=a(this).closest(".themify_write_panel");b.length||(b=a(this).closest("form"));a(".themify-toggle",b).hide().addClass("toggled-off")});a(".enable_toggle .preview-icon").on("click",function(b){var d=a(this).find("img").attr("alt");d=""!=a.trim(d)?"."+d+"-toggle":".default-toggle";a(this).closest(".inside").find(".themify-toggle").hide().addClass("toggled-off");
a(this).closest(".inside").find(d).show().removeClass("toggled-off");b.preventDefault()});a(".enable_toggle .preview-icon.selected").each(function(){var b=a(this).find("img").attr("alt");a(""!=b&&"default"!=b?"."+b+"-toggle":".default-toggle").show().removeClass("toggled-off")});a(".enable_toggle input[type=radio]").on("click",function(){var b=a(this).val();b=0!=b&&""!=b?"."+b+"-toggle":".default-toggle";a(this).siblings("input[type=radio]").each(function(){var d=a(this).val();0!=d&&""!==d&&a("."+
d+"-toggle").hide().addClass("toggled-off")});a(b).each(function(){a(this).show().removeClass("toggled-off");a(this).hasClass("enable_toggle_child")&&a(this).find("input[type=radio]:checked").siblings("input[type=radio]").each(function(){var d=a(this).val();setTimeout(function(){0!=d&&""!==d&&a("."+d+"-toggle").hide().addClass("toggled-off")},500)})})});c.each(function(){var b=a(this).find('input[type="radio"]:checked').val();a(0!=b&&""!==b?"."+b+"-toggle":".default-toggle").each(function(){a(this).show().removeClass("toggled-off");
a(this).hasClass("enable_toggle_child")&&a(this).find("input[type=radio]:checked").siblings("input[type=radio]").each(function(){var d=a(this).val();setTimeout(function(){0!=d&&""!==d&&a("."+d+"-toggle").hide().addClass("toggled-off")},500)})})});a('.enable_toggle input[type="checkbox"]').on("click",function(){var b=a(this).data("val");b=0!=b&&""!=b?"."+b+"-toggle":".default-toggle";a(this).closest(".inside").find(".themify-toggle").hide().addClass("toggled-off");a(this).prop("checked")&&a(this).closest(".inside").find(b).show().removeClass("toggled-off")});
a('.enable_toggle input[type="checkbox"]:checked').each(function(){var b=a(this).data("val");a(0!=b&&""!==b?"."+b+"-toggle":".default-toggle").show().removeClass("toggled-off")})},query_category:function(){function c(e,f){""!=f?e.closest(".inside").find(".themify_field_row").removeClass("query-field-hide"):e.closest(".inside").find(".themify_field_row").not(e.closest(".themify_field_row")).not(".query-field-visible").addClass("query-field-hide")}var b=a(".themify_field"),d=a(".themify-info-link");
b.find(".query_category").blur(function(){var e=a(this),f=e.val();a(this).parent().find(".val").val(f);c(e,f)}).keyup(function(){var e=a(this),f=e.val();a(this).parent().find(".val").val(f);c(e,f)});b.find(".query_category_single").change(function(){var e=a(this),f=e.val();e.parent().find(".query_category, .val").val(f);c(e,f)}).closest(".themify_field_row").addClass("query-field-visible");d.closest(".themify_field_row").addClass("query-field-visible");a(".query_category_single, .query_category").each(function(){var e=
a(this),f=e.val();c(e,f)});d.closest(".themify_field_row").removeClass("query-field-hide")},post_meta_checkbox:function(){a(".post-meta-group").each(function(){var c=a(this);a(".meta-all",c).prop("checked")&&a(".meta-sub",c).prop("disabled",!0).parent().addClass("opacity-7");c.on("click",".meta-all",function(){a(this).prop("checked")?a(".meta-sub",c).prop("disabled",!0).prop("checked",!1).parent().addClass("opacity-7"):a(".meta-sub",c).prop("disabled",!1).parent().removeClass("opacity-7")})});a(".custom-post-meta-group").each(function(){var c=
a(this),b=a('input[type="text"]',c).val(),d={},e=[],f=[];if("yes"===b)a(".meta-all",c).val("yes").prop("checked",!0),a(".meta-sub",c).val("yes").prop("disabled",!0).parent().addClass("opacity-7");else{f=b.split("&");for(b=0;b<f.length;b++)e=f[b].split("="),d[e[0]]=e[1];for(var g in d)d.hasOwnProperty(g)&&"yes"===d[g]&&a("#"+g,c).val("yes").prop("checked",!0);a(".meta-all",c).prop("checked")&&a(".meta-sub",c).prop("disabled",!0).prop("checked",!1).parent().addClass("opacity-7")}c.on("click",".meta-all",
function(){var k=a(this);k.prop("checked")?(a(".meta-sub",c).val("yes").prop("disabled",!0).prop("checked",!1).parent().addClass("opacity-7"),k.val("yes")):(a(".meta-sub",c).val("no").prop("disabled",!1).parent().removeClass("opacity-7"),k.val("no"));n(c)});c.on("click",".meta-sub",function(){var k=a(this);k.prop("checked")?k.val("yes"):k.val("no");n(c)})})},pagination:function(c){c.on("click","#themify_assignments_popup_show .themify-popup-visibility-tab",function(b){b.preventDefault();var d=a(this);
if(!d.data("active")){b=d.data("type");var e=d.parents("#themify_assignments_popup_show").find(".themify-assignment-type-options[data-type="+b+"]"),f=a("#popup_show-assignment-tab-pages").data("post-id");jQuery.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_inner_popup_page",type:b,post_id:f},beforeSend:function(){},success:function(g){e.html(g);d.data("active","on")}})}});c.on("click",".themify-assignment-pagination .page-numbers",function(b){b.preventDefault();b=a(this);var d=b.parents(".themify-assignment-options"),
e=b.parents(".themify-assignment-items-inner"),f=a(".themify-assignment-pagination",e),g=parseFloat(a(".themify-assignment-pagination .current",e).text()),k=1;b.hasClass("next")?k=g+1:b.hasClass("prev")?k=g-1:b.hasClass("page-numbers")&&(k=parseFloat(b.text()));var l=a(".themify-assignment-items-inner",d);a.ajax({url:ajaxurl,type:"post",data:{action:"themify_create_popup_page_pagination",current_page:k,num_of_pages:e.data("pages")},beforeSend:function(){a(".tb_slider_loader",d).remove();a(".themify-assignment-items-page",
e).addClass("is-hidden");f.hide();l.append('<div class="tb_slider_loader"></div>')},success:function(m){a(".tb_slider_loader",d).remove();a(".themify-assignment-items-page-"+k,e).removeClass("is-hidden");f.html(m).show()}})})},builder_page:function(){const c=document.getElementById("builder_page");if(c){const b=document.querySelector('#page-options [alt="sidebar-none"]').parentNode,d=document.querySelector('#page-options [alt="full_width"]').parentNode,e=b.closest(".themify_field_row"),f=d.closest(".themify_field_row"),
g=document.getElementById("hide_page_title"),k=g.closest(".themify_field_row"),l=[e,f,k];c.addEventListener("change",function(){if(this.checked){b.click();d.click();for(var m=2;-1<m;m--)l[m].style.opacity=.5,l[m].className+=" disabled";g.value="yes"}else for(m=2;-1<m;m--)l[m].style.opacity=1,l[m].classList.remove("disabled")})}}};h.init();return h}(jQuery);
