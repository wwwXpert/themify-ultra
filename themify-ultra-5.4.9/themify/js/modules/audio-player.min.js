'use strict';(function(z,e){const v=z.isTouch?window.PointerEvent?"pointerdown":"touchstart":"click",I=/iPhone|iPad|iPod|Mac OS/i.test(window.navigator.userAgent),C=function(a){a=Infinity===a?0:a;a=(new Date(1E3*a)).toISOString().substr(11,8).split(":");"00"===a[0]&&a.splice(0,1);return a.join(":")},K=function(a,f){const c=a.tracks,t=!!a.artists,k=!!a.images;a=!!a.tracknumbers;const m=e.createElement("div"),y=e.createElement("div");y.className="tf_audio_playlist";m.className="tf_playlist_current";
for(let b=0,g=c.length;b<g;++b)if(c[b].src){c[b].src=c[b].src.trim();let h=e.createElement("div"),n=e.createElement("a"),l=new Audio(c[b].src),q=e.createElement("div"),u=e.createElement("span");if(!c[b].type||l.canPlayType(c[b].type)){h.className="tf_playlist_item tf_w tf_rel";n.href=c[b].src;n.className="tf_playlist_caption tf_w";q.className="tf_playlist_length";!isNaN(l.duration)||c[b].meta&&c[b].meta.length_formatted?(q.textContent=isNaN(l.duration)?c[b].meta.length_formatted:C(l.duration),l=null):
(h.className+=" tf_lazy",l.addEventListener("durationchange",function(){q.textContent=C(this.duration);l=null;h.classList.remove("tf_lazy")},{passive:!0,once:!0}));!0===a&&(n.textContent=b+1+".");u.className="tf_playlist_title";c[b].caption?u.textContent=c[b].caption:c[b].title&&(u.textContent=c[b].title);if(!0===t&&c[b].meta&&c[b].meta.artists){let B=e.createElement("span");B.className="tf_playlist_artist";B.textContent="-"+c[b].meta.artists;n.appendChild(B)}n.appendChild(u);h.appendChild(n);h.appendChild(q);
y.appendChild(h)}else c.slice(b,1)}else c.slice(b,1);let A=!0;y.addEventListener(v,function(b){var g=b.target.closest(".tf_playlist_caption"),h=g.parentNode.classList.contains("tf_audio_current");if(g){b.preventDefault();b.stopPropagation();if(!h||f.paused)if(h)f.play();else{var n=this.getElementsByClassName("tf_audio_current")[0],l=z.convert(this.children).indexOf(g.parentNode);b=e.createElement("div");h=e.createElement("span");b.className="tf_playlist_caption";h.className="tf_playlist_title";!1===
A&&(f.pause(),f.addEventListener("loadedmetadata",function(){this.play()},{passive:!0,once:!0}),f.setAttribute("src",g.getAttribute("href")),f.load());n&&n.classList.remove("tf_audio_current");g.parentNode.classList.add("tf_audio_current");m.innerHTML="";c[l]&&(g=c[l],k&&g.thumb&&g.thumb.src&&(n=new Image,n.src=g.thumb.src,void 0!==g.thumb.width&&(n.width=g.thumb.width),void 0!==g.thumb.height&&(n.height=g.thumb.height),n.decode="async",l=e.createElement("div"),l.className="post-image",l.appendChild(n),
m.appendChild(l)),h.textContent=g.title?g.title:g.caption?g.caption:"",b.appendChild(h),c.meta&&(c.meta.album&&(h=e.createElement("span"),h.className=" tf_playlist_album",h.textContent=c.meta.album,b.appendChild(h)),t&&c.meta.artists&&(h=e.createElement("span"),h.className=" tf_playlist_artist",h.textContent=c.meta.artists,b.appendChild(h))),m.appendChild(b))}A=!1}});f.parentNode.insertBefore(m,f);z.triggerEvent(y.getElementsByClassName("tf_playlist_caption")[0],v);return y},J=function(a,f){const c=
e.createElement("div"),t=e.createElement("div"),k=e.createElement("div"),m=e.createElement("div"),y=e.createElement("div");e.createElement("div");const A=e.createElement("div"),b=e.createElement("input"),g=e.createElement("input"),h=e.createElement("div"),n=e.createElement("div"),l=e.createElement("div"),q=e.createElement("button"),u=e.createElement("button"),B=e.createElement("div");var D=a.parentNode.closest(".track");const E=e.createElement("div"),L=f&&f.tracks&&!0;let F=!0,G=!1;c.className="tf_audio_container tf_w tf_rel tf_box";
t.className="tf_audio_wrap tf_w tf_rel tf_box";l.className="tf_audio_controls";k.className="tf_audio_progress_wrap tf_rel tf_textl";m.className="tf_audio_progress_loaded tf_w tf_h tf_abs";y.className="tf_audio_progress_current tf_w tf_h tf_abs";b.className="tf_audio_progress_range tf_w tf_h tf_abs";g.min=b.min=0;g.max=b.max=100;g.type=b.type="range";b.value=0;g.value="50%";h.className="tf_audio_volumn_wrap";n.className="tf_audio_volumn_inner";g.className="tf_audio_volumn_range";q.className="tf_audio_mute";
u.className="tf_auido_play";u.tabIndex=q.tabIndex=0;u.type=q.type="button";a.muted&&(q.className+=" tf_muted");B.className="tf_audio_current_time";E.className="tf_audio_total_time";A.className="tf_audio_hover tf_abs tf_hide tf_box tf_textc";B.textContent=C(a.currentTime);E.textContent=C(a.duration);u.addEventListener(v,function(d){"click"===d.type&&(d.preventDefault(),d.stopPropagation());a.paused?a.play():a.pause()},{passive:"click"!==v});D&&(D=D.getElementsByClassName("track-title")[0])&&D.addEventListener(v,
function(d){d.preventDefault();z.triggerEvent(u,v)});q.addEventListener(v,function(d){"click"===d.type&&(d.preventDefault(),d.stopPropagation());a.muted=!a.muted},{passive:"click"!==v});z.isTouch||k.addEventListener("mouseenter",function(){if(!isNaN(a.duration)){A.classList.remove("tf_hide");const d=this.clientWidth,r=parseFloat(A.clientWidth/2),w=a.duration,p=function(x){const H=void 0!==x.layerX?x.layerX:x.offsetX;0<H-r&&x.layerX<=d&&(A.style.transform="translateX("+(H-r)+"px)",A.textContent=C(parseFloat(H/
d)*w))};this.addEventListener("mouseleave",function(){A.classList.add("tf_hide");this.removeEventListener("mousemove",p,{passive:!0})},{passive:!0,once:!0});this.addEventListener("mousemove",p,{passive:!0})}},{passive:!0});b.addEventListener("input",function(d){d.preventDefault();d.stopPropagation();isNaN(a.duration)||(a.paused||!0!==F||a.pause(),G=!0,d=parseInt(this.value),a.currentTime=100===d?a.duration-1:parseFloat(d*a.duration/100).toFixed(4))});b.addEventListener("change",function(d){d.preventDefault();
d.stopPropagation();isNaN(a.duration)||(G=F=!1,a.paused&&a.play().then(r=>{F=!0}).catch(r=>{F=!0}))});a.addEventListener("progress",function(){0<this.buffered.length&&(m.style.transform="scaleX("+parseFloat(this.buffered.end(0)/this.duration).toFixed(4)+")")},{passive:!0});a.addEventListener("durationchange",function(){E.textContent=C(this.duration)},{passive:!0});a.addEventListener("waiting",function(){k.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){k.classList.remove("tf_audio_waiting")},
{passive:!0,once:!0})},{passive:!0});a.addEventListener("emptied",function(){k.classList.add("tf_audio_waiting");this.addEventListener("playing",function(){k.classList.remove("tf_audio_waiting")},{passive:!0,once:!0})},{passive:!0});a.addEventListener("pause",function(){u.classList.remove("tf_audio_playing")},{passive:!0});a.addEventListener("play",function(){u.classList.add("tf_audio_playing");const d=e.getElementsByTagName("audio");for(let r=d.length-1;-1<r;--r)d[r]!==this&&d[r].pause()},{passive:!0});
a.addEventListener("timeupdate",function(){if(!isNaN(this.duration)){B.textContent=C(this.currentTime);let d=parseFloat(this.currentTime/this.duration);y.style.transform="scaleX("+d.toFixed(4)+")";!1===G&&(b.value=parseInt(100*d))}},{passive:!0});a.addEventListener("volumechange",function(){0!==this.volume&&q.classList.remove("tf_mute_disabled");!0===this.muted||0===this.volume?(0===this.volume&&q.classList.add("tf_mute_disabled"),q.classList.add("tf_muted")):q.classList.remove("tf_muted")},{passive:!0});
k.appendChild(m);k.appendChild(y);k.appendChild(b);k.appendChild(A);h.appendChild(q);!1===I&&(g.addEventListener("input",function(d){d.preventDefault();d.stopPropagation();a.volume=parseFloat(this.value/100).toFixed(3)}),n.appendChild(g),h.appendChild(n));t.appendChild(l);t.appendChild(B);t.appendChild(k);t.appendChild(E);t.appendChild(h);c.appendChild(t);if(L){const d=c.appendChild(K(f,a)),r=e.createElement("button"),w=e.createElement("button");r.className="tf_playlist_prev tf_play_disabled";w.className=
"tf_playlist_next";1>=d.children.length&&(w.className+=" tf_play_disabled");r.tabIndex=w.tabIndex=0;r.type=w.type="button";l.addEventListener(v,function(p){const x=p.target.classList;!x.contains("tf_play_disabled")&&(x.contains("tf_playlist_prev")||x.contains("tf_playlist_next"))&&("click"===p.type&&(p.preventDefault(),p.stopPropagation()),p=d.getElementsByClassName("tf_audio_current")[0])&&(p=x.contains("tf_playlist_prev")?p.previousElementSibling:p.nextElementSibling)&&(z.triggerEvent(p.getElementsByClassName("tf_playlist_caption")[0],
v),x.contains("tf_playlist_prev")?(w.classList.remove("tf_play_disabled"),x.toggle("tf_play_disabled",!p.previousElementSibling)):(r.classList.remove("tf_play_disabled"),x.toggle("tf_play_disabled",!p.nextElementSibling)))},{passive:"click"!==v});a.addEventListener("ended",function(){if(!w.classList.contains("tf_play_disabled"))z.triggerEvent(w,v);else if(a.hasAttribute("data-loop")||a.hasAttribute("loop")){const p=d.getElementsByClassName("tf_playlist_caption")[0];p&&(r.classList.add("tf_play_disabled"),
w.classList.toggle("tf_play_disabled",1>=d.children.length),z.triggerEvent(p,v))}},{passive:!0});l.appendChild(r);l.appendChild(u);l.appendChild(w)}else l.appendChild(u);a.parentNode.classList.remove("tf_lazy");a.parentNode.insertBefore(c,a)},M=function(a,f){for(let t=a.length-1;-1<t;--t){let k=a[t];if(null===k.previousElementSibling||!k.previousElementSibling.classList.contains("tf_audio_container")){if(!f){var c=k.parentNode.parentNode;if(c.classList.contains("wp-audio-playlist")){let m=c.getElementsByClassName("tf-playlist-script")[0];
m||(m=c.getElementsByClassName("wp-playlist-script")[0]);m&&(f=JSON.parse(m.textContent),"audio"!==f.type&&(f=!1))}}if(!k.hasAttribute("src")&&!k.getElementsByTagName("source")[0]){if(!f||!f.tracks)continue;c=f.tracks[0].src;if(!c)for(let m=1,y=f.tracks.length;m<y;++m)if(f.tracks[m].src){c=f.tracks[m].src;break}if(!c)continue;k.setAttribute("src",c)}4===k.readyState?J(k,f):z.requestIdleCallback(function(){k.addEventListener("loadedmetadata",function(){J(this,f)},{passive:!0,once:!0});k.setAttribute("preload",
"metadata");!0===I&&k.load()},200)}}};z.on("tf_audio_init",function(a,f){a instanceof jQuery?a=a.get():void 0===a.length&&(a=[a]);M(a,f)})})(Themify,document);
