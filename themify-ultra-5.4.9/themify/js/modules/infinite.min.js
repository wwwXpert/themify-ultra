'use strict';(function(n,f,m,p){let r=null,t=null;const u=[],y=function(a){return new m.IntersectionObserver(function(d,b){for(let h=d.length-1;-1<h;--h)!0===d[h].isIntersecting&&(null===a.button?b.disconnect():x(a))},{threshold:.1})},v=function(a,d){null===t&&(t=new m.IntersectionObserver(function(b,h){for(h=b.length-1;-1<h;--h)!0===b[h].isIntersecting&&m.history.replaceState(null,null,b[h].target.getAttribute("data-tf-history"))},{rootMargin:"100% 0px -100% 0px"}));a.setAttribute("data-tf-history",
f.UpdateQueryString("tf-scroll",null,d));t.observe(a)},w=function(a){return f.UpdateQueryString("tf-scroll",1,a)},z=function(a,d){f.lazyScroll(f.selectWithParent("[data-lazy]",a),!0);const b=n(a);void 0!==m.Isotope&&m.Isotope.data(a)&&(a=a.previousElementSibling,null!==a&&a.classList.contains("post-filter")&&(a=a.getElementsByClassName("active")[0],void 0!==a&&n(a).trigger("click.tf_isotop_filter")));b.triggerHandler("infinitebeforeloaded.themify",d);f.trigger("infinitebeforeloaded.themify",[b,d]);
setTimeout(f.reLayoutIsoTop.bind(f),1500)},A=function(a,d,b){const h=a.length,l=n(d),g=void 0!==m.Isotope?m.Isotope.data(d):null;null===r&&(r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent));a[0].className+=" tf_firstitem";var e=0;for(d=0;d<h;++d)a[d].style.opacity=0,f.imagesLoad(a[d],function(c){c=c.elements[0];if(r){var k=c.querySelector("img[srcset]");null!==k&&(k.outerHTML=k.outerHTML)}++e;g&&g.appended(c);c.style.opacity="";if(e===h){if(g||l[0].classList.contains("auto_tiles"))c=l[0].previousElementSibling,
null!==c&&c.classList.contains("post-filter")&&f.body.triggerHandler("themify_isotop_filter",[c]),l[0].classList.contains("auto_tiles")&&f.autoTiles(l[0]);c=n(a);for(k=0;k<h;++k)f.lazyScroll(f.convert(f.selectWithParent("[data-lazy]",a[k])).reverse(),!0);l.triggerHandler("infiniteloaded.themify",[c]);f.trigger("infiniteloaded.themify",[l,c]);if("scroll"===b.scrollToNewOnLoad){c=l[0].getElementsByClassName("tf_firstitem");c=c[c.length-1];c=n(c).offset().top;k=800<=c?800+Math.abs(c/1E3*100):800;const q=
p.getElementById("headerwrap");null!==q&&(q.classList.contains("fixed-header")||f.body[0].classList.contains("fixed-header"))&&(c-=n(q).outerHeight(!0));(!1===b.scrollThreshold||c-p.documentElement.scrollTop>b.scrollThreshold)&&f.scrollTo(c,k)}f.fontAwesome()}})},x=function(a){if(!0!==a.isWorking){a.isWorking=!0;a.status.classList.add("tf_scroll_request");var d=new Headers({"X-Requested-With":"XMLHttpRequest"});fetch(w(a.button.href),{headers:d}).then(function(b){return b.text()}).then(function(b){var h=
(new DOMParser).parseFromString(b,"text/html");b=h.querySelector(a.id);const l=f.UpdateQueryString("tf-scroll",null,a.button.getAttribute("href"));var g=a.container;let e=null;if(null!==b){z(g,h);h=p.createDocumentFragment();const c=f.convert(b.children);e=b.getElementsByClassName("load-more-button")[0];e||(e=b.nextElementSibling);null!==e&&(e.classList.contains("load-more-button")||(e=e.children[0]),e&&e.classList.contains("load-more-button")||(e=null));e&&"A"!==e.tagName&&((e=e.children[0])&&"A"===
e.tagName||(e=null));if(void 0!==c[0]){for(let k=0,q=c.length;k<q;++k)h.appendChild(c[k]);g.appendChild(h);a.history&&v(c[0],l);A(c,g,a)}else e=null}null===e?(a.button.remove(),a.button=null):(g=w(e.getAttribute("href")),void 0!==a.prefetchBtn&&void 0===u[g]&&(u[g]=!0,a.prefetchBtn.setAttribute("href",g)),a.button.href=g,m.addEventListener("scroll",function(c,k){c.isWorking=null}.bind(null,a),{passive:!0,once:!0}));void 0!==m.ga&&(g=p.createElement("a"),g.href=l,ga("set","page",g.pathname),ga("send",
"pageview"));a.history&&m.history.replaceState(null,null,l);a.status.classList.remove("tf_scroll_request");return b}).catch(function(b){console.warn("InfiniteScroll error.",b)})}};f.on("tf_infinite_init",function(a,d){a instanceof jQuery&&(a=a[0]);let b=a.getElementsByClassName("load-more-button")[0];b||(b=a.nextElementSibling);if(b){var h=b;if(!b.classList.contains("load-more-button")&&(b=b.children[0],!b||!b.classList.contains("load-more-button"))||"A"!==b.tagName&&(b=b.children[0],!b||"A"!==b.tagName)||
!d.id&&(d.id=a.getAttribute("id"),d.id=d.id?"#"+d.id:"."+a.className.split(" ").join("."),!d.id))return;f.cssLazy.tf_infinite||(f.cssLazy.tf_infinite=!0,f.LoadCss(f.url+"/css/modules/infinite.css"));var l=p.createElement("div");l.className="tf_load_status tf_loader tf_clear tf_hide";a.parentNode.insertBefore(l,a.nextSibling);d.status=l;d.button=b;d.container=a;!1!==d.scrollThreshold?m.addEventListener("scroll",function(g,e){const c=p.createElement("link"),k=w(g.button.getAttribute("href"));c.setAttribute("as",
"document");c.setAttribute("rel","prefetch");c.setAttribute("href",k);g.button.parentNode.insertBefore(c,g.button.nextSibling);g.prefetchBtn=c;u[k]=!0;v(g.container.children[0],m.location.href);f.imagesLoad(null);y(g).observe(e)}.bind(null,d,h),{passive:!0,once:!0}):(v(a.children[0],m.location.href),b.style.display="inline-block",b.addEventListener("click",function(g,e){e.preventDefault();x(g)}.bind(null,d)))}})})(jQuery,Themify,window,document);
