var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,h,c){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var k=a[f];if(h.call(c,k,f,a))return{i:f,v:k}}return{i:-1,v:void 0}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,h,c){a!=Array.prototype&&a!=Object.prototype&&(a[h]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};
$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,h,c,e){if(h){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in c||(c[f]={});c=c[f]}a=a[a.length-1];e=c[a];h=h(e);h!=e&&null!=h&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:h})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var h=0;return $jscomp.iteratorPrototype(function(){return h<a.length?{done:!1,value:a[h++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,h){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,e={next:function(){if(c<a.length){var f=c++;return{value:h(f,a[f]),done:!1}}e.next=function(){return{done:!0,value:void 0}};return e.next()}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
(function(a){function h(b,d){var g=a('<div class="minicolors" />'),q=a.minicolors.defaults,l;if(!b.data("minicolors-initialized")){d=a.extend(!0,{},q,d);g.addClass("minicolors-theme-"+d.theme).toggleClass("minicolors-with-opacity",d.opacity);void 0!==d.position&&a.each(d.position.split(" "),function(){g.addClass("minicolors-position-"+this)});q="rgb"===d.format?d.opacity?"25":"20":d.keywords?"11":"7";b.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",d).prop("size",
q).wrap(g).after('<div class="minicolors-panel minicolors-slider-'+d.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>');d.inline||b.after('<span class="minicolors-swatch minicolors-sprite minicolors-input-swatch"><span class="minicolors-swatch-color"></span></span>');
b.on("focus.minicolors blur.minicolors keydown.minicolors keyup.minicolors paste.minicolors",function(d){var g=d.type;if("focus"===g)e(b);else if("blur"===g){if(d=b.data("minicolors-settings"),b.data("minicolors-initialized")){g=d.keywords?a.map(d.keywords.split(","),function(b){return a.trim(b.toLowerCase())}):[];if(""!==b.val()&&-1<a.inArray(b.val().toLowerCase(),g))var q=b.val();else g=u(b.val())?x(b.val(),!0):(g=z(b.val(),!0))?v(g):null,q=null===g?d.defaultValue:"rgb"===d.format?d.opacity?x("rgba("+
g.r+","+g.g+","+g.b+","+b.attr("data-opacity")+")"):x("rgb("+g.r+","+g.g+","+g.b+")"):C(g);g=d.opacity?b.attr("data-opacity"):1;"transparent"===q.toLowerCase()&&(g=0);b.closest(".minicolors").find(".minicolors-input-swatch > span").css("opacity",g);b.val(q);""===b.val()&&b.val(E(d.defaultValue,!0));b.val(B(b.val(),d.letterCase))}}else if("keydown"===g)switch(d.which){case 9:f();break;case 13:case 27:f(),b.blur()}else if("keyup"===g||"paste"===g)"keyup"===g?t(b,!0):setTimeout(function(){t(b,!0)},1)}).closest(".minicolors").on("mousedown.minicolors touchstart.minicolors",
".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(b){if(1===b.which){b.preventDefault();var d=a(this),g=document.body.contains(this)?document:top.document;k(d,b,!0);a(g).on("mousemove.minicolors touchmove.minicolors",function(b){k(d,b)}).one("mouseup.minicolors touchend.minicolors",function(){a(g).off("mousemove.minicolors touchmove.minicolors")})}}).on("click.minicolors",".minicolors-swatches li",function(b){b.preventDefault();var d=a(this);b=d.parents(".minicolors").find(".minicolors-input");
d=d.data("swatch-color");y(b,d,F(d));t(b)}).find(".minicolors-input-swatch").on("click mousedown.minicolors touchstart.minicolors",function(g){if("click"===g.type)d.inline||b.focus();else if(1===g.which)e(b);else return;g.preventDefault()});q=b.parent().find(".minicolors-panel");q.on("selectstart",function(){return!1}).end();if(d.swatches&&0!==d.swatches.length){q.addClass("minicolors-with-swatches");var h=a('<ul class="minicolors-swatches"></ul>').appendTo(q);for(l=0;l<d.swatches.length;++l){if("object"===
a.type(d.swatches[l])){q=d.swatches[l].name;var c=d.swatches[l].color}else q="",c=d.swatches[l];var H=c;c=u(c)?x(c,!0):v(z(c,!0));a('<li class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color" title="'+q+'"></span></li>').appendTo(h).data("swatch-color",H).find(".minicolors-swatch-color").css({backgroundColor:C(c),opacity:c.a});d.swatches[l]=c}}d.inline&&b.parent().addClass("minicolors-inline");t(b,!1);b.data("minicolors-initialized",!0)}}function c(b){var d=b.parent();b.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input");
d.before(b).remove()}function e(b){var d=b.parent(),g=d.find(".minicolors-panel"),q=b.data("minicolors-settings"),l=document.body.contains(b[0])?document:top.document;!b.data("minicolors-initialized")||b.prop("disabled")||d.hasClass("minicolors-inline")||d.hasClass("minicolors-focus")||(f(window.top.document),d.addClass("minicolors-focus"),g.animate?g.stop(!0,!0).fadeIn(q.showSpeed,function(){q.show&&q.show.call(b.get(0))}):(g.show(),q.show&&q.show.call(b.get(0))),a(l).on("mousedown.minicolors touchstart.minicolors",
function(b){1===b.which&&0===a(b.target).closest(".minicolors,.minicolors_wrapper").length&&(a(this).off("mousemove.minicolors touchmove.minicolors mousedown.minicolors touchstart.minicolors mouseup.minicolors touchend.minicolors"),f(this),l=null)}))}function f(b){a(".minicolors-focus",b).each(function(){var b=a(this),g=b.find(".minicolors-input"),q=b.find(".minicolors-panel"),l=g.data("minicolors-settings");q.animate?q.fadeOut(l.hideSpeed,function(){l.hide&&l.hide.call(g.get(0));b.removeClass("minicolors-focus")}):
(q.hide(),l.hide&&l.hide.call(g.get(0)),b.removeClass("minicolors-focus"))})}function k(b,d,g){var a=b.parents(".minicolors").find(".minicolors-input"),l=a.data("minicolors-settings"),h=b.find("[class$=-picker]"),c=b.offset().left,e=b.offset().top,m=Math.round(d.pageX-c),f=Math.round(d.pageY-e);g=g?l.animationSpeed:0;d.originalEvent.changedTouches&&(m=d.originalEvent.changedTouches[0].pageX-c,f=d.originalEvent.changedTouches[0].pageY-e);0>m&&(m=0);0>f&&(f=0);m>b.width()&&(m=b.width());f>b.height()&&
(f=b.height());b.parent().is(".minicolors-slider-wheel")&&h.parent().is(".minicolors-grid")&&(c=75-m,e=75-f,d=Math.sqrt(c*c+e*e),c=Math.atan2(e,c),0>c&&(c+=2*Math.PI),75<d&&(d=75,m=75-75*Math.cos(c),f=75-75*Math.sin(c)),m=Math.round(m),f=Math.round(f));f={top:f+"px"};b.is(".minicolors-grid")&&(f.left=m+"px");h.animate?h.stop(!0).animate(f,g,l.animationEasing,function(){p(a,b)}):(h.css(f),p(a,b))}function p(b,d){function g(b,d){if(!b.length||!d)return null;var a=b.offset().left;var g=b.offset().top;
return{x:a-d.offset().left+b.outerWidth()/2,y:g-d.offset().top+b.outerHeight()/2}}var a=b.val();var l=b.attr("data-opacity");var c=b.parent();var h=b.data("minicolors-settings");var e=c.find(".minicolors-input-swatch");var f=c.find(".minicolors-grid");var k=c.find(".minicolors-slider"),t=c.find(".minicolors-opacity-slider");var r=f.find("[class$=-picker]");var p=k.find("[class$=-picker]"),u=t.find("[class$=-picker]");r=g(r,f);p=g(p,k);u=g(u,t);if(d.is(".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider")){switch(h.control){case "wheel":a=
f.width()/2-r.x;c=f.height()/2-r.y;f=Math.sqrt(a*a+c*c);a=Math.atan2(c,a);0>a&&(a+=2*Math.PI);75<f&&(f=75,r.x=69-75*Math.cos(a),r.y=69-75*Math.sin(a));l=n(f/.75,0,100);e=n(180*a/Math.PI,0,360);r=n(100-Math.floor(p.y*(100/k.height())),0,100);a=w({h:e,s:l,b:r});k.css("backgroundColor",w({h:e,s:l,b:100}));break;case "saturation":e=n(parseInt(r.x*(360/f.width()),10),0,360);l=n(100-Math.floor(p.y*(100/k.height())),0,100);r=n(100-Math.floor(r.y*(100/f.height())),0,100);a=w({h:e,s:l,b:r});k.css("backgroundColor",
w({h:e,s:100,b:r}));c.find(".minicolors-grid-inner").css("opacity",l/100);break;case "brightness":e=n(parseInt(r.x*(360/f.width()),10),0,360);l=n(100-Math.floor(r.y*(100/f.height())),0,100);r=n(100-Math.floor(p.y*(100/k.height())),0,100);a=w({h:e,s:l,b:r});k.css("backgroundColor",w({h:e,s:l,b:100}));c.find(".minicolors-grid-inner").css("opacity",1-r/100);break;default:e=n(360-parseInt(p.y*(360/k.height()),10),0,360),l=n(Math.floor(r.x*(100/f.width())),0,100),r=n(100-Math.floor(r.y*(100/f.height())),
0,100),a=w({h:e,s:l,b:r}),f.css("backgroundColor",w({h:e,s:100,b:100}))}l=h.opacity?parseFloat(1-u.y/t.height()).toFixed(2):1;y(b,a,l)}else e.find("span").css({backgroundColor:a,opacity:l}),D(b,a,l)}function y(b,d,a){var g=b.parent(),c=b.data("minicolors-settings"),g=g.find(".minicolors-input-swatch");c.opacity&&b.attr("data-opacity",a);if("rgb"===c.format){d=u(d)?x(d,!0):v(z(d,!0));a=""===b.attr("data-opacity")?1:n(parseFloat(b.attr("data-opacity")).toFixed(2),0,1);if(isNaN(a)||!c.opacity)a=1;d=
1>=b.minicolors("rgbObject").a&&d&&c.opacity?"rgba("+d.r+", "+d.g+", "+d.b+", "+parseFloat(a)+")":"rgb("+d.r+", "+d.g+", "+d.b+")"}else u(d)&&(d=G(d)),d=B(d,c.letterCase);b.val(d);g.find("span").css({backgroundColor:d,opacity:a});D(b,d,a)}function t(b,d){var g;var c=b.parent();var e=b.data("minicolors-settings");var h=c.find(".minicolors-input-swatch");var f=c.find(".minicolors-grid"),k=c.find(".minicolors-slider");var m=c.find(".minicolors-opacity-slider");var t=f.find("[class$=-picker]"),p=k.find("[class$=-picker]"),
r=m.find("[class$=-picker]");if(u(b.val())){var y=G(b.val());(g=n(parseFloat(F(b.val())).toFixed(2),0,1))&&b.attr("data-opacity",g)}else y=B(z(b.val(),!0),e.letterCase);y||(y=B(E(e.defaultValue,!0),e.letterCase));g=I(y);var A=e.keywords?a.map(e.keywords.split(","),function(b){return a.trim(b.toLowerCase())}):[];A=""!==b.val()&&-1<a.inArray(b.val().toLowerCase(),A)?B(b.val()):u(b.val())?x(b.val()):y;d||b.val(A);if(e.opacity){var v=""===b.attr("data-opacity")?1:n(parseFloat(b.attr("data-opacity")).toFixed(2),
0,1);isNaN(v)&&(v=1);b.attr("data-opacity",v);h.find("span").css("opacity",v);m=n(m.height()-m.height()*v,0,m.height());r.css("top",m+"px")}"transparent"===b.val().toLowerCase()&&h.find("span").css("opacity",0);h.find("span").css("backgroundColor",y);switch(e.control){case "wheel":c=n(Math.ceil(.75*g.s),0,f.height()/2);h=g.h*Math.PI/180;e=n(75-Math.cos(h)*c,0,f.width());m=n(75-Math.sin(h)*c,0,f.height());t.css({top:m+"px",left:e+"px"});m=150-g.b/(100/f.height());""===y&&(m=0);p.css("top",m+"px");
k.css("backgroundColor",w({h:g.h,s:g.s,b:100}));break;case "saturation":e=n(5*g.h/12,0,150);m=n(f.height()-Math.ceil(g.b/(100/f.height())),0,f.height());t.css({top:m+"px",left:e+"px"});m=n(k.height()-g.s*(k.height()/100),0,k.height());p.css("top",m+"px");k.css("backgroundColor",w({h:g.h,s:100,b:g.b}));c.find(".minicolors-grid-inner").css("opacity",g.s/100);break;case "brightness":e=n(5*g.h/12,0,150);m=n(f.height()-Math.ceil(g.s/(100/f.height())),0,f.height());t.css({top:m+"px",left:e+"px"});m=n(k.height()-
g.b*(k.height()/100),0,k.height());p.css("top",m+"px");k.css("backgroundColor",w({h:g.h,s:g.s,b:100}));c.find(".minicolors-grid-inner").css("opacity",1-g.b/100);break;default:e=n(Math.ceil(g.s/(100/f.width())),0,f.width()),m=n(f.height()-Math.ceil(g.b/(100/f.height())),0,f.height()),t.css({top:m+"px",left:e+"px"}),m=n(k.height()-g.h/(360/k.height()),0,k.height()),p.css("top",m+"px"),f.css("backgroundColor",w({h:g.h,s:100,b:100}))}b.data("minicolors-initialized")&&D(b,A,v)}function D(b,a,g){var d=
b.data("minicolors-settings"),c=b.data("minicolors-lastChange"),e;if(!c||c.value!==a||c.opacity!==g){b.data("minicolors-lastChange",{value:a,opacity:g});if(d.swatches&&0!==d.swatches.length){c=u(a)?x(a,!0):v(a);var f=-1;for(e=0;e<d.swatches.length;++e)if(c.r===d.swatches[e].r&&c.g===d.swatches[e].g&&c.b===d.swatches[e].b&&c.a===d.swatches[e].a){f=e;break}b.parent().find(".minicolors-swatches .minicolors-swatch").removeClass("selected");-1!==f&&b.parent().find(".minicolors-swatches .minicolors-swatch").eq(e).addClass("selected")}d.change&&
(d.changeDelay?(clearTimeout(b.data("minicolors-changeTimeout")),b.data("minicolors-changeTimeout",setTimeout(function(){d.change.call(b.get(0),a,g)},d.changeDelay))):d.change.call(b.get(0),a,g));b.trigger("change").trigger("input")}}function A(b){var d=a(b).attr("data-opacity");u(a(b).val())?b=x(a(b).val(),!0):(b=z(a(b).val(),!0),b=v(b));if(!b)return null;void 0!==d&&a.extend(b,{a:parseFloat(d)});return b}function J(b,d){var g=a(b).attr("data-opacity");if(u(a(b).val()))var c=x(a(b).val(),!0);else c=
z(a(b).val(),!0),c=v(c);if(!c)return null;void 0===g&&(g=1);return d?"rgba("+c.r+", "+c.g+", "+c.b+", "+parseFloat(g)+")":"rgb("+c.r+", "+c.g+", "+c.b+")"}function B(b,a){return"uppercase"===a?b.toUpperCase():b.toLowerCase()}function z(b,a){b=b.replace(/^#/g,"");if(!b.match(/^[A-F0-9]{3,6}/ig)||3!==b.length&&6!==b.length)return"";3===b.length&&a&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]);return"#"+b}function x(b,a){var d=b.replace(/[^\d,.]/g,"").split(",");d[0]=n(parseInt(d[0],10),0,255);d[1]=n(parseInt(d[1],
10),0,255);d[2]=n(parseInt(d[2],10),0,255);void 0!==d[3]&&(d[3]=n(parseFloat(d[3],10),0,1));return a?void 0!==d[3]?{r:d[0],g:d[1],b:d[2],a:d[3]}:{r:d[0],g:d[1],b:d[2]}:"undefined"!==typeof d[3]&&1>=d[3]?"rgba("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")":"rgb("+d[0]+", "+d[1]+", "+d[2]+")"}function E(b,d){return u(b)?x(b):z(b,d)}function n(b,d,a){b<d&&(b=d);b>a&&(b=a);return b}function u(b){return(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===b.length?!0:!1}function F(b){return(b=
b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+(\.\d{1,2})?|\.\d{1,2})[\s+]?/i))&&6===b.length?b[4]:"1"}function G(b){return(b=b.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===b.length?"#"+("0"+parseInt(b[1],10).toString(16)).slice(-2)+("0"+parseInt(b[2],10).toString(16)).slice(-2)+("0"+parseInt(b[3],10).toString(16)).slice(-2):""}function C(b){var d=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];a.each(d,function(b,
a){1===a.length&&(d[b]="0"+a)});return"#"+d.join("")}function w(b){var d=C,a,c;var e=Math.round(b.h);var f=Math.round(255*b.s/100);b=Math.round(255*b.b/100);if(0===f)e=a=c=b;else{var f=(255-f)*b/255,h=e%60*(b-f)/60;360===e&&(e=0);60>e?(e=b,c=f,a=f+h):120>e?(a=b,c=f,e=b-h):180>e?(a=b,e=f,c=f+h):240>e?(c=b,e=f,a=b-h):300>e?(c=b,a=f,e=f+h):360>e?(e=b,a=f,c=b-h):c=a=e=0}return d({r:Math.round(e),g:Math.round(a),b:Math.round(c)})}function I(b){b=v(b);var a={h:0,s:0,b:0},c=Math.max(b.r,b.g,b.b),e=c-Math.min(b.r,
b.g,b.b);a.b=c;a.s=0!==c?255*e/c:0;a.h=0!==a.s?b.r===c?(b.g-b.b)/e:b.g===c?2+(b.b-b.r)/e:4+(b.r-b.g)/e:-1;a.h*=60;0>a.h&&(a.h+=360);a.s*=100/255;a.b*=100/255;0===a.s&&(a.h=360);return a}function v(b){b=parseInt(-1<b.indexOf("#")?b.substring(1):b,16);return{r:b>>16,g:(b&65280)>>8,b:b&255}}a.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",defaultValue:"",format:"hex",hide:null,hideSpeed:100,inline:!1,keywords:"",letterCase:"lowercase",opacity:!1,
position:"bottom",show:null,showSpeed:100,theme:"default",swatches:[]}};a.extend(a.fn,{minicolors:function(b,d){switch(b){case "destroy":return a(this).each(function(){c(a(this))}),a(this);case "hide":return f(),a(this);case "opacity":if(void 0===d)return a(this).attr("data-opacity");a(this).each(function(){t(a(this).attr("data-opacity",d))});return a(this);case "rgbObject":return A(a(this),"rgbaObject"===b);case "rgbString":case "rgbaString":return J(a(this),"rgbaString"===b);case "settings":if(void 0===
d)return a(this).data("minicolors-settings");a(this).each(function(){var b=a(this).data("minicolors-settings")||{};c(a(this));a(this).minicolors(a.extend(!0,b,d))});return a(this);case "show":return e(a(this).eq(0)),a(this);case "value":if(void 0===d)return a(this).val();a(this).each(function(){"object"===typeof d&&null!==d?(void 0!==d.opacity&&a(this).attr("data-opacity",n(d.opacity,0,1)),d.color&&a(this).val(d.color)):a(this).val(d);t(a(this))});return a(this);default:return"create"!==b&&(d=b),
a(this).each(function(){h(a(this),d)}),a(this)}}})})(jQuery);
(function(a){window.themifyColorManager={colorSwatches:{},initilized:!1,init:function(){if(!this.initilized){for(var a=Object.keys(themifyCM.colors),c=a.length,e=0;e<c;e++)this.colorSwatches[a[e]]=themifyCM.colors[a[e]];this.initilized=!0}},toRgba:function(a){return a.color.replace("rgb","rgba").replace(")",","+a.opacity+")")},toColorsArray:function(){for(var a=[],c=Object.keys(this.colorSwatches),e=c.length-1;0<=e;--e)a.push(this.toRgba(this.colorSwatches[c[e]]));a.length||(a=["#FFF"]);return a},
initColorPicker:function(){var a=window.top.document.querySelector(".minicolors-focus .minicolors-panel");if(null===a.querySelector(".tb_swatches_container")){var c=document.createElement("div");c.className="tb_swatches_container";c.addEventListener("click",this.initClick.bind(this));c.appendChild(a.querySelector(".minicolors-swatches"));for(var e=c.querySelectorAll(".minicolors-swatch"),f=Object.keys(this.colorSwatches),f=f.reverse(),k=e.length-1;-1<k;--k){if(!f.length){e[k].parentNode.removeChild(e[k]);
break}var p=document.createElement("span");p.className="tb_delete_swatch ti-close";e[k].appendChild(p);p="undefined"!==typeof this.colorSwatches[f[k]].uid?this.colorSwatches[f[k]].uid:this.UID()+k;e[k].dataset.uid=this.colorSwatches[f[k]].uid=p}e=document.createElement("div");f=document.createElement("div");e.className="tb_add_swatch ti-plus";c.appendChild(e);f.className="tb_cm_dropdown_icon ti-import";f.setAttribute("tabIndex","-1");f.appendChild(this.makeImportExportDropdown());c.appendChild(f);
a.appendChild(c);"undefined"!==typeof SimpleBar&&new SimpleBar(a.querySelector(".minicolors-swatches"))}},makeImportExportDropdown:function(){var a=document.createElement("div"),c=document.createElement("ul"),e=document.createElement("li"),f=document.createElement("li");a.className="tb_cm_dropdown";e.className="tb_cm_import";e.innerText=themifyCM.labels["import"];c.appendChild(e);f.className="tb_cm_export";f.innerText=themifyCM.labels["export"];c.appendChild(f);a.appendChild(c);return a},UID:function(){return(Math.random().toString(36).substring(2)+
(new Date).getTime().toString(36)).substring(0,5)},initClick:function(a){a.preventDefault();var c=a.target,e=c.classList;e.contains("tb_delete_swatch")?this.deleteSwatch(a):e.contains("tb_add_swatch")?this.addSwatch():e.contains("tb_cm_export")?(c.parentNode.parentNode.parentNode.blur(),document.location.assign(themifyCM.exportColorsURL)):e.contains("tb_cm_import")&&(c.parentNode.parentNode.parentNode.blur(),this.importColors("colors"))},importColors:function(h){var c=window.top.document.getElementsByClassName("themify_cm_input");
c.length?(c=c[0],c.dataset.type=h):(c=document.createElement("input"),c.type="file",c.dataset.type=h,c.className="themify_cm_input",c.addEventListener("change",function(c){var e=c.target.files[0],h=new FormData,p=c.target.dataset.type;h.append("file",e,e.name);h.append("action","themify_import_colors");h.append("tb_load_nonce",themifyCM.nonce);h.append("type",p);a.ajax({url:themifyCM.ajax_url,type:"POST",data:h,cache:!1,dataType:"json",processData:!1,contentType:!1,success:function(a){if("SUCCESS"===
a.status)if("colors"===p){themifyColorManager.colorSwatches=a.colors;var c=window.top.document.querySelectorAll(".tb_swatches_container .minicolors-swatch");for(var e=c.length-1;0<=e;--e)c[e].parentNode.removeChild(c[e]);c=Object.keys(themifyColorManager.colorSwatches);var f=c.length;for(e=0;e<f;e++)themifyColorManager.addSwatchHtml(themifyColorManager.colorSwatches[c[e]].color,themifyColorManager.colorSwatches[c[e]].opacity,c[e])}else if("gradients"===p){var h=ThemifyBuilderCommon.Lightbox.$lightbox.find(".tb_gradient_container").first().data("themifyGradient");
f=Object.keys(themifyCM.gradients);for(e=f.length-1;0<=e;--e)h.removeSwatch(f[e]);themifyCM.gradients=a.colors;c=Object.keys(themifyCM.gradients);f=c.length;for(e=0;e<f;e++)h.addSwatch(themifyCM.gradients[c[e]])}alert(a.msg)}})}));c.click()},deleteSwatch:function(a){a.preventDefault();a.stopPropagation();a=a.target.parentNode.dataset.uid;for(var c=window.top.document.querySelectorAll('[data-uid="'+a+'"]'),e=c.length-1;0<=e;--e)c[e].parentNode.removeChild(c[e]);delete this.colorSwatches[a];this.updateColorSwatches("colors")},
updateColorSwatches:function(h){a.ajax({type:"POST",url:themifyCM.ajax_url,dataType:"json",data:{action:"themify_save_colors",type:h,tb_load_nonce:themifyCM.nonce,colors:"colors"===h?this.colorSwatches:themifyCM.gradients}})},addSwatch:function(){var a=window.top.document.querySelector(".minicolors-focus .minicolors-input"),c=this.hex2Rgb(a.value),a=a.dataset.opacity,e=!1;if(null===c)return!1;for(var f=Object.keys(this.colorSwatches),k=f.length-1;0<=k;--k)if(this.colorSwatches[f[k]].color.replace(/\s/g,
"")===c&&parseFloat(this.colorSwatches[f[k]].opacity)===parseFloat(a)){e=!0;break}e||(e=this.UID(),this.addSwatchHtml(c,a,e),this.colorSwatches[e]={color:c,opacity:a,uid:e},this.updateColorSwatches("colors"))},addSwatchHtml:function(a,c,e){function f(e){var f=document.createElement("li"),h=document.createElement("span");f.className="minicolors-swatch minicolors-sprite";f.dataset.uid=e;f.dataset.swatchColor=a.replace(")",", "+c+")").replace("rgb","rgba");h.className="minicolors-swatch-color";h.style.backgroundColor=
a;h.style.opacity=c;f.appendChild(h);e=document.createElement("span");e.className="tb_delete_swatch ti-close";f.appendChild(e);return f}for(var h=window.top.document.querySelectorAll(".tb_swatches_container .minicolors-swatches .simplebar-content"),h=0===h.length?window.top.document.querySelectorAll(".tb_swatches_container .minicolors-swatches"):h,p=h.length-1;0<=p;--p)h[p].insertBefore(f(e),h[p].firstChild);h=null},hex2Rgb:function(a){return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?
"rgb("+parseInt(a[1],16)+","+parseInt(a[2],16)+","+parseInt(a[3],16)+")":null}};window.themifyColorManager.init()})(jQuery,window,document);
