var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(p,v,r){p!=Array.prototype&&p!=Object.prototype&&(p[v]=r.value)};$jscomp.getGlobal=function(p){return"undefined"!=typeof window&&window===p?p:"undefined"!=typeof global&&null!=global?global:p};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(p){return $jscomp.SYMBOL_PREFIX+(p||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var p=$jscomp.global.Symbol.iterator;p||(p=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[p]&&$jscomp.defineProperty(Array.prototype,p,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(p){var v=0;return $jscomp.iteratorPrototype(function(){return v<p.length?{done:!1,value:p[v++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(p){$jscomp.initSymbolIterator();p={next:p};p[$jscomp.global.Symbol.iterator]=function(){return this};return p};$jscomp.iteratorFromArray=function(p,v){$jscomp.initSymbolIterator();p instanceof String&&(p+="");var r=0,h={next:function(){if(r<p.length){var l=r++;return{value:v(l,p[l]),done:!1}}h.next=function(){return{done:!0,value:void 0}};return h.next()}};h[Symbol.iterator]=function(){return h};return h};
$jscomp.polyfill=function(p,v,r,h){if(v){r=$jscomp.global;p=p.split(".");for(h=0;h<p.length-1;h++){var l=p[h];l in r||(r[l]={});r=r[l]}p=p[p.length-1];h=r[p];v=v(h);v!=h&&null!=v&&$jscomp.defineProperty(r,p,{configurable:!0,writable:!0,value:v})}};$jscomp.polyfill("Array.prototype.keys",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(p){return p})}},"es6-impl","es3");
$jscomp.findInternal=function(p,v,r){p instanceof String&&(p=String(p));for(var h=p.length,l=0;l<h;l++){var n=p[l];if(v.call(r,n,l,p))return{i:l,v:n}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(p){return p?p:function(p,r){return $jscomp.findInternal(this,p,r).v}},"es6-impl","es3");$jscomp.polyfill("Array.prototype.values",function(p){return p?p:function(){return $jscomp.iteratorFromArray(this,function(p,r){return r})}},"es6","es3");
$jscomp.checkStringArgs=function(p,v,r){if(null==p)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(v instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return p+""};
$jscomp.polyfill("String.prototype.repeat",function(p){return p?p:function(p){var r=$jscomp.checkStringArgs(this,null,"repeat");if(0>p||1342177279<p)throw new RangeError("Invalid count value");p|=0;for(var h="";p;)if(p&1&&(h+=r),p>>>=1)r+=r;return h}},"es6-impl","es3");var ThemifyConstructor;
(function(p,v,r,h,l){var n={ActionBar:{}},A="undefined"!==typeof ThemifyBuilderCommon?ThemifyBuilderCommon:{};ThemifyConstructor={data:null,key:"tb_form_templates_",styles:null,settings:null,editors:null,afterRun:[],radioChange:[],bindings:[],stylesData:null,values:{},clicked:null,type:null,"static":null,label:null,is_repeat:null,is_sort:null,is_new:null,is_ajax:null,breakpointsReverse:null,set:function(a){try{var b="",c;for(c in themifyBuilder.modules)b+=c;var d={val:a,ver:tbLocalScript.version,
h:v.hash(b)};localStorage.setItem(this.key,JSON.stringify(d));return!0}catch(f){return!1}},get:function(){if(themifyBuilder.debug)return!1;try{localStorage.removeItem("tb_form_templates");var a=localStorage.getItem(this.key),b="";if(!a)return!1;var a=JSON.parse(a),c;for(c in themifyBuilder.modules)b+=c;return a.ver.toString()!==tbLocalScript.version.toString()||a.h!==v.hash(b)?!1:a.val}catch(d){}return!1},getForms:function(a){if("undefined"!==typeof tb_app){if(tb_app.Constructor!==l){for(var b in tb_app.Constructor)ThemifyConstructor[b]=
tb_app.Constructor[b];delete tb_app.Constructor}A=ThemifyBuilderCommon;n=tb_app}this.breakpointsReverse=Object.keys(themifyBuilder.breakpoints).reverse();this.breakpointsReverse.push("desktop");var c=this;b=c.get();var d=function(b){A.Lightbox.setup();A.LiteLightbox.modal.on("attach",function(){this.el.classList.add("tb_lite_lightbox_modal")});c.data=b;"visual"===n.mode&&(n.EdgeDrag.modules=JSON.parse(localStorage.getItem("tb_dragger")));a&&a()};!1!==b?d(b):p.ajax({type:"POST",url:themifyBuilder.ajaxurl,
dataType:"json",data:{action:"tb_load_form_templates",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){a&&(localStorage.setItem("tb_dragger",JSON.stringify(a.d)),d(a.v),c.set(a.v))}});c["static"]=themifyBuilder.i18n.options;themifyBuilder.i18n.options=null;this.label=themifyBuilder.i18n.label;themifyBuilder.i18n.label=null;var f=c["static"].fonts.safe;b=0;for(var e=f.length;b<e;++b)""!==f[b].value&&"default"!==f[b].value&&(c.font_select.safe[f[b].value]=f[b].name);c["static"].fonts.safe=
null;f=c["static"].fonts.google;b=0;for(e=f.length;b<e;++b)""!==f[b].value&&"default"!==f[b].value&&(c.font_select.google[f[b].value]={n:f[b].name,v:f[b].variant});c["static"].fonts.google=f=themifyBuilder.google=null;f=c["static"].fonts.cf;b=0;for(e=f.length;b<e;++b)""!==f[b].value&&"default"!==f[b].value&&(c.font_select.cf[f[b].value]={n:f[b].name,v:f[b].variant});c["static"].fonts.cf=f=themifyBuilder.cf=null},getOptions:function(a){if(a.options!==l)return a.options;for(var b in this["static"])if(!0===
a[b])return this["static"][b];return!1},getTitle:function(a){return"custom_css"===a.type?this.label.custom_css:"title"===a.type?this.label.m_t:a.label!==l?this.label[a.label]!==l?this.label[a.label]:a.label:!1},getSwitcher:function(){var a=h.createDocumentFragment(),b=h.createElement("ul"),c=this.breakpointsReverse,d=this;b.className="tb_lightbox_switcher clearfix";for(var f=c.length-1;-1<f;--f){var e=c[f],g=h.createElement("li"),k=h.createElement("a"),l=h.createElement("i");k.href="#"+e;k.className=
"tab_"+e;k.title="tablet_landscape"===e?this.label.table_landscape:e.charAt(0).toUpperCase()+e.substr(1);l.className="ti-"+e;"tablet_landscape"===e&&(l.className+=" ti-tablet");k.appendChild(l);g.appendChild(k);a.appendChild(g)}b.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();a.target!==b&&(a=a.target.closest("a"),null!==a&&d.lightboxSwitch(a.getAttribute("href")))});b.appendChild(a);return b},lightboxSwitch:function(a){a=a.replace("#","");a!==n.activeBreakPoint&&
(n.activeModel&&"visual"===n.mode&&(n.scrollTo=n.liveStylingInstance.$liveStyledElmt),p(".tb_breakpoint_switcher.breakpoint-"+a,r.document).trigger("click"))},binding:function(a,b,c,d){var f=!1,e=b.binding,g="desktop"!==n.activeBreakPoint;b=b.type;"select"===b&&0==c&&(c="");c||e.empty===l?c&&e[c]!==l?f="radio"===b||"icon_radio"===b?!0===a.checked?e[c]:!1:e[c]:c&&e.not_empty!==l?f=e.not_empty:e.select!==l&&c!==e.select.value?f=e.select:e.checked!==l&&!0===a.checked?f=e.checked:e.not_checked!==l&&!1===
a.checked&&(f=e.not_checked):f=e.empty;if(f){c=[];f.show!==l&&(c=f.show);f.hide!==l&&(c=c.concat(f.hide));if(d===l||null===d||0===d.length)d=a.closest(".tb_tab"),null===d&&(d=a.closest(".tb_expanded_opttions"),null===d&&(d=r.document.getElementById("tb_lightbox_container")));var k=f.hide!==l,h=f.show!==l;var m=function(a,b){for(var c,d=Object.keys(a),e=d.length,f=0;f<e;f++){if(l!==a[d[f]].id&&a[d[f]].id===b){c=a[d[f]];break}if(a[d[f]]&&"object"===typeof a[d[f]]&&(c=m(a[d[f]],b),c!==l))break}return c};
var q=this,w=function(a,b,c){var d=a.dataset.type;if("radio"===d){var e=a.querySelector("input:checked");null===e&&(e=a.getElementsByTagName("INPUT")[0])}else"checkbox"===d||"toggle_switch"===d?e=a.getElementsByTagName("INPUT")[0]:"select"===d&&(e=a.getElementsByTagName("SELECT")[0]);l!==e&&q.binding(e,b,e.value,c)},x=[];a=0;for(var p=c.length;a<p;++a){if(!0===k&&f.hide[a]!==l){for(var u=d.querySelectorAll("."+f.hide[a]),e=u.length-1;-1<e;--e)u[e].classList.add("_tb_hide_binding"),"object"===typeof this.data&&
null!==this.type&&"object"===typeof this.data[this.type]&&(b=m(this.data[this.type][this.clicked],c[a]),"object"===typeof b&&"object"===typeof b.binding&&x.push({el:u[e],data:b}));u=null}if(!0===h&&f.show[a]!==l){u=d.querySelectorAll("."+f.show[a]);for(e=u.length-1;-1<e;--e)u[e].classList.remove("_tb_hide_binding"),"object"===typeof this.data&&null!==this.type&&"object"===typeof this.data[this.type]&&(b=m(this.data[this.type][this.clicked],c[a]),"object"===typeof b&&"object"===typeof b.binding&&x.push({el:u[e],
data:b}));u=null}}for(a=x.length-1;0<=a;--a)w(x[a].el,x[a].data,d);x=null;if(f.responsive!==l&&f.responsive.disabled!==l)for(a=f.responsive.disabled.length-1;-1<a;--a)if(f.responsive.disabled[a]!==l)for(c=d.querySelectorAll("."+f.responsive.disabled[a]),e=c.length-1;-1<e;--e)!0===g?c[a].classList.add("responsive_disable"):c[a].classList.remove("responsive_disable")}},control:{init:function(a,b,c){c.name=b;this[b].call(this,a,c)},preview:function(a,b,c){if("visual"===n.mode){var d=null,f=ThemifyConstructor,
e=null;!0===c.repeat&&(e=a.closest(".tb_toggleable_fields"),null===e&&(e=a.closest(".tb_sort_fields_parent"),null===e&&(e=a.closest(".tb_row_js_wrapper"))));if(c.selector!==l&&b)if(d=n.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(c.selector),0===d.length)d=null;else if(null!==e){var g=a.closest(".tb_repeatable_field"),k=Array.prototype.slice.call(e.children);c.rep!==l?(d=n.liveStylingInstance.$liveStyledElmt[0].querySelectorAll(c.rep),d=d[k.indexOf(g)],d!==l?(d=d.querySelectorAll(c.selector),
0===d.length&&(d=null)):d=null):d=d.length===k.length-1?d[k.indexOf(g)]:null}null!==e?f.settings[e.id]=n.Utils.clear(n.Forms.parseSettings(e).v):f.settings[c.id]=b;"refresh"===c.type||!0===f.is_ajax?n.activeModel.trigger("custom:preview:refresh",f.settings,d,b):n.activeModel.trigger("custom:preview:live",f.settings,"wp_editor"===c.name||"TEXTAREA"===a.tagName,null,d,b)}else n.activeModel.backendLivePreview();n.hasChanged=!0},change:function(a,b){var c=this,d="refresh"===b.type&&b.selector===l?1E3:
50;if(b.event===l){var f="change";d=1}else f=b.event;a.addEventListener(f,_.throttle(function(a){c.preview(a.target,a.target.value,b)},d),{passive:!0})},wp_editor:function(a,b){var c=this,d=p(a),f=a.id,e=!1,g=!1,k=_.throttle(function(f){f="setupeditor"===this.type?this.getContent():this.value;null!==n.activeModel&&e!==f&&(e=f,!1!==g?(a.value=f,d.trigger("change")):c.preview(a,f,b))},"refresh"===b.type&&b.selector===l?1E3:50);n.Utils.initQuickTags(f);tinyMCE!==l&&(tinymce.editors[f]!==l&&tinyMCE.execCommand("mceRemoveEditor",
!0,f),f=n.Utils.initNewEditor(f),g=a.classList.contains("wp-editor-area")?0<d.closest("#instance_widget").length:!1,!f.type&&(f.type="setupeditor"),f.on("change keyup",k));d.on("change keyup",k)},layout:function(a,b){if("visual"===n.mode){var c=this;a.addEventListener("change",function(a){a=a.detail.val;if(b.classSelector!==l){var d=b.id,e=ThemifyConstructor.settings[d],g=""!==b.classSelector?n.liveStylingInstance.$liveStyledElmt.find(b.classSelector).first():n.liveStylingInstance.$liveStyledElmt;
ThemifyConstructor.settings[d]=a;0<g.length?(g.removeClass(e).addClass(a),n.Utils.loadContentJs(n.liveStylingInstance.$liveStyledElmt,"module")):c.preview(this,a,b)}else c.preview(this,a,b)},{passive:!0})}},icon:function(a,b){var c=this;a.addEventListener("change",function(a){var d=a.target.value,e=this.closest(".tb_input").getElementsByClassName("themify_fa_toggle")[0];if(e!==l){e.className="tb_plus_btn themify_fa_toggle icon-close";var g=n.Utils.getIcon(d);!1===g&&(g="default_icon");e.className+=
" "+g}c.preview(a.target,d,b)},{passive:!0})},checkbox:function(a,b){if("visual"===n.mode){var c=this;a.addEventListener("change",function(){for(var a=[],f=this.closest(".themify-checkbox").getElementsByClassName("tb-checkbox"),e=0,g=f.length;e<g;++e)f[e].checked&&a.push(f[e].value);c.preview(this,a.join("|"),b)},{passive:!0})}},color:function(a,b){if("visual"===n.mode){var c=this;a.addEventListener("themify_builder_color_picker_change",function(a){c.preview(this,a.detail.val,b)},{passive:!0})}},
widget_select:function(a,b){this.preview(a,a.find(":input").themifySerializeObject(),b)},queryPosts:function(a,b){if("visual"===n.mode){var c=this;a.addEventListener("queryPosts",function(a){b.id=this.id;ThemifyConstructor.settings=n.Utils.clear(n.Forms.serialize("tb_options_setting"));c.preview(this,ThemifyConstructor.settings[b.id],b)},{passive:!0})}}},initControl:function(a,b){if(null!==n.activeModel){if("setting"===this.clicked&&"custom_css"!==b.type){if(!1!==b.control&&"module"===this.component){var c=
b.control||{},d=b.type;!0===c.repeat?c.id=a.getAttribute("data-input-id"):!0===this.is_repeat?(c.repeat=!0,c.id=a.getAttribute("data-input-id")):c.id=b.id;if(c.control_type===l){if(d===l||"text"===d||"number"===d||"url"===d||"autocomplete"===d||"range"===d||"radio"===d||"icon_radio"===d||"select"===d||"gallery"===d||"textarea"===d||"image"===d||"date"===d||"audio"===d||"video"===d||"select_menu"===d||"widgetized_select"===d||"layoutPart"===d||"selectSearch"===d||"hidden"===d||"toggle_switch"===d)c.event!==
l||"text"!==d&&"textarea"!==d||(c.event="keyup"),d="change"}else d=c.control_type;this.control.init(a,d,c)}}else"visual"===n.mode&&"styling"===this.clicked&&n.liveStylingInstance.bindEvents(a,b);if(b.binding!==l){var f=this,e=!0===f.is_repeat,g=function(c,d){if(e){var g=a.closest(".tb_sort_field_dropdown");null===g&&(g=a.closest(".tb_toggleable_fields_options"),null===g&&(g=a.closest(".tb_repeatable_field_content")))}f.binding(c,b,d,g)};"layout"===b.type?a.addEventListener("click",function(a){a=a.target.closest(".tfl-icon");
null!==a&&g(this,a.id)},{passive:!0}):a.addEventListener("change",function(a){g(this,this.value)},{passive:!0});this.bindings.push({el:a,data:b,repeat:e})}}return a},callbacks:function(){var a=this.afterRun.length;if(0<a){for(var b=0;b<a;++b)this.afterRun[b].call();this.afterRun=[]}a=this.radioChange.length;if(0<a){for(b=0;b<a;++b)this.radioChange[b].call();this.radioChange=[]}a=this.bindings.length;if(0<a){for(b=a-1;-1<b;--b){var a=this.bindings[b].el,c=!0===this.bindings[b].repeat?a.closest(".tb_repeatable_field_content"):
l,d="layout"===this.bindings[b].data.type?a.getElementsByClassName("selected")[0].id:a.value;!0===this.bindings[b].repeat&&(c=a.closest(".tb_sort_field_dropdown"),null===c&&(c=a.closest(".tb_toggleable_fields_options"),null===c&&(c=a.closest(".tb_repeatable_field_content"))));this.binding(a,this.bindings[b].data,d,c)}this.bindings=[]}},setUpEditors:function(){for(var a=this.editors.length-1;-1<a;--a)this.initControl(this.editors[a].el,this.editors[a].data);this.editors=[]},switchTabs:function(a){"A"===
this.nodeName&&a.preventDefault();a.stopPropagation();a=this.getAttribute("href");var b=this.parentNode,c=r.document.getElementById(a.replace("#",""));if(null!==c&&!b.classList.contains("current")){for(var d=b.parentNode,f=d.children,e=c.parentNode.children,g=f.length-1;-1<g;--g)f[g].classList.remove("current");b.classList.add("current");for(g=e.length-1;-1<g;--g)e[g].classList.contains("tb_tab")&&(e[g].style.display="none");c.style.display="block";v.body.triggerHandler("themify_builder_tabsactive",
[a,c]);v.triggerEvent(c,"themify_builder_tabsactive",{id:a});n.Utils.hideOnClick(d);"visual"===n.mode&&p(h).triggerHandler("mouseup")}},run:function(a,b){this.styles={};this.settings={};this.editors=[];this.afterRun=[];this.radioChange=[];this.bindings=[];this.stylesData={};this.component=this.is_sort=this.is_repeat=null;this.type=a;this.is_ajax=this.is_new=null;var c=!1,d=!1,f=n.activeModel;if(null!==f){this.component=f.get("elType");c=h.getElementsByClassName("tb_element_cid_"+f.cid)[0];if("module"===
this.component){this.is_ajax="ajax"===themifyBuilder.modules[a].type;var e="mod_settings";f.get("is_new")!==l&&(this.is_new=!0,c=c.closest(".module_row"))}else e="styling";this.values=p.extend(!0,{},f.get(e));n.GS.isEmpty(f.attributes.gs)&&(n.beforeEvent=A.clone(c));d=f.get("visibileClicked")!==l;c=!1===d&&("column"===this.component||"subrow"===this.component||f.get("styleClicked")!==l);var g=this.data[a]}else this.values={},this.component=null,g=a;var k=h.createDocumentFragment(),t=h.createDocumentFragment(),
m=this,q=function(a,b){var c=h.createElement("div"),d=h.createDocumentFragment();c.className="tb_options_tab_content";if("visibility"===a||"animation"===a)b=m["static"][a];else if("styling"===a){var e=h.createElement("div"),g=n.GS.globalStylesHTML();e.className="tb_styling_tab_header";e.appendChild(m.getSwitcher());g&&(e.appendChild(g),n.GS.isEmpty(ThemifyConstructor.getStyleVal("global_styles"))||c.appendChild(n.GS.stylingOverlay()));d.appendChild(e);e=null}c.appendChild(m.create(b));d.appendChild(c);
"styling"===a&&(c=h.createElement("a"),e=h.createElement("i"),c.href="#",c.className="reset-styling",e.className="ti-close",c.appendChild(e),c.appendChild(h.createTextNode(m.label.reset_style)),c.addEventListener("click",m.resetStyling.bind(m)),d.appendChild(c),"visual"===n.mode&&f&&setTimeout(function(){n.liveStylingInstance.module_rules=m.styles},600));"animation"===a&&(c=h.createElement("a"),c.href="#",c.className="tb_motion_reset_link",c.appendChild(h.createTextNode(m.label.reset_effect)),c.addEventListener("click",
m.resetEffect.bind(m)),d.appendChild(c));return d};this.clicked=null;for(var w in g){e=h.createElement("li");var x=h.createElement("a"),D=h.createElement("span"),u=h.createElement("div"),r=null===n.activeModel||n.GS.isEmpty(n.activeModel.attributes.gs)?g[w].name!==l?g[w].name:this.label[w]:themifyBuilder.i18n.g_s,z="tb_options_"+w;x.href="#"+z;x.textContent=r;"setting"!==w&&(x.className="tb_tooltip",D.textContent=r,x.appendChild(D));u.id=z;u.className="tb_tab tb_options_tab_wrapper";if(c&&"styling"===
w||d&&"visibility"===w||!c&&!d&&"setting"===w||null===this.component)e.className="current",m.clicked=w,g[w].html!==l?u.appendChild(g[w].html):u.appendChild(q(w,g[w].options)),u.style.display="block",new SimpleBar(u),u.dataset.done=!0;u.addEventListener("themify_builder_tabsactive",function(a){a=a.detail.id.replace("#tb_options_","");m.clicked=a;this.dataset.done===l&&(this.dataset.done=!0,this.appendChild(q(a,g[a].options)),m.callbacks(),new SimpleBar(this),"setting"===a&&m.setUpEditors())},{passive:!0});
x.addEventListener("click",this.switchTabs);t.appendChild(u);e.appendChild(x);k.appendChild(e)}w=A.Lightbox.$lightbox[0].getElementsByClassName("tb_options_tab")[0];for(x=A.Lightbox.$lightbox[0].getElementsByClassName("tb_lightbox_actions_wrap")[0];w.firstChild;)w.removeChild(w.firstChild);for(;x.firstChild;)x.removeChild(x.firstChild);w.appendChild(k);if(b!==l||f){var y=h.createElement("button");y.className="builder_button builder_save_button";y.title=b!==l&&b.ctr_save!==l?this.label[b.ctr_save]:
this.label.ctr_save;null===n.activeModel||n.GS.isEmpty(n.activeModel.attributes.gs)?y.textContent=b!==l&&b.done!==l?this.label[b.done]:this.label.done:(n.GS.modulePanel(!0),y.textContent=this.label.s_s);if(f){n.autoSaveCid=f.cid;if("visual"===n.mode){n.liveStylingInstance.init();var C=n.liveStylingInstance.$liveStyledElmt[0].outerHTML}var E=function(a){a.preventDefault();a.stopImmediatePropagation();m.saveComponent(!1)&&(y.removeEventListener("click",E,{once:!1}),F.removeEventListener("click",E,{once:!0}))};
var F=h.createElement("a");e=h.createElement("li");k=h.createElement("span");e.className="tb_top_save_btn";F.className="ti-check tb_tooltip";k.textContent=this.label.done;F.appendChild(k);e.appendChild(F);w.appendChild(e);y.addEventListener("click",E,{once:!1});F.addEventListener("click",E,{once:!0})}x.appendChild(y)}v.body.one("themify_builder_lightbox_close",function(){m.radioChange=m.bindings=m.stylesData=m.is_ajax=m.is_repeat=m.is_sort=m.afterRun=m.editors=m.clicked=m.settings=m.styles=null;if(f){"function"===
typeof E&&y.removeEventListener("click",E,{once:!0});if(m.is_new&&"module"===n.activeModel.get("elType")){var a="visual"===n.mode?n.liveStylingInstance.$liveStyledElmt:v.body.find(".tb_element_cid_"+n.activeModel.cid);var b=a.closest(".module_row.tb_new_row")}!0!==n.saving&&C!==l&&n.hasChanged&&(a=n.Models.Registry.lookup(f.cid))&&a.trigger("custom:restorehtml",C);m.is_new?(f.unset("is_new",{silent:!0}),!0!==n.saving?(f.trigger("dom:module:unsaved"),l!==b&&0<b.length&&(a=n.Models.Registry.lookup(b.data("cid")))&&
a.destroy()):0<b.length&&b[0].classList.remove("tb_new_row")):(f.unset("styleClicked",{silent:!0}),f.unset("visibileClicked",{silent:!0}));if(tinyMCE!==l)for(a=tinymce.editors.length-1;-1<a;--a)"content"!==tinymce.editors[a].id&&tinyMCE.execCommand("mceRemoveEditor",!0,tinymce.editors[a].id);"visual"===n.mode&&n.liveStylingInstance.clear();n.GS.isEmpty(f.attributes.gs)||f.destroy();n.activeModel=f=null}v.body.off("themify_builder_change_mode.updatestyles");C=m.values=m.type=m.component=m.is_new=null;
m.tabs.click=0;n.GS.reopenPreviousPanel()}).on("themify_builder_change_mode.updatestyles",this.updateStyles.bind(this));setTimeout(function(){"setting"===m.clicked&&m.setUpEditors();m.callbacks();v.triggerEvent(h,"tb_editing_"+m.type);"module"===m.component&&v.triggerEvent(h,"tb_editing_module")},5);c?f.unset("styleClicked",{silent:!0}):d&&f.unset("visibileClicked",{silent:!0});return t},getStyleVal:function(a,b){if(null!==n.activeModel){b===l&&(b=n.activeBreakPoint);if("styling"!==this.clicked||
"desktop"===b)return""!==this.values[a]?this.values[a]:l;for(var c=this.breakpointsReverse,d=c.indexOf(b),f=c.length;d<f;++d)if("desktop"!==c[d]){if(this.values["breakpoint_"+c[d]]!==l&&this.values["breakpoint_"+c[d]][a]!==l&&""!==this.values["breakpoint_"+c[d]][a])return this.values["breakpoint_"+c[d]][a]}else if(""!==this.values[a])return this.values[a]}return l},updateStyles:function(a,b,c){this.setStylingValues(b);a=this.clicked;this.clicked="styling";for(var d in this.stylesData)if(c=this.stylesData[d].type,
"video"!==c&&"gallery"!==c&&"autocomplete"!==c&&"custom_css"!==c&&"builder"!==c&&!1!==this.stylesData[d].is_responsive&&("icon_radio"===c?c="radio":"icon_checkbox"===c?c="checkbox":"textarea"===c||"icon"===c||"hidden"===c||"number"===c?c="text":"image"===c?c="file":"padding"===c||"border_radius"===c?c="margin":"frame"===c&&(c="layout"),b=this.getStyleVal(d),this[c].update(d,b,this),this.stylesData[d].binding!==l)){var f=r.document.getElementById(d);c="layout"===c?f.getElementsByClassName("tfl-icon"):
"radio"===c||"checkbox"===c?f.getElementsByTagName("input"):[f];for(var f=this.stylesData[d],e=0,g=c.length;e<g;++e)this.binding(c[e],f,b)}this.clicked=a},setStylingValues:function(a){var b=n.Forms.serialize("tb_options_styling",!0),c="desktop"===a;c||this.values["breakpoint_"+a]!==l||(this.values["breakpoint_"+a]={});for(var d in b)!0===c?this.values[d]=b[d]:this.values["breakpoint_"+a][d]=b[d]},saveComponent:function(a){if(!n.GS.isEmpty(n.activeModel.attributes.gs))return n.GS.saveLiveEdit(),!0;
n.saving=!0;var b=n.Forms,c="module"===this.component;if(c&&!b.isValidate(r.document.getElementById("tb_options_setting"))||A.Lightbox.$lightbox[0].getElementsByClassName("tb_disable_save")[0]!==l)return n.beforeEvent=null,n.saving=!1;v.body.triggerHandler("themify_builder_save_component");"visual"===n.mode&&r.jQuery("body").triggerHandler("themify_builder_save_component");delete this.values.cid;var d=!1,f=p.extend(!0,{},this.beforeData?this.beforeData:this.values),e="styling",g=h.getElementsByClassName("tb_element_cid_"+
n.activeModel.cid)[0];g===l&&(g=h.querySelector('[data-cid="'+n.activeModel.cid+'"]'));g=p(g);if("column"!==this.component){if("subrow"!==this.component){c&&(e="mod_settings");var k=b.serialize("tb_options_setting",!0);for(t in k)this.values[t]=k[t]}k=b.serialize("tb_options_animation",!0);for(t in k)this.values[t]=k[t];b=b.serialize("tb_options_visibility",!0);for(t in b)this.values[t]=b[t];"visual"===n.mode&&("hide_all"===b.visibility_all||"hide"===b.visibility_desktop||"hide"===b.visibility_tablet||
"hide"===b.visibility_tablet_landscape||"hide"===b.visibility_mobile?g[0].classList.add("tb_visibility_hidden"):g[0].classList.remove("tb_visibility_hidden"))}this.setStylingValues(n.activeBreakPoint);var t={};t[e]=p.extend(!0,{},n.Utils.clear(this.values));n.activeModel.set(t,{silent:!0});c&&(this.is_new&&(d=g.closest(".module_column"),d.closest(".module_row").removeClass("tb_row_empty"),d.closest(".module_subrow").removeClass("tb_row_empty"),d=A.clone(d)),n.Instances.Builder[n.builderIndex].removeLayoutButton());
if("visual"===n.mode){var m=p.extend(!0,{},n.liveStylingInstance.undoData);g[0].classList.remove("tb_visual_hover");g.find(".tb_visual_hover").removeClass("tb_visual_hover")}n.undoManager.push(n.activeModel.cid,n.beforeEvent,g,"save",{bsettings:f,asettings:this.values,styles:m,column:d});A.Lightbox.close(a);n.beforeEvent=null;n.saving=!1;return!0},resetStyling:function(a){a.preventDefault();a.stopPropagation();if(!this.beforeData){this.beforeData=p.extend(!0,{},this.values);var b=this;v.body.one("themify_builder_lightbox_before_close",
function(){b.beforeData=null})}n.hasChanged=!0;var c=p("#tb_options_styling",ThemifyBuilderCommon.Lightbox.$lightbox)[0],d=c.getElementsByClassName("tb_lb_option"),f=n.activeModel.get("elType");"module"===f&&(f=n.activeModel.get("mod_name"));for(var e=c.getElementsByClassName("tb_selected_style"),g=e.length-1;-1<g;--g)n.GS["delete"](e[g].getAttribute("data-css"),e[g].getAttribute("data-id"))&&(e[g].outerHTML="");e=c.getElementsByClassName("tb_gs_not_empty");e.length&&e[0].classList.remove("tb_gs_not_empty");
f=ThemifyStyles.getStyleOptions(f);if("visual"===n.mode){var k={};var h={};for(var e=n.liveStylingInstance.prefix,m=this.breakpointsReverse,g=m.length-1;-1<g;--g){var q=ThemifyStyles.getSheet(m[g]),w=q.cssRules?q.cssRules:q.rules;if(0<w.length)for(k[m[g]]===l&&(k[m[g]]={},h[m[g]]={}),q=w.length-1;-1<q;--q)if(-1!==w[q].selectorText.indexOf(e)){var x=w[q].cssText.split("{")[1].split(";");k[m[g]][q]===l&&(k[m[g]][q]={},h[m[g]][q]={});for(var D=x.length-2;-1<D;--D){var u=x[D].trim().split(": ")[0].trim();
if(w[q].style[u]!==l){var r=w[q].style[u];k[m[g]][q][u]=r;h[m[g]][q][u]={a:"",b:r};w[q].style[u]=""}}}}"module"!==n.activeModel.get("elType")&&(n.liveStylingInstance.removeBgSlider(),n.liveStylingInstance.removeBgVideo(),n.liveStylingInstance.getComponentBgOverlay().remove(),n.liveStylingInstance.bindBackgroundMode("repeat","background_repeat"),n.liveStylingInstance.bindBackgroundMode("repeat","b_r_h"),n.liveStylingInstance.$liveStyledElmt[0].removeAttribute("data-tb_slider_videos"),n.liveStylingInstance.$liveStyledElmt.children(".tb_slider_videos,.tb_row_frame").remove())}for(g in this.values)e=
-1!==g.indexOf("_color")?"color":-1!==g.indexOf("_style")?"style":!1,m=null,0===g.indexOf("breakpoint_")||f[g]!==l||-1!==g.indexOf("_apply_all")?m=!0:-1!==g.indexOf("_unit")?(e=g.replace(/_unit$/ig,"",""),f[e]!==l&&(m=!0)):-1!==g.indexOf("_w")?(e=g.replace(/_w$/ig,"",""),f[e]!==l&&"font_select"===f[e].type&&(m=!0)):!1!==e&&(e=g.replace("_"+e,"_width"),f[e]!==l&&"border"===f[e].type&&(m=!0)),!0===m&&delete this.values[g];f=null;for(g=d.length-1;-1<g;--g)if(f=d[g].value,e=d[g].classList,"px"!==f&&"solid"!==
f&&"default"!==f&&"linear"!==f&&"n"!==f&&!e.contains("exclude-from-reset-field"))if(m=d[g].getAttribute("id"),this.values[m]!==l&&delete this.values[m],e.contains("tb_radio_input_container"))e.contains("tb_icon_radio")?(f=c.querySelector('[name="'+m+'"]:checked'),null!==f&&f.parentNode.click()):(f=c.querySelector('[name="'+m+'"]'),!0!==f.checked&&(f.checked=!0,v.triggerEvent(f,"change")));else if(e.contains("tb_uploader_input"))f&&d[g].parentNode.getElementsByClassName("tb_delete_thumb")[0].click(a);
else if(e.contains("minicolors-input"))e=d[g].closest(".minicolors"),m=e.getElementsByClassName("tb_clear_btn")[0],f&&(d[g].value="",d[g].removeAttribute("data-opacity"),f=e.getElementsByClassName("minicolors-swatch-color")[0],f.style.opacity=f.style.backgroundColor="",e.nextElementSibling.value=""),m!==l&&(m.style.display="none");else if(f&&"SELECT"===d[g].tagName){if(e.contains("font-family-select"))d[g].value="";else if(e.contains("font-weight-select")){for(d[g].value="";d[g].firstChild;)d[g].removeChild(d[g].firstChild);
this.font_select.updateFontVariant("",d[g],this)}else if(e.contains("tb_unit"))d[g].value=e.contains("tb_frame_unit")?"%":"px";else{if("repeat"===f&&"background_repeat"===m||"scroll"===f&&"background_attachment"===m||"left top"===f&&"background_position"===m)continue;d[g].selectedIndex=0}e.contains("themify-gradient-type")||v.triggerEvent(d[g],"change")}else if(e.contains("themify-layout-icon"))f=d[g].getElementsByClassName("tfl-icon")[0],f.classList.contains("selected")||f.click();else if(e.contains("tb_row_js_wrapper")){f=
d[g].getElementsByClassName("tb_repeatable_field");for(q=f.length-1;-1<q;--q)f[q].parentNode.removeChild(f[q]);d[g].getElementsByClassName("add_new")[0].click()}else e.contains("themify-gradient-angle")?d[g].value="180":e.contains("themify-gradient")?d[g].nextElementSibling.click():(d[g].value="",f=p(d[g]),f.closest(".tb_gradient_container").is(":visible")&&f.trigger(e.contains("tb_range")?"keyup":"change"));"visual"===n.mode&&(n.liveStylingInstance.tempData=k,n.liveStylingInstance.undoData=h)},resetEffect:function(a){a.preventDefault();
a.stopPropagation();if(this.values.motion_effects!==l)for(var b in this.values.motion_effects)this.values.motion_effects[b].val={},this.values.motion_effects[b].val[b+"_dir"]="";b=a.target.previousElementSibling.querySelector("#motion_effects");var c=b.querySelectorAll("select");for(a=c.length-1;-1<a;--a)c[a].selectedIndex=0;c=b.querySelectorAll(".tb_position_box_wrapper");for(a=c.length-1;-1<a;--a)c[a].querySelector("input").value="50,50",c[a].querySelector(".tb_position_box_handle").setAttribute("style",
"left:50%;top:50%;");b=b.querySelectorAll(".tb_slider_wrapper");for(a=b.length-1;-1<a;--a)b[a].querySelector(".tb_slider_label_u")?(b[a].querySelector("input").value="0,100",c=b[a].querySelectorAll(".ui-slider-handle"),c[0].setAttribute("style","left:0%;"),c[1].setAttribute("style","left:100%;"),b[a].querySelector(".ui-slider-range").setAttribute("style","left:0%;width:100%;"),b[a].querySelector(".tb_slider_label_l").textContent="0%",b[a].querySelector(".tb_slider_label_u").textContent="100%"):(b[a].querySelector("input").value=
"5",b[a].querySelector(".ui-slider-handle").setAttribute("style","left:50%;"),b[a].querySelector(".tb_slider_label_l").textContent="5")},create:function(a){var b=h.createDocumentFragment();if(a===l||0===a.length){a=h.createElement("div");var c=h.createElement("p");c.textContent=themifyBuilder.i18n.no_op_module;a.appendChild(c);b.appendChild(a);return b}if("tabs"===a.type)b.appendChild(this.tabs.render(a,this));else for(c in a)if(!0!==a[c].hide&&a[c].type!==l){var d=a[c].type,f=this[d].render(a[c],
this);if("separator"!==d&&"expand"!==d&&"group"!==d){var e=a[c].id;"tabs"!==d&&"multi"!==d&&("styling"===this.clicked?("visual"===n.mode&&a[c].prop!==l&&(this.styles[e]=p.extend(!0,{},a[c])),this.stylesData[e]=p.extend(!0,{},a[c])):"visual"===n.mode&&"setting"===this.clicked&&this.values[e]!==l&&!0!==this.is_repeat&&(this.settings[e]=this.values[a[c].id],a[c].units!==l&&this.values[e+"_unit"]!==l&&(this.settings[e+"_unit"]=this.values[e+"_unit"])));if("builder"!==d){var g=h.createElement("div");g.className=
"tb_field";g.setAttribute("data-type",d);e!==l&&(g.className+=" "+e);a[c].wrap_class!==l&&(g.className+=" "+a[c].wrap_class);"custom_css"===d?g.appendChild(this.separator.render(a[c],this)):"toggle_switch"===d?g.className+=" switch-wrapper":"slider"===d?g.className+=" tb_slider_options":"message"===d&&a[c].hideIf!==l&&new Function("return "+a[c].hideIf)?g.className+=" tb_hide_option":a[c].required!==l&&"setting"===this.clicked&&(e=a[c].required.message!==l?a[c].required.message:themifyBuilder.i18n.not_empty,
g.setAttribute("data-validation",a[c].required.rule!==l?a[c].required.rule:"not_empty"),g.setAttribute("data-error-msg",e),g.className+=" tb_must_validate");"styling"===this.clicked&&!1===a[c].is_responsive&&(g.className+=" responsive_disable");e=this.getTitle(a[c]);if(!1!==e){var e=e.trim(),k=h.createElement("div"),t=h.createElement("span");k.className="tb_label";t.className="tb_label_text";t.textContent=e;k.appendChild(t);""===e&&(k.className+=" tb_empty_label");a[c].help!==l&&""!==a[c].label&&
(k.classList.add("contains-help"),t.appendChild(this.help(a[c].help)));g.appendChild(k);"multi"!==d?(d=h.createElement("div"),d.className="tb_input",d.appendChild(f),g.appendChild(d)):g.appendChild(f)}else g.appendChild(f);b.appendChild(g)}else b.appendChild(f)}else b.appendChild(f)}return b},tabs:{click:0,render:function(a,b){var c=a.options,d=h.createDocumentFragment(),f=h.createDocumentFragment(),e=h.createElement("ul"),g="styling"===b.clicked&&0===this.click&&"module"===b.component?h.createElement("div"):
null,k=h.createElement("div"),t=a.isRadio!==l,m=null,q=null;k.className="tb_tabs";e.className="clearfix tb_tab_wrapper";++this.click;!0===t&&(b.values[a.id]!==l&&""!==b.values[a.id]&&(q=!0,m=b.values[a.id]),e.className+=" tb_radio_input_container",!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=" tb_lb_option",e.id=a.id));for(var w in c){var x=h.createElement("li"),p=!0===t?h.createElement("label"):h.createElement("a"),
u=h.createElement("div"),n="tb_"+this.click+"_"+w;u.id=n;u.className="tb_tab";p.textContent=c[w].label!==l?c[w].label:b.label[w];if(!0===t){var r=h.createElement("input");r.type="radio";r.className="tb_radio_tab_input";r.name=a.id;m===w&&(r.checked=!0);r.value=w;p.setAttribute("href","#"+n);p.className="tb_radio_tab_label";p.appendChild(r)}else p.href="#"+n;null===q||m===w?(q=!0,x.className="current",u.appendChild(b.create(c[w].options)),u.style.display="block"):function(){var a=w;u.addEventListener("themify_builder_tabsactive",
function E(d){this.appendChild(b.create(c[a].options));"setting"===b.clicked&&b.setUpEditors();b.callbacks();u.removeEventListener("themify_builder_tabsactive",E,{once:!0,passive:!0});a=null},{once:!0,passive:!0})}();p.addEventListener("click",b.switchTabs);x.appendChild(p);d.appendChild(x);f.appendChild(u)}e.appendChild(d);null!==g?(g.className="tb_styling_tab_nav",g.appendChild(e),k.appendChild(g)):k.appendChild(e);k.appendChild(f);setTimeout(b.callbacks.bind(b),5);return k}},group:{render:function(a,
b){var c=h.createElement("div");a.wrap_class!==l&&(c.className+=" "+a.wrap_class);c.appendChild(b.create(a.options));return c}},builder:{render:function(a,b){b.is_repeat=!0;var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("a"),e=this;d.className="tb_row_js_wrapper tb_lb_option";a.wrap_class!==l&&(d.className+=" "+a.wrap_class);d.id=a.id;f.className="add_new tb_icon add";f.href="#";f.textContent=a.new_row!==l?a.new_row:b.label.new_row;if(b.values[a.id]!==l){for(var g=b.values[a.id].slice(),
k=h.createDocumentFragment(),t=p.extend(!0,{},b.values),m=0,q=g.length;m<q;++m)b.values=g[m],k.appendChild(this.builderFields(a,b));d.appendChild(k);b.values=t;t=g=k=null}else d.appendChild(this.builderFields(a,b));d.appendChild(f);c.appendChild(d);b.afterRun.push(function(){e.sortable(d,b);f.addEventListener("click",function(c){c.preventDefault();c.stopPropagation();b.is_repeat=!0;var f=e.builderFields(a,b);this.parentNode.insertBefore(f,this);setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();
b.callbacks();v.triggerEvent(h,"tb_repeatable_add_new",[f]);f=null},5);b.control.preview(d,null,{repeat:!0});b.is_repeat=null})});b.is_repeat=null;return c},builderFields:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("div"),e=h.createElement("div"),g=h.createElement("div"),k=h.createElement("ul"),l=h.createElement("li"),m=h.createElement("li"),q=h.createElement("div"),w=h.createElement("div"),x=this;d.className="tb_repeatable_field clearfix";f.className=
"tb_repeatable_field_top";e.className="row_menu";g.tabIndex="-1";g.className="menu_icon";k.className="tb_down";l.className="tb_duplicate_row";m.className="tb_delete_row";l.textContent=b.label.duplicate;m.textContent=b.label["delete"];q.className="toggle_row";w.className="tb_repeatable_field_content";c.appendChild(b.create(a.options));w.appendChild(c);k.appendChild(l);k.appendChild(m);e.appendChild(g);e.appendChild(k);f.appendChild(e);f.appendChild(q);d.appendChild(f);d.appendChild(w);setTimeout(function(){f.addEventListener("click",
function(c){c.stopPropagation();c.preventDefault();var e=c.target.classList;if(e.contains("tb_delete_row")){if(confirm(themifyBuilder.i18n.rowDeleteConfirm)){var f=c.target.closest(".tb_row_js_wrapper");x["delete"](c.target);b.control.preview(f,null,{repeat:!0});v.triggerEvent(f,"delete")}}else if(e.contains("tb_duplicate_row")){b.is_repeat=!0;c=p.extend(!0,{},b.values);b.values=n.Forms.serialize(d,!0,!0);var g=x.builderFields(a,b);d.parentNode.insertBefore(g,d.nextElementSibling);b.values=c;c=null;
setTimeout(function(){"setting"===b.clicked&&b.setUpEditors();b.callbacks();v.triggerEvent(d.parentNode,"duplicate");v.triggerEvent(h,"tb_repeatable_duplicate",[g]);g=null},5);b.control.preview(d,null,{repeat:!0});b.is_repeat=null}else e.contains("toggle_row")&&x.toggle(c.target);e.contains("menu_icon")||n.Utils.hideOnClick(k)})}.bind(this),1500);return d},sortable:function(a,b){var c=p(a),d=!1,f={};c.sortable({items:".tb_repeatable_field",handle:".tb_repeatable_field_top",axis:"y",tolerance:"pointer",
cursor:"move",cancel:".row_menu",start:_.debounce(function(b,c){if(tinyMCE!==l)for(var d=a.getElementsByClassName("tb_lb_wp_editor"),e=d.length-1;-1<e;--e){var g=d[e].id;f[g]=tinymce.get(g).getContent();tinyMCE.execCommand("mceRemoveEditor",!1,g)}},300),stop:_.debounce(function(e,g){if(tinyMCE!==l){for(var k in f)tinyMCE.execCommand("mceAddEditor",!1,k),tinymce.get(k).setContent(f[k]);f={}}d&&(g.item.removeClass("collapsed").find(".tb_repeatable_field_content").show(),d=!1);c.find(".tb_state_highlight").remove();
b.control.preview(a,null,{repeat:!0});v.triggerEvent(a,"sortable")},300),beforeStart:function(a,b,f){n.Utils.hideOnClick(f.item[0].getElementsByClassName("tb_down")[0]);c.find(".tb_state_highlight").height(30);f.item[0].classList.contains("collapsed")||(f.item.addClass("collapsed").find(".tb_repeatable_field_content").hide(),d=!0,c.sortable("refresh"))}})},toggle:function(a){p(a).closest(".tb_repeatable_field").toggleClass("collapsed").find(".tb_repeatable_field_content").slideToggle()},"delete":function(a){a=
a.closest(".tb_repeatable_field");v.triggerEvent(h,"tb_repeatable_delete",[a]);p(a).remove()}},accordion:{expand:function(a,b,c){a.addEventListener("click",function(a){var d=this.getElementsByClassName("tb_accordion_fields_options")[0];if(d===l){d=h.createElement("div");d.style.display="none";d.className="tb_toggleable_fields_options tb_accordion_fields_options";this.appendChild(d);c.is_repeat=!0;var e=this.closest(".tb_accordion_fields").id,g=null,k=this.getAttribute("data-id");c.values[e]!==l&&
c.values[e][k]!==l&&c.values[e][k].val!==l&&(g=p.extend(!0,{},c.values),c.values=c.values[e][k].val);d.appendChild(c.create(b.options));c.setUpEditors();c.callbacks();null!==g&&(c.values=g);c.is_repeat=g=null}else if(d.contains(a.target))return;a.stopPropagation();a.preventDefault();this.classList.contains("tb_closed")?p(d).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):p(d).slideUp(function(){this.parentNode.classList.add("tb_closed")})})},render:function(a,b){var c=this,d=
h.createDocumentFragment(),f=h.createElement("ul");f.id=a.id;f.className="tb_toggleable_fields tb_accordion_fields tb_lb_option";"motion_effects"===a.id&&b.values&&b.values.hasOwnProperty("custom_parallax_scroll_speed")&&(b.values.hasOwnProperty("motion_effects")||(b.values.motion_effects={v:{val:{v_speed:b.values.custom_parallax_scroll_speed,v_dir:""}},h:{val:{}},t:{val:{t_speed:""}},r:{val:{}},s:{val:{}}},delete b.values.custom_parallax_scroll_speed),b.values.hasOwnProperty("custom_parallax_scroll_reverse")?
(b.values.motion_effects.v.val.v_dir="down",delete b.values.custom_parallax_scroll_reverse):b.values.motion_effects.v.val.v_dir="up",b.values.hasOwnProperty("custom_parallax_scroll_fade")&&(b.values.motion_effects.t.val.t_speed=b.values.custom_parallax_scroll_speed,delete b.values.custom_parallax_scroll_fade));var e=b.values[a.id],g=function(e,f){var g=h.createElement("li"),k=h.createElement("input"),m=h.createElement("div");m.textContent=a.options[e].label;m.className="tb_toggleable_fields_title tb_accordion_fields_title";
k.type="hidden";k.value="";g.className="tb_closed";g.setAttribute("data-id",e);f.val!==l&&(k.value=JSON.stringify(f.val));g.appendChild(k);g.appendChild(m);c.expand(g,a.options[e],b);d.appendChild(g)};if(e!==l)for(var k in e)a.options[k]!==l&&g(k,e[k]);for(k in a.options)e!==l&&e[k]!==l||g(k,a.options[k]);f.appendChild(d);return f}},toggleable_fields:{sort:function(a,b){var c=p(a);c.sortable({items:">li",axis:"y",placeholder:"tb_state_highlight",forcePlaceholderSize:!0,forceHelperSize:!0,cursor:"move",
tolerance:"pointer",zIndex:9999,cancel:".tb_toggleable_fields_title,.switch-wrapper,.tb_toggleable_fields_options",stop:_.debounce(function(a,f){c.find(".tb_state_highlight").remove();b.control.preview(c[0],null,{repeat:!0});v.triggerEvent(c[0],"sortable")},300),start:function(a,b){c.sortable("refreshPositions")},beforeStart:function(a,b,e){c.sortable("refresh")}})},expand:function(a,b,c){a.addEventListener("click",function(a){if(this.classList.contains("tb_toggleable_field_disabled")||null!==a.target.closest(".switch-wrapper"))null===
a.target.closest(".tb_toggleable_fields_options")&&(d=this.getElementsByClassName("tb_toggleable_fields_options")[0],p(d).slideUp(function(){this.parentNode.classList.add("tb_closed")}));else{var d=this.getElementsByClassName("tb_toggleable_fields_options")[0];if(d===l){d=h.createElement("div");d.style.display="none";d.className="tb_toggleable_fields_options";this.appendChild(d);c.is_repeat=!0;var e=this.closest(".tb_toggleable_fields").id,g=null,k=this.getAttribute("data-id");c.values[e]!==l&&c.values[e][k]!==
l&&c.values[e][k].val!==l&&(g=p.extend(!0,{},c.values),c.values=c.values[e][k].val);d.appendChild(c.create(b.options));c.setUpEditors();c.callbacks();null!==g&&(c.values=g);c.is_repeat=g=null}else if(d.contains(a.target))return;a.stopPropagation();a.preventDefault();this.classList.contains("tb_closed")?p(d).slideDown(function(){this.parentNode.classList.remove("tb_closed")}):p(d).slideUp(function(){this.parentNode.classList.add("tb_closed")})}})},disable:function(a,b){var c=a.closest("li"),d=c.classList;
a.checked?d.remove("tb_toggleable_field_disabled"):(d.add("tb_toggleable_field_disabled"),d.add("tb_closed"));b.control.preview(c.parentNode,null,{repeat:!0})},render:function(a,b){var c=this,d=h.createDocumentFragment(),f={type:"toggle_switch",id:"",options:{on:{name:"1",value:b.label.s},off:{name:"0",value:b.label.hi}},control:!1},e=h.createElement("ul");e.className="tb_toggleable_fields";!0===b.is_repeat?(e.dataset.inputId=a.id,e.className+=" tb_lb_option_child"):(e.id=a.id,e.className+=" tb_lb_option");
var g=b.is_repeat,k=b.values[a.id];b.is_repeat=!0;var t=function(e,g){f["default"]="1"===g.on?"on":"off";var k=h.createElement("li"),m=h.createElement("input"),q=h.createElement("div"),t=b.create([f]);q.textContent=a.options[e].label;q.className="tb_toggleable_fields_title";m.type="hidden";m.value="";k.className="tb_closed";"off"===f["default"]&&(k.className+=" tb_toggleable_field_disabled");k.setAttribute("data-id",e);g.val!==l&&(m.value=JSON.stringify(g.val));t.querySelector(".toggle_switch").addEventListener("change",
function(a){a.stopPropagation();c.disable(this,b)},{passive:!0});k.appendChild(m);k.appendChild(q);k.appendChild(t);c.expand(k,a.options[e],b);d.appendChild(k)};if(k!==l)for(var m in k)a.options[m]!==l&&t(m,k[m]);for(m in a.options)k[m]===l&&t(m,a.options[m]);b.is_repeat=g;e.appendChild(d);b.afterRun.push(function(){c.sort(e,b)});return e}},sortable_fields:{getDefaults:function(a,b){var c=[{id:"icon",type:"icon",label:b.label.icon},{id:"before",type:"text",label:b.label.b_t},{id:"after",type:"text",
label:b.label.a_t}],d={date:[{id:"format",type:"select",label:b.label.d_f,options:{"F j, Y":b.label.F_j_Y,"Y-m-d":b.label.Y_m_d,"m/d/Y":b.label.m_d_Y,"d/m/Y":b.label.d_m_Y,def:b.label.def,custom:b.label.cus},binding:{not_empty:{hide:["custom"]},custom:{show:["custom"]}}},{id:"custom",type:"text",control:{event:"change"},label:b.label.cus_f,help:b.label.cus_fd_h}],time:[{id:"format",type:"select",label:b.label.t_f,options:{"g:i a":b.label.g_i_a,"g:i A":b.label.g_i_A,"H:i":b.label.H_i,def:b.label.def,
custom:b.label.cus},binding:{not_empty:{hide:["custom"]},custom:{show:["custom"]}}},{id:"custom",type:"text",control:{event:"change"},label:b.label.cus_f,help:b.label.cus_ft_h}],author:[{id:"l",type:"toggle_switch",label:b.label.l,options:"simple"},{id:"a_p",type:"toggle_switch",label:b.label.a_p,binding:{checked:{show:["p_s"]},not_checked:{hide:["p_s"]}},options:"simple"},{id:"p_s",type:"range",label:b.label.p_s,"class":"xsmall",units:{px:{min:0,max:96}},control:{event:"change"}}],comments:[{id:"l",
type:"toggle_switch",label:b.label.l,options:"simple"},{id:"no",type:"text",control:{event:"change"},label:b.label.no_c},{id:"one",type:"text",control:{event:"change"},label:b.label.one_c},{id:"comments",type:"text",control:{event:"change"},label:b.label.comments}],terms:[{id:"post_type",type:"query_posts",tax_id:"taxonomy"},{id:"l",type:"toggle_switch",label:b.label.l,options:"simple"},{id:"sep",type:"text",control:{event:"change"},label:b.label.sep}]};if(d[a]!==l)for(var f=0,e=c.length;f<e;++f)d[a].push(c[f]);
return d[a]},create:function(a,b,c,d,f,e){var g=h.createElement("li");g.textContent=b.options[c].label;g.setAttribute("data-type",c);if(!0===e){e=h.createElement("span");var k=h.createElement("input"),t=!1;k.type="hidden";if(d)f!==l&&(t=this.find(f,d));else{f!==l&&(t=this.find(f,c,!0));g.setAttribute("data-new",!0);b=A.Lightbox.$lightbox[0].getElementsByClassName(b.id)[0];var m=1;d=c+"_"+m;if(b!==l)for(;null!==b.querySelector('[data-id="'+d+'"]');)++m,d=c+"_"+m}g.setAttribute("data-id",d);!1!==t&&
f[t].val!==l&&(k.value=JSON.stringify(f[t].val));e.className="tb_sort_fields_remove";e.title=a.label["delete"];g.appendChild(k);g.appendChild(e)}return g},sort:function(a,b){var c=p(a);c.sortable({items:">li",appendTo:r.document.body,scroll:!1,containment:"parent",placeholder:"tb_state_highlight",cursor:"move",tolerance:"pointer",zIndex:9999,cancel:".tb_sort_fields_remove,.tb_sort_field_dropdown",stop:_.debounce(function(a,f){c.find(".tb_state_highlight").remove();b.control.preview(c[0],null,{repeat:!0});
v.triggerEvent(c[0],"sortable")},300),start:function(a,b){var d=Math.floor(b.item.width()+1);b.item.width(d);c.find(".tb_state_highlight").width(d);c.sortable("refreshPositions")},beforeStart:function(a,b,e){e.item[0].classList.remove("current");c.sortable("refresh")}})},find:function(a,b,c){for(var d=a.length-1;-1<d;--d)if(a[d].id===b||!0===c&&b===a[d].type)return d;return!1},edit:function(a,b,c,d){var f=d.dataset.type,e=d.getElementsByClassName("tb_sort_field_dropdown")[0];if(e===l){e=h.createElement("div");
e.className="tb_sort_field_dropdown tb_sort_field_dropdown_"+f;var g=h.createElement("span");g.className="tb_sort_field_dropdown_pointer";e.appendChild(g);b=b.options[f].options;var k=d.dataset.id,g=null;b===l&&(b=this.getDefaults(f,a));a.is_repeat=a.is_sort=!0;if(c!==l){var t=d.dataset["new"]?!0:!1,f=this.find(c,!0===t?f:k,t);!1!==f&&c[f].val!==l&&(g=p.extend(!0,{},a.values),a.values=c[f].val)}e.appendChild(a.create(b));d.appendChild(e);a.callbacks();null!==g&&(a.values=g);a.is_sort=a.is_repeat=
g=null}if(!d.classList.contains("current")){var m=function(a){a=a.getElementsByClassName("tb_sort_field_dropdown");if(0<a.length){var b=a[0].getElementsByClassName("tb_sort_field_dropdown_pointer")[0];a[0].style.left="";b.style.left="";if(!0!==ThemifyBuilderCommon.Lightbox.dockMode.get()){var c=a[0].getBoundingClientRect(),d=ThemifyBuilderCommon.Lightbox.$lightbox[0].getElementsByClassName("tb_options_tab_content")[0].getBoundingClientRect(),e=c.left<d.left+5?"left":c.right>d.right?"right":"";""!==
e&&(c="left"===e?d.left+5-c.left:c.right-d.right,a[0].style.left="left"===e?"calc(50% + "+c+"px)":"calc(50% - "+c+"px)",b.style.left="left"===e?"calc(50% - "+c+"px)":"calc(50% + "+c+"px)")}}};d.classList.add("current");m(d);var q=function(a){1===a.which&&(a.target===d||d.contains(a.target)||Themify_Icons.target&&d.contains(Themify_Icons.target[0])&&"block"===this.getElementById("themify_lightbox_fa").style.display?(d.classList.add("current"),m(d)):(d.classList.remove("current"),r.document.removeEventListener("mousedown",
q,{passive:!0}),d=null))};r.document.removeEventListener("mousedown",q,{passive:!0});r.document.addEventListener("mousedown",q,{passive:!0})}},remove:function(a,b){b=b.closest("li");var c=b.parentNode;b.parentNode.removeChild(b);a.control.preview(c,null,{repeat:!0});v.triggerEvent(c,"delete")},render:function(a,b){var c=this,d=h.createDocumentFragment(),f=h.createDocumentFragment(),e=h.createElement("div"),g=h.createElement("div"),k=h.createElement("div"),l=h.createElement("ul"),m=h.createElement("ul"),
q=b.values[a.id].slice(0);e.className="tb_sort_fields_wrap";m.className="tb_sort_fields_parent";!0===b.is_repeat?(m.dataset.inputId=a.id,m.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child"):(m.id=a.id,m.className+=" tb_lb_option");l.className="tb_ui_dropdown_items";g.className="tb_ui_dropdown_label tb_sort_fields_plus";g.tabIndex="-1";k.className="tb_sort_fields_plus_wrap";for(var w in a.options)d.appendChild(this.create(b,a,w));w=0;for(var x=q.length;w<x;++w)!0===b.is_new&&!0!==
q[w].show||f.appendChild(this.create(b,a,q[w].type,q[w].id,q,!0));m.appendChild(f);l.appendChild(d);k.appendChild(g);k.appendChild(l);e.appendChild(m);e.appendChild(k);m.addEventListener("click",function(d){d.target.classList.contains("tb_sort_fields_remove")?(d.preventDefault(),d.stopPropagation(),c.remove(b,d.target)):"LI"===d.target.tagName&&(d.preventDefault(),d.stopPropagation(),c.edit(b,a,q,d.target))});l.addEventListener("click",function(d){"LI"===d.target.tagName&&(d.preventDefault(),d.stopPropagation(),
n.Utils.hideOnClick(l),m.appendChild(c.create(b,a,d.target.dataset.type,null,q,!0)),b.control.preview(m,null,{repeat:!0}),p(m).sortable("refresh"))});b.afterRun.push(function(){c.sort(m,b);!0===b.is_new&&b.control.preview(m,null,{repeat:!0})});return e}},multi:{render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div");d.className="tb_multi_fields tb_fields_count_"+a.options.length;c.appendChild(b.create(a.options));d.appendChild(c);return d}},color:{is_typing:null,controlChange:function(a,
b,c){var d=this,f=p(a),e=c.id,g=h.createElement("div");g.className="tb_clear_btn";g.addEventListener("click",function(){g.style.display="none";a.value="";f.trigger("keyup")},{passive:!0});f.minicolors({opacity:1,swatches:themifyColorManager.toColorsArray(),changeDelay:10,beforeShow:function(){var a=A.Lightbox.$lightbox,b=f.closest(".minicolors"),c=b.find(".minicolors-panel");c.css("visibility","hidden").show();a.offset().left+a.width()<=c.offset().left+c.width()?b[0].classList.add("tb_minicolors_right"):
b[0].classList.remove("tb_minicolors_right");c.css("visibility","").hide();n.hasChanged=!0},show:function(){themifyColorManager.initColorPicker()},hide:function(){g.style.display=""!==a.value?"block":"none"},change:function(a,c){a?c&&("0.99"==c?c=1:0>=parseFloat(c)&&(c=0)):c="";d.is_typing||c===h.activeElement||(b.value=c);a&&0>=parseFloat(p(this).minicolors("opacity"))&&p(this).minicolors("opacity",0);"visual"===n.mode&&v.triggerEvent(this,"themify_builder_color_picker_change",{id:e,val:a?p(this).minicolors("rgbaString"):
""})}}).minicolors("show");c=function(b){var c=parseFloat(this.value.trim().replace(",","."));if(1<c||isNaN(c)||""===c||0>c)c=a.value?1:"";"blur"===b.type&&(this.value=c);d.is_typing="keyup"===b.type;f.minicolors("opacity",c)};b.addEventListener("blur",c,{passive:!0});b.addEventListener("keyup",c,{passive:!0});a.parentNode.appendChild(g);a.setAttribute("data-minicolors-initialized",!0)},setColor:function(a,b,c,d){var f=d,e="";""!==d&&(-1!==d.indexOf("_")?(n.Utils.toRGBA(d),d=d.split("_"),(e=d[1])?
0>=parseFloat(e)&&(e=0):e=1,f=d[0]):(f=d,e=1),-1===f.indexOf("#")&&(f="#"+f));a.value=f;a.setAttribute("data-opacity",e);b.style.background=f;b.style.opacity=e;c.value=e},update:function(a,b,c){a=r.document.getElementById(a);null!==a&&(c=a.parentNode,b===l&&(b=""),this.setColor(a,c.getElementsByClassName("minicolors-swatch-color")[0],c.nextElementSibling,b))},render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("div"),e=h.createElement("input"),g=h.createElement("input"),
k=h.createElement("span"),t=h.createElement("span"),m=b.getStyleVal(a.id),q=this;d.className="minicolors_wrapper";f.className="minicolors minicolors-theme-default";e.type="text";e.className="minicolors-input";a["class"]!==l&&(e.className+=" "+a["class"]);!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.id=a.id,e.className+=" tb_lb_option");k.className="minicolors-swatch";t.className="minicolors-swatch-color";g.type="text";g.className=
"color_opacity";k.appendChild(t);f.appendChild(e);f.appendChild(k);d.appendChild(f);d.appendChild(g);b.initControl(e,a);k.addEventListener("click",function x(){d.insertAdjacentElement("afterbegin",e);f.parentNode.removeChild(f);q.controlChange(e,g,a);k.removeEventListener("click",x,{once:!0,passive:!0})},{once:!0,passive:!0});e.addEventListener("focusin",function D(){k.click();e.removeEventListener("focusin",D,{once:!0,passive:!0})},{once:!0,passive:!0});g.addEventListener("focusin",function(a){e.dataset.minicolorsInitialized?
p(e).minicolors("show"):(e.dataset.opacity=this.value,k.click())},{passive:!0});m!==l&&this.setColor(e,t,g,m);c.appendChild(d);a.after!==l&&c.appendChild(b.after(a));a.description!==l&&c.appendChild(b.description(a.description));a.tooltip!==l&&c.appendChild(b.tooltip(a.tooltip));return c}},text:{update:function(a,b,c){a=r.document.getElementById(a);null!==a&&(a.value=b!==l?b:"")},render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("input"),f=b.getStyleVal(a.id);d.type=a.input_type!==
l?a.input_type:"text";!0===b.is_repeat?(d.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);a.placeholder!==l&&(d.placeholder=a.placeholder);if(a.custom_args!==l)for(var e in a.custom_args)d.setAttribute(e,a.custom_args[e]);f!==l&&(d.value=f);a["class"]!==l&&(d.className+=" "+a["class"]);c.appendChild(b.initControl(d,a));a.unit!==l&&c.appendChild(b.select.render(a.unit,b));a.after!==l&&c.appendChild(b.after(a));a.description!==
l&&c.appendChild(b.description(a.description));a.tooltip!==l&&c.appendChild(b.tooltip(a.tooltip));return c}},number:{render:function(a,b){a.input_type="number";a.custom_args===l&&(a.custom_args={min:0});a.step!==l&&(a.custom_args===l&&(a.custom_args={}),a.custom_args.step=a.step);return b.text.render(a,b)}},autocomplete:{render:function(a,b){var c=b.text.render(a,b);if(a.dataset===l)return c;var d=c.querySelector("input"),f=h.createElement("div");d.autocomplete="off";f.className="tb_autocomplete_container";
c.appendChild(f);d.addEventListener("keyup",function(){for(f.style.display="none";f.firstChild;)f.removeChild(f.firstChild);f.style.display="";var b=this.value;""!==b&&p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_autocomplete",dataset:a.dataset,value:b,nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend:function(a){a=h.createElement("span");a.className="fa fa-spin fa-spinner";f.appendChild(a)},success:function(a){a.success&&!p.isEmptyObject(a.data)&&
(p.each(a.data,function(a,b){var c=h.createElement("div");c.className="tb_autocomplete_item";c.setAttribute("data-value",a);c.innerText=b;f.appendChild(c)}),setTimeout(function(){new SimpleBar(f)},100))},complete:function(){f.removeChild(f.firstChild)}})},{passive:!0});f.addEventListener("mousedown",function(a){1===a.which&&a.target.classList.contains("tb_autocomplete_item")&&(a.preventDefault(),a.stopPropagation(),d.value=a.target.getAttribute("data-value"),d.blur(),v.triggerEvent(d,"change"))});
return c}},file:{_frames:{},clicked:null,browse:function(a,b,c,d){var f=this;a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();a=c.label.upload_image;var e=c.label.insert_image;if(f._frames[d]!==l)var k=f._frames[d];else k=wp.media.frames.file_frame=wp.media({title:a,library:{type:d},button:{text:e},multiple:!1}),f._frames[d]=k;k.off("select").on("select",function(){n.ActionBar.disable=!0;var a=k.state().get("selection").first().toJSON();b.value=a.url;v.triggerEvent(b,
"change");n.hasChanged=!0;p(b).trigger("change");var c=A.Lightbox.$lightbox.find("#"+b.id+"_id")[0];c!==l&&(c.value=a.id)});k.on("close",function(){n.ActionBar.disable=!0;setTimeout(function(){n.ActionBar.disable=null},5)});k.open()});"image"===d&&b.addEventListener("change",function(b){n.hasChanged=!0;f.setImage(a,this.value.trim())},{passive:!0})},setImage:function(a,b){for(;a.firstChild;)a.removeChild(a.firstChild);if(b){var c=h.createElement("img");c.width=40;c.height=40;c.src=b;a.appendChild(c)}},
update:function(a,b,c){a=r.document.getElementById(a);null!==a&&(b===l&&(b=""),a.value=b,this.setImage(a.parentNode.getElementsByClassName("thumb_preview")[0],b))},render:function(a,b,c){var d=h.createElement("div"),f=h.createElement("input"),e=h.createElement("a"),g=h.createElement("span"),k=c.getStyleVal(b.id);f.type="text";f.className="tb_uploader_input";f.required=!0;f.setAttribute("pattern",/.*\S.*/.source);f.setAttribute("autocomplete","off");if(!0===c.is_repeat){f.className+=!0===c.is_sort?
" tb_lb_sort_child":" tb_lb_option_child";var t=Math.random().toString(36).substr(2,7);f.dataset.inputId=b.id}else f.className+=" tb_lb_option",t=b.id;f.id=t;k!==l&&(f.value=k);g.className="tb_clear_input";e.className="tb_media_uploader tb_upload_btn thumb_preview tb_plus_btn";e.href="#";e.dataset.libraryType=a;e.title=c.label.browse_image;d.className="tb_uploader_wrapper";d.appendChild(c.initControl(f,b));d.appendChild(g);d.appendChild(e);"image"===a&&this.setImage(e,k);this.browse(e,f,c,a);b.after!==
l&&d.appendChild(c.after(b));b.description!==l&&d.appendChild(c.description(b.description));b.tooltip!==l&&d.appendChild(c.tooltip(b.tooltip));if(null===this.clicked&&!0===c.is_new&&"setting"===c.clicked&&("image"===c.type||"pro-image"===c.type)){this.clicked=!0;var m=this;c.afterRun.push(function(){e.click();m.clicked=null})}return d}},image:{render:function(a,b){return b.file.render("image",a,b)}},video:{render:function(a,b){return b.file.render("video",a,b)}},audio:{render:function(a,b){return b.file.render("audio",
a,b)}},icon_radio:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();b.stopImmediatePropagation();b.target!==a&&(b=b.target.closest("label").getElementsByTagName("input")[0],!0===b.checked?(b.checked=!1,b.value=l):(b.checked=!0,b.value=b.getAttribute("data-value")),n.hasChanged=!0,v.triggerEvent(b,"change"))})},render:function(a,b){return b.radioGenerate("icon_radio",a)}},radio:{controlChange:function(a){var b=null;a.classList.contains("tb_radio_dnd")&&(b=a.closest(".tb_repeatable_field_content"));
null===b&&(b=a.closest(".tb_tab"),null===b&&(b=a.closest(".tb_expanded_opttions"),null===b&&(b=A.Lightbox.$lightbox[0])));var c=a.parentNode.parentNode.getElementsByTagName("input");a=a.value;for(var d=c.length-1;-1<d;--d){var f=c[d].value;if(a!==f){f=b.getElementsByClassName("tb_group_element_"+f);for(var e=f.length-1;-1<e;--e)f[e].style.display="none"}}f=b.getElementsByClassName("tb_group_element_"+a);for(e=f.length-1;-1<e;--e)f[e].style.display="block"},update:function(a,b,c){a=r.document.getElementById(a);
if(null!==a){c=a.getElementsByTagName("input");for(var d=a.classList.contains("tb_icon_radio"),f=null,e=c.length-1;-1<e;--e)if(c[e].value===b){f=c[e];break}null===f&&(b=a.dataset["default"],b!==l&&(f=a.querySelector('[value="'+b+'"]')),!1===d&&null===f&&(f=c[0]));if(null!==f)f.checked=!0,!1===d&&a.classList.contains("tb_option_radio_enable")&&this.controlChange(f);else if(!0===d)for(e=c.length-1;-1<e;--e)c[e].checked=!1}},render:function(a,b){return b.radioGenerate("radio",a)}},icon_checkbox:{render:function(a,
b){return b.checkboxGenerate("icon_checkbox",a)}},checkbox:{update:function(a,b,c){c=r.document.getElementById(a);if(null!==c){a=c.getElementsByTagName("input");c=c.classList.contains("tb_option_checkbox_enable");b=b?b.split("|"):[];for(var d=a.length-1;-1<d;--d)a[d].checked=-1!==b.indexOf(a[d].value),!0===c&&this.controlChange(a[d])}},controlChange:function(a){var b=a.classList.contains("tb_radio_dnd")?a.closest(".tb_repeatable_field_content"):A.Lightbox.$lightbox[0],c=a.parentNode.parentNode;a=
c.getElementsByTagName("input");for(var c=c.classList.contains("tb_option_checkbox_revert"),d=a.length-1;-1<d;--d)for(var f=b.getElementsByClassName("tb-checkbox_element_"+a[d].value),e=a[d].checked,g=f.length-1;-1<g;--g)!0===c&&!1===e||!1===c&&!0===e?f[g].classList.remove("_tb_hide_binding"):f[g].classList.add("_tb_hide_binding")},render:function(a,b){return b.checkboxGenerate("checkbox",a)}},radioGenerate:function(a,b){var c=h.createDocumentFragment(),d=h.createDocumentFragment(),f=h.createElement("div"),
e="icon_radio"===a,g=this.getOptions(b),k=b["default"]!==l?b["default"]:!1,t=this.getStyleVal(b.id),m=!0===b.option_js,q=this,w=null;f.className="tb_radio_input_container";f.setAttribute("tabIndex","-1");if(!0===m){var p=[];f.className+=" tb_option_radio_enable"}!0===e&&(f.className+=" tb_icon_radio",w=b.no_toggle===l);if(!0===this.is_repeat){f.className+=!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child";var n=Math.random().toString(36).substr(2,7);f.dataset.inputId=b.id}else f.className+=
" tb_lb_option",f.id=n=b.id;!1!==k?f.dataset["default"]=k:!1===e&&t===l&&(k=g[0].value);b.before!==l&&d.appendChild(h.createTextNode(b.before));for(var u=0,r=g.length;u<r;++u){var z=h.createElement("label"),y=h.createElement("input");y.type="radio";y.name=n;y.value=g[u].value;!0===e&&y.setAttribute("data-value",g[u].value);!0===this.is_repeat&&(y.className="tb_radio_dnd");b["class"]!==l&&(y.className+=!0===this.is_repeat?" "+b["class"]:b["class"]);!0===g[u].disable&&(y.disabled=!0);if(t===g[u].value||
t===l&&k===g[u].value)y.checked=!0,!0===m&&p.push(y);z.appendChild(y);!0===m&&y.addEventListener("change",function(){this.parentNode.parentNode.blur();q.radio.controlChange(this)},{passive:!0});if(!0===e){if(g[u].icon!==l){var v=h.createElement("span");v.className="tb_icon_wrapper";v.innerHTML=g[u].icon;z.insertAdjacentElement("beforeend",v)}g[u].label_class!==l&&(z.className+=g[u].label_class);g[u].name!==l&&(v=h.createElement("span"),v.className="themify_tooltip",v.textContent=g[u].name,z.appendChild(v))}else g[u].name!==
l&&(v=h.createElement("span"),v.textContent=g[u].name,z.appendChild(v));c.appendChild(z);b.new_line!==l&&c.appendChild(h.createElement("br"));this.initControl(y,b)}f.appendChild(c);f.addEventListener("click",function(a){"LABEL"===a.target.parentNode.tagName&&this.blur()});d.appendChild(f);b.after!==l&&d.appendChild(q.after(b));b.description!==l&&d.appendChild(q.description(b.description));!0===e&&!0===w&&q.icon_radio.controlChange(f);!0===m&&this.radioChange.push(function(){for(var a=0,b=p.length;a<
b;++a)q.radio.controlChange(p[a]);p=null});return d},checkboxGenerate:function(a,b){var c=h.createDocumentFragment(),d=h.createDocumentFragment(),f=h.createElement("div"),e=this.getOptions(b),g="icon_checkbox"===a,k=null,t=null,m=!0===b.option_js,q=b.new_line===l,w=this.getStyleVal(b.id);f.className="themify-checkbox";if(!0===m){var p=this;var n=[];f.className+=" tb_option_checkbox_enable";b.reverse!==l&&(f.className+=" tb_option_checkbox_revert")}!0===this.is_repeat?(f.className+=!0===this.is_sort?
" tb_lb_sort_child":" tb_lb_option_child",f.dataset.inputId=b.id):(f.className+=" tb_lb_option",f.id=b.id);b.wrap_checkbox!==l&&(f.className+=" "+b.wrap_checkbox);w===l?b["default"]!==l&&(k=b["default"],t=Array.isArray(k)):w=!1!==w?w.split("|"):l;!0===g&&(f.className+=" tb_icon_checkbox");b.before!==l&&d.appendChild(h.createTextNode(b.before));for(var u=0,r=e.length;u<r;++u){var v=h.createElement("label"),y=h.createElement("input");y.type="checkbox";y.className="tb-checkbox";y.value=e[u].name;!0===
this.is_repeat&&(y.className+=!0===this.is_sort?" tb_lb_sort_child":" tb_lb_option_child");b["class"]!==l&&(y.className+=" "+b["class"]);if(w!==l&&-1!==w.indexOf(e[u].name)||k===e[u].name||!0===t&&-1!==k.indexOf(e[u].name))y.checked=!0;!0===m&&(y.addEventListener("change",function(){p.checkbox.controlChange(this)},{passive:!0}),n.push(y));!1===q&&(v.className="pad-right");v.appendChild(y);if(!0===g){if(v.insertAdjacentHTML("beforeend",e[u].icon),e[u].value!==l){var C=h.createElement("span");C.className=
"themify_tooltip";C.textContent=e[u].value;v.appendChild(C)}}else e[u].value!==l&&v.appendChild(h.createTextNode(e[u].value));c.appendChild(v);e[u].help!==l&&c.appendChild(this.help(e[u].help));!0===q&&c.appendChild(h.createElement("br"));this.initControl(y,b)}f.appendChild(c);d.appendChild(f);b.after!==l&&(b.label!==l&&""!==b.label||b.help===l||""===b.help?d.appendChild(this.after(b)):(f.classList.add("contains-help"),f.appendChild(this.after(b))));b.description!==l&&d.appendChild(this.description(b.description));
!0===m&&this.afterRun.push(function(){for(var a=0,b=n.length;a<b;++a)p.checkbox.controlChange(n[a]);n=null});return d},date:{loaded:null,render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("input"),f=h.createElement("button"),e=this,g=function(){var b=r.$.fn.themifyDatetimepicker?r.$.fn.themifyDatetimepicker:r.$.fn.datetimepicker;if(b){var c=a.picker!==l?a.picker:{};f.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();d.value="";d.dispatchEvent(new Event("change"));
this.style.display="none"});b.call(p(d),{showButtonPanel:!0,changeYear:!0,dateFormat:c.dateformat||"yy-mm-dd",timeFormat:c.timeformat||"HH:mm:ss",stepMinute:5,stepSecond:5,controlType:c.timecontrol||"select",oneLine:!0,separator:c.timeseparator||" ",onSelect:function(a){f.style.display=""===a?"none":"block";d.dispatchEvent(new Event("change"))},beforeShow:function(){r.document.getElementById("ui-datepicker-div").classList.add("themify-datepicket-panel")}})}};d.type="text";d.className="themify-datepicker";
!0===b.is_repeat?(d.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);d.readonly=!0;f.className="themify-datepicker-clear";f.textContent=b.label.clear_date;b.values[a.id]!==l&&(d.value=b.values[a.id]);a["class"]!==l&&(d.className+=" "+a["class"]);d.value||(f.style.display="none");c.appendChild(b.initControl(d,a));c.appendChild(f);a.after!==l&&c.appendChild(b.after(a));a.description!==l&&c.appendChild(b.description(a.description));
null===this.loaded?b.afterRun.push(function(){r.Themify.LoadCss(themifyBuilder.meta_url+"css/jquery-ui-timepicker.min.css",tbLocalScript.version);r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/datepicker.min.js",function(){r.Themify.LoadAsync(themifyBuilder.meta_url+"js/jquery-ui-timepicker.min.js",function(){e.loaded=!0;g()},tbLocalScript.version,null,function(){return r.$.fn.themifyDatetimepicker!==l||r.$.fn.datetimepicker!==l})},tbLocalScript.version,null,function(){return r.$.fn.datepicker!==
l})}):b.afterRun.push(g);return c}},gradient:{controlChange:function(a,b,c,d,f,e,g,k,h){var m=a.getStyleVal(e.id);if(m===l||""===m)m=180;var q=!1,t=p(b),x=a.getStyleVal(c.id),r={angle:m,onChange:function(a,b){q&&(a=b="");"visual"===n.mode&&v.triggerEvent(c,"themify_builder_gradient_change",{val:b});c.value=a;n.hasChanged=!0},onInit:function(){b.style.display="block"}};x&&(r.gradient=x,c.value=x);e.value=m;h||t.ThemifyGradient(r);var u=t.data("themifyGradient"),B=function(a){var b=e.parentNode;b.classList.contains("gradient-angle-knob")||
(b=e);"radial"===a?(k.style.display=b.style.display="none",g.parentNode.style.display="inline-block"):(k.style.display=b.style.display="inline-block",g.parentNode.style.display="none")};h?(u.settings=p.extend({},u.settings,r),u.settings.type=a.getStyleVal(f.id),u.settings.circle=g.checked,u.isInit=!1,u.update(),u.isInit=!0):(d.addEventListener("click",function(a){a.preventDefault();a.stopImmediatePropagation();q=!0;u.settings.gradient=p.ThemifyGradient["default"];u.update();q=!1}),f.addEventListener("change",
function(a){a=this.value;u.setType(a);B(a)},{passive:!0}),g.addEventListener("change",function(){u.setRadialCircle(this.checked)},{passive:!0}),e.addEventListener("mousedown",function y(){p(this).knob({min:0,max:360,step:1,width:63,height:63,thickness:.45,cursor:!0,lineCap:"round",change:function(a){u.setAngle(Math.round(a))}});this.removeAttribute("style");var a=this.parentNode;a.classList.add("gradient-angle-knob");a.removeAttribute("style");a.insertAdjacentElement("afterbegin",this);this.addEventListener("change",
function(){var a=parseInt(this.value);a||(a=0);u.setAngle(a)},{passive:!0});e.removeEventListener("mousedown",y,{once:!0,passive:!0})},{once:!0,passive:!0}));B(a.getStyleVal(f.id))},update:function(a,b,c){var d=a+"-gradient";b=r.document.getElementById(d);if(null!==b){var f=r.document.getElementById(d+"-angle"),d=r.document.getElementById(d+"-type");a=r.document.getElementById(a+"-circle-radial");var e=a.previousElementSibling;this.controlChange(c,b.previousElementSibling,b,null,d,f,a.getElementsByClassName("tb-checkbox")[0],
e,!0)}},render:function(a,b){var c=h.createElement("div"),d=h.createDocumentFragment(),f=h.createElement("div"),e=h.createElement("select"),g=["linear","radial"],k=h.createElement("input"),t=h.createElement("span"),m=h.createElement("div"),q=h.createElement("input"),w=h.createElement("a");c.className="themify-gradient-field";a.option_js!==l&&(c.className+=" tb_group_element_gradient");f.className="selectwrapper";e.className="tb_lb_option themify-gradient-type";e.id=a.id+"-gradient-type";k.type="text";
k.className="xsmall tb_lb_option themify-gradient-angle";k.id=a.id+"-gradient-angle";k.autocomplete="off";k.value=180;t.textContent=b.label.rotation;m.className="tb_gradient_container";m.tabIndex=-1;q.type="hidden";q.className="themify-gradient tb_lb_option";q.dataset.id=a.id;q.id=a.id+"-gradient";w.className="tb_clear_gradient ti-close";w.href="#";w.title=b.label.clear_gradient;for(var p=0;2>p;++p){var n=h.createElement("option");n.value=g[p];n.textContent=b.label[g[p]];e.appendChild(n)}f.appendChild(e);
d.appendChild(f);d.appendChild(k);d.appendChild(t);d.appendChild(b.checkboxGenerate("checkbox",{id:a.id+"-circle-radial",options:[{name:"1",value:b.label.circle_radial}]}));d.appendChild(m);d.appendChild(q);d.appendChild(w);c.appendChild(d);var u=this;b.initControl(q,a);b.afterRun.push(function(){u.controlChange(b,m,q,w,e,k,c.getElementsByClassName("tb-checkbox")[0],t)});return c}},fontColor:{update:function(a,b,c){c.radio.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isFontColor=!0;var c=
{id:a.id,type:"radio",option_js:!0,isFontColor:!0,options:[{value:a.s+"_solid",name:b.label.solid},{value:a.g+"_gradient",name:b.label.gradient}]},d=b.radioGenerate("radio",c),f=d.querySelector(".tb_lb_option"),c=p.extend(!0,{},a);c.label="";c.type="color";c.id=a.s;c.prop="color";c.wrap_class="tb_group_element_"+a.s+"_solid";var e=b.create([c]);c.id=a.g;c.wrap_class="tb_group_element_"+a.g+"_gradient";c.type="gradient";c.prop="background-image";var g=b.create([c]);c=c=null;b.afterRun.push(function(){var a=
f.parentNode.closest(".tb_field");a.parentNode.insertBefore(e,a.nextElementSibling);a.parentNode.insertBefore(g,a.nextElementSibling);g=e=f=null});return d}},imageGradient:{update:function(a,b,c){c.radio.update(a+"-type",c.getStyleVal(a+"-type"),c);c.file.update(a,b,c);c.gradient.update(a,b,c);a=r.document.getElementById(a);if(null!==a){b=a.closest(".tb_tab");a=b.getElementsByClassName("tb_image_options");b=b.getElementsByClassName("tb_gradient_image_color")[0].getElementsByClassName("minicolors-input")[0].id;
c.color.update(b,c.getStyleVal(b),c);for(var d=0;d<a.length;++d)b=a[d].getElementsByClassName("tb_lb_option")[0].id,c.select.update(b,c.getStyleVal(b),c)}},render:function(a,b){var c=h.createElement("div"),d=h.createDocumentFragment(),f=h.createElement("div");c.className="tb_image_gradient_field";f.className="tb_group_element_image";d.appendChild(b.radioGenerate("radio",{type:a.type,id:a.id+"-type",options:[{name:b.label.image,value:"image"},{name:b.label.gradient,value:"gradient"}],option_js:!0}));
var e=p.extend(!0,{},a);e.type="image";e["class"]="xlarge";f.appendChild(b.file.render("image",p.extend(!0,{},e),b));d.appendChild(f);e.type="gradient";delete e["class"];delete e.binding;d.appendChild(b.gradient.render(e,b));b.afterRun.push(function(){var a={wrap_class:"tb_group_element_image",type:"group",options:[]};e.prop="background-color";e.wrap_class="tb_gradient_image_color";e.label=b.label.bg_c;e.type="color";e.id=e.colorId;a.options.push(p.extend({},e));e.prop="background-mode";e.wrap_class=
"tb_image_options";e.label=b.label.b_r;e.repeat=!0;e.type="select";e.id=e.repeatId;a.options.push(p.extend({},e));e.prop="background-position";e.wrap_class="tb_image_options";e.label=b.label.b_p;e.position=!0;e.type="select";e.id=e.posId;delete e.repeat;a.options.push(p.extend({},e));var c=f.parentNode.closest(".tb_field");c.parentNode.insertBefore(b.create([a]),c.nextElementSibling);e=null});c.appendChild(d);return c}},layout:{controlChange:function(a){a.addEventListener("click",function(b){b.preventDefault();
b.stopPropagation();if(b.target!==a&&(b=b.target.closest("a"),null!==b)){for(var c=this.getElementsByClassName("tfl-icon"),d=c.length-1;-1<d;--d)c[d].classList.remove("selected");b.classList.add("selected");n.hasChanged=!0;v.triggerEvent(this,"change",{val:b.id})}})},update:function(a,b,c){c=r.document.getElementById(a);if(null!==c){a=c.getElementsByClassName("tfl-icon");for(var d=a.length-1;-1<d;--d)b===a[d].id?a[d].classList.add("selected"):a[d].classList.remove("selected");b===l&&(b=c.dataset["default"],
b=b===l?a[0]:b.querySelector("#"+b),b.classList.add("selected"))}},render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=b.getStyleVal(a.id),e=b.getOptions(a);!0===a.color&&!0===a.transparent&&(e=e.slice(),e.push({img:"transparent",value:"transparent",label:b.label.transparent}));d.className="themify-layout-icon";!0===b.is_repeat?(d.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);a["class"]!==
l&&(d.className+=" "+a["class"]);f===l&&(f=themifyBuilder.modules[b.type],f=f!==l&&f.defaults!==l&&f.defaults[a.id]?f.defaults[a.id]:e[0].value);for(var g=0,k=e.length;g<k;++g){var t=h.createElement("a"),m=h.createElement("span");t.href="#";t.className="tfl-icon";t.id=e[g].value;f===e[g].value&&(t.className+=" selected");m.className="themify_tooltip";m.textContent=e[g].label;if("sprite"===a.mode&&-1===e[g].img.indexOf(".png")){var q=h.createElement("span");q.className="tb_sprite";-1!==e[g].img.indexOf("http")?
q.style.backgroundImage="url("+e[g].img+")":q.className+=" tb_"+e[g].img}else q=h.createElement("img"),q.alt=e[g].label,q.src=-1!==e[g].img.indexOf("http")?e[g].img:themifyBuilder.builder_url+"/img/builder/"+e[g].img;t.appendChild(q);t.appendChild(m);c.appendChild(t)}d.appendChild(c);this.controlChange(d);"row"!==b.component||"row_width"!==a.id&&"row_height"!==a.id?b.initControl(d,a):n.Utils.changeOptions(d,a.type);return d}},layoutPart:{data:[],get:function(a){var b=this;p.ajax({type:"POST",url:themifyBuilder.ajaxurl,
dataType:"json",data:{action:"tb_get_library_items",nonce:themifyBuilder.tb_load_nonce,pid:themifyBuilder.post_ID},beforeSend:function(a){A.showLoader("show")},success:function(c){A.showLoader("hide");b.data=c;a()},error:function(){A.showLoader("error")}})},render:function(a,b){function c(){var c=h.createDocumentFragment(),e=b.values[a.id],f=null!==n.Forms.LayoutPart.id?n.Forms.LayoutPart.id.toString():null;c.appendChild(h.createElement("option"));for(var g=0,k=d.data.length;g<k;++g)if(f!==d.data[g].id.toString()){var l=
h.createElement("option");l.value=d.data[g].post_name;l.textContent=d.data[g].post_title;e===d.data[g].post_name&&(l.selected=!0);c.appendChild(l)}q.appendChild(c);q=null}var d=this,f=h.createDocumentFragment(),e=b.select.render(a,b),g=h.createElement("a"),k=h.createElement("a"),l=h.createElement("span"),m=h.createElement("span"),q=e.querySelector("select");0===d.data.length?d.get(c):c();f.appendChild(e);e=null;g.target=k.target="_blank";g.className=k.className="add_new";g.href=a.edit_url;k.href=
a.add_url;l.className="tb_icon add";m.className="tb_icon ti-folder";g.appendChild(m);g.appendChild(h.createTextNode(b.label.mlayout));k.appendChild(l);k.appendChild(h.createTextNode(b.label.nlayout));f.appendChild(h.createElement("br"));f.appendChild(k);f.appendChild(g);return f}},separator:{render:function(a,b){var c=b.label[a.label]!==l?b.label[a.label]:a.label;if(c!==l){var d=a.wrap_class!==l?h.createElement("div"):h.createDocumentFragment();var f=h.createElement("h4");f.textContent=c;d.appendChild(h.createElement("hr"));
d.appendChild(f)}else a.html!==l?(d=h.createElement("div"),d.innerHTML=a.html,d=d.firstChild):d=h.createElement("hr");a.wrap_class!==l&&(d.className=a.wrap_class);return d}},multiColumns:{render:function(a,b){for(var c=[],d=[{id:a.id+"_gap",label:b.label.c_g,type:"range",prop:"column-gap",selector:a.selector,wrap_class:"tb_multi_columns_wrap",units:{px:{min:0,max:500}}},{type:"multi",wrap_class:"tb_multi_columns_wrap",label:b.label.c_d,options:[{type:"color",id:a.id+"_divider_color",prop:"column-rule-color",
selector:a.selector},{type:"range",id:a.id+"_divider_width","class":"tb_multi_columns_width",prop:"column-rule-width",selector:a.selector,units:{px:{min:0,max:500}}},{type:"select",id:a.id+"_divider_style",options:b["static"].border,prop:"column-rule-style",selector:a.selector}]}],f=0;7>f;++f)c[f]=0===f?"":f;a.options=c;c=null;c=p.extend(!0,{},a);c.type="select";var c=b.select.render(c,b),e=c.querySelector("select");b.afterRun.push(function(){var a=e.closest(".tb_field");a.parentNode.insertBefore(b.create(d),
a.nextElementSibling)});return c}},expand:{render:function(a,b){var c=h.createElement("fieldset"),d=h.createElement("div"),f=h.createElement("div"),e=h.createElement("i"),g=b.label[a.label]!==l?b.label[a.label]:a.label;c.className="tb_expand_wrap";f.className="tb_style_toggle tb_closed";d.className="tb_expanded_opttions";e.className="ti-angle-up";f.appendChild(h.createTextNode(g));f.appendChild(e);c.appendChild(f);c.appendChild(d);f.addEventListener("click",function(c){c.preventDefault();c.stopImmediatePropagation();
this.dataset.done===l&&(this.dataset.done=!0,d.appendChild(b.create(a.options)),"setting"===b.clicked&&b.setUpEditors(),b.callbacks(),v.body.triggerHandler("tb_options_expand",[d]));this.classList.contains("tb_closed")?this.classList.remove("tb_closed"):this.classList.add("tb_closed")});return c}},gallery:{file_frame:null,cache:{},init:function(a,b){var c=wp.media.gallery.shortcode,d=this,f=b.value.trim(),e=function(a,c){var d=h.createElement("div"),e=h.createDocumentFragment(),f=b.parentNode.getElementsByClassName("tb_shortcode_preview")[0];
d.className="tb_shortcode_preview";f!==l&&f.parentNode.removeChild(f);for(var f=0,g=a.length;f<g;++f){var k=h.createElement("img");k.width=k.height=50;if(!0===c)k.src=a[f];else{var p=a[f].attributes;k.src=p.sizes.thumbnail?p.sizes.thumbnail.url:p.url}e.appendChild(k)}d.appendChild(e);b.parentNode.insertBefore(d,b.nextElementSibling)};0<f.length&&(this.cache[f]!==l?e(this.cache[f],!0):p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_load_shortcode_preview",tb_load_nonce:themifyBuilder.tb_load_nonce,
shortcode:f},success:function(a){e(a,!0);d.cache[f]=a}}));a.addEventListener("click",function(a){a.preventDefault();a.stopPropagation();null===d.file_frame?(d.file_frame=wp.media.frames.file_frame=wp.media({frame:"post",state:"gallery-library",library:{type:"image"},title:wp.media.view.l10n.editGalleryTitle,editing:!0,multiple:!0,selection:!1}),d.file_frame.el.classList.add("themify_gallery_settings")):d.file_frame.options.selection.reset();wp.media.gallery.shortcode=function(a){var b=a.props.toJSON(),
d=_.pick(b,"orderby","order");a.gallery&&_.extend(d,a.gallery.toJSON());d.ids=a.pluck("id");b.uploadedTo&&(d.id=b.uploadedTo);d._orderbyRandom&&(d.orderby="rand",delete d._orderbyRandom);d.ids&&"post__in"===d.orderby&&delete d.orderby;for(var e in wp.media.gallery.defaults)wp.media.gallery.defaults[e]===d[e]&&delete d[e];delete d._orderByField;a=new r.wp.shortcode({tag:"gallery",attrs:d,type:"single"});wp.media.gallery.shortcode=c;return a};a=b.value.trim();0<a.length?(d.file_frame=wp.media.gallery.edit(a),
d.file_frame.state("gallery-edit")):(d.file_frame.state("gallery-library"),d.file_frame.open(),d.file_frame.$el.find(".media-menu .media-menu-item").last().trigger("click"));a=function(a){var c=wp.media.gallery.shortcode(a).string().slice(1,-1);b.value="["+c+"]";e(a.models);v.triggerEvent(b,"change");n.hasChanged=!0};d.file_frame.off("update",a).on("update",a)})},render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("a"),f=this,e=a["class"]!==l?a["class"]:"";d.href="#";d.className=
"builder_button tb_gallery_btn";d.textContent=b.label.add_gallery;a["class"]=e+" tb_shortcode_input";c.appendChild(b.textarea.render(a,b));c.appendChild(d);b.afterRun.push(function(){f.init(d,d.previousElementSibling);!0===b.is_new&&"gallery"===b.type&&"setting"===b.clicked&&d.click()});return c}},textarea:{render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("textarea"),f=b.getStyleVal(a.id);!0===b.is_repeat?(d.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",d.dataset.inputId=
a.id):(d.className="tb_lb_option",d.id=a.id);d.className+=" "+(a["class"]!==l?a["class"]:"xlarge");f!==l&&(d.value=f);a.rows!==l&&(d.rows=a.rows);c.appendChild(b.initControl(d,a));a.after!==l&&c.appendChild(b.after(a));a.description!==l&&c.appendChild(b.description(a.description));return c}},wp_editor:{render:function(a,b){var c=h.createElement("div"),d=h.createElement("div"),f=h.createElement("div"),e=h.createElement("button"),g=h.createElement("span"),k=h.createElement("div"),t=h.createElement("button"),
m=h.createElement("button"),q=h.createElement("div"),p=h.createElement("div"),n=h.createElement("textarea");c.className="wp-core-ui wp-editor-wrap tmce-active";n.className="tb_lb_wp_editor fullwidth";if(!0===b.is_repeat){var r=Math.random().toString(36).substr(2,7);n.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child";n.dataset.inputId=a.id;!1!==a.control&&(a.control===l&&(a.control={}),a.control.repeat=!0)}else n.className+=" tb_lb_option",r=a.id;n.id=r;c.id="wp-"+r+"-wrap";d.id=
"wp-"+r+"-editor-tools";d.className="wp-editor-tools";f.id="wp-"+r+"-media-buttons";f.className="wp-media-buttons";e.type="button";e.className="button insert-media add_media";g.className="wp-media-buttons-icon";k.className="wp-editor-tabs";t.type="button";t.className="wp-switch-editor switch-tmce";t.id=r+"-tmce";t.dataset.wpEditorId=r;t.textContent=b.label.visual;m.type="button";m.className="wp-switch-editor switch-html";m.id=r+"-html";m.dataset.wpEditorId=r;m.textContent=b.label.text;q.id="wp-"+
r+"-editor-container";q.className="wp-editor-container";p.id="qt_"+r+"_toolbar";p.className="quicktags-toolbar";a["class"]!==l&&(n.className+=" "+a["class"]);b.values[a.id]!==l&&(n.value=b.values[a.id]);n.rows=12;n.cols=40;q.appendChild(n);q.appendChild(p);k.appendChild(t);k.appendChild(m);e.appendChild(g);e.appendChild(h.createTextNode(b.label.add_media));f.appendChild(e);d.appendChild(f);d.appendChild(k);c.appendChild(d);c.appendChild(q);b.editors.push({el:n,data:a});return c}},select:{update:function(a,
b,c){a=r.document.getElementById(a);null!==a&&(b!==l?a.value=b:a[0]!==l&&(a[0].selected=!0))},make_options:function(a,b,c){var d=h.createDocumentFragment();c=c.getOptions(a);for(var f in c){var e=h.createElement("option");e.value=f;e.text=c[f];if(b===f||b===l&&f===a["default"])e.selected=!0;d.appendChild(e)}return d},render:function(a,b){var c=h.createElement("div"),d=h.createElement("select"),f=h.createDocumentFragment(),e=b.getStyleVal(a.id);c.className="selectwrapper";!0===b.is_repeat?(d.className=
!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",d.dataset.inputId=a.id):(d.className="tb_lb_option",d.id=a.id);a["class"]!==l&&(d.className+=" "+a["class"]);if(a.optgroup){var g=h.createDocumentFragment(),k=b.getOptions(a),t;for(t in k)if(k[t].label!==l){var m=h.createElement("optgroup");m.setAttribute("label",k[t].label);m.appendChild(this.make_options(k[t],e,b));g.appendChild(m)}else g.appendChild(this.make_options(k[t],e,b));d.appendChild(g)}else d.appendChild(this.make_options(a,e,b));
c.appendChild(b.initControl(d,a));f.appendChild(c);a.after!==l&&f.appendChild(b.after(a));a.description!==l&&f.appendChild(b.description(a.description));a.tooltip!==l&&f.appendChild(b.tooltip(a.tooltip));return f}},font_select:{loaded_fonts:[],fonts:[],safe:[],google:[],cf:[],updateFontVariant:function(a,b,c,d){if(b)if(d=""===d||d===l?l!==this.google[a]?"google":"cf":d,d="webfont"===d?"fonts":d,this[d][a]===l||this[d][a].v===l)b.closest(".tb_field").classList.add("_tb_hide_binding");else{var f=this[d][a].v;
c=c.getStyleVal(b.id);var e=h.createDocumentFragment();c=l===c?"google"===d?"regular":"normal":c;b.dataset.selected=a;a=0;for(d=f.length;a<d;++a){var g=h.createElement("option");g.value=g.textContent=f[a];f[a]===c&&(g.selected=!0);e.appendChild(g)}for(;b.firstChild;)b.removeChild(b.firstChild);b.appendChild(e);b.closest(".tb_field").classList.remove("_tb_hide_binding")}},loadGoogleFonts:function(a,b){a=p.unique(a.split("|"));for(var c={google:[],cf:[]},d=[],f=this,e=a.length-1;-1<e;--e)if(a[e]&&-1===
this.loaded_fonts.indexOf(a[e])&&(-1===c.google.indexOf(a[e])||-1===c.cf.indexOf(a[e]))){var g=a[e].split(":"),k="regular"===g[1]||"normal"===g[1]||"italic"===g[1]||parseInt(g[1])?g[1]:"400,700",k=g[0].split(" ").join("+")+":"+k;-1===this.loaded_fonts.indexOf(k)&&(g="undefined"!==themifyBuilder&&null!==themifyBuilder.google?themifyBuilder.cf[g[0]]!==l?"cf":"google":f.cf[g[0]]!==l?"cf":"google",k+="google"===g?":latin,latin-ext":"",c[g].push(k),d.push(k))}if(0<c.google.length||0<c.cf.length){a=null;
var h=function(){for(var a=d.length-1;-1<a;--a)-1===f.loaded_fonts.indexOf(d[a])&&f.loaded_fonts.push(d[a])},e={fontloading:function(a,b){h()},fontinactive:function(a,b){h()}};0<c.google.length&&(e.google={families:c.google},WebFont.load(e),b&&(e.context=b,WebFont.load(e),delete e.context),delete e.google);0<c.cf.length&&(e.custom={families:c.cf,urls:[themifyBuilder.cf_api_url+c.cf.join("|")]},WebFont.load(e),b&&(e.context=b,WebFont.load(e)))}},controlChange:function(a,b,c,d){for(var f=this,e=p(a).comboSelect({comboClass:"themify-combo-select",
comboArrowClass:"themify-combo-arrow",comboDropDownClass:"themify-combo-dropdown",inputClass:"themify-combo-input",disabledClass:"themify-combo-disabled",hoverClass:"themify-combo-hover",selectedClass:"themify-combo-selected",markerClass:"themify-combo-marker"}).parent("div"),g=e[0].getElementsByClassName("themify-combo-item"),k=function(a){f.fonts.push(a);c.classList.remove("themify_show_wait")},h=g.length-1;-1<h;--h)g[h].addEventListener("click",function(b){var c=this.dataset.value;n.hasChanged=
!0;if(c&&-1===f.loaded_fonts.indexOf(c)){b=a.querySelector('option[value="'+c+'"]');var e=b.dataset.type;if(null===b||"webfont"!==e)b={classes:!1,fontloading:function(a,b){f.loaded_fonts.push(c)},fontinactive:function(a,b){f.loaded_fonts.push(c)}},"google"===e?b.google={families:[c]}:"cf"===e&&(b.custom={families:[c],urls:[themifyBuilder.cf_api_url+c]}),WebFont.load(b)}f.updateFontVariant(c,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],d,e);setTimeout(function(){v.triggerEvent(a,
"change")},10)},{passive:!0}),g[h].addEventListener("mouseenter",function(){var d=this.dataset.value;if(d){var e=p(this);if(e.is(":visible")&&("default"===d&&(d="inherit"),b.style.top=e.position().top+30+"px",b.style.fontFamily=d,b.style.display="block","inherit"!==d&&!this.classList.contains("tb_font_loaded"))){this.classList.add("tb_font_loaded");if(-1===f.fonts.indexOf(d))if(c.classList.add("themify_show_wait"),e=a.querySelector('option[value="'+d+'"]'),null===e||"webfont"!==e.dataset.type){var g=
{classes:!1,context:r,fontloading:function(a,b){k(d)},fontinactive:function(a,b){k(d)}};"google"===e.dataset.type?g.google={families:[d]}:"cf"===e.dataset.type&&(g.custom={families:[d],urls:[themifyBuilder.cf_api_url+d]});WebFont.load(g)}else k(d);this.classList.add("tb_font_loaded");this.style.fontFamily=d}}},{passive:!0});g=null;e.trigger("comboselect:open").on("comboselect:close",function(){b.style.display="none"});e[0].getElementsByClassName("themify-combo-arrow")[0].addEventListener("click",
function(){b.style.display="none"},{passive:!0})},update:function(a,b,c){a=r.document.getElementById(a);if(null!==a)if(b===l&&(b=""),a.value=b,this.updateFontVariant(b,a.closest(".tb_tab").getElementsByClassName("font-weight-select")[0],c),a.dataset.init===l){for(c=a.getElementsByTagName("optgroup");c[0].firstChild;)c[0].removeChild(c[0].firstChild);for(;c[1].firstChild;)c[1].removeChild(c[1].firstChild);a=h.createElement("option");a.value=b;a.selected=!0;this.safe[b]!==l?(a.textContent=this.safe[b],
c[0].appendChild(a)):this.google[b]!==l?(a.textContent=this.google[b].n,c[1].appendChild(a)):this.cf[b]!==l?(a.textContent=this.cf[b].n,c[2].appendChild(a)):(a.textContent=b,c[0].appendChild(a))}else a.parentNode.getElementsByClassName("themify-combo-input")[0].value=b},render:function(a,b){var c=h.createElement("div"),d=h.createElement("select"),f=h.createElement("span"),e=h.createElement("span"),g=h.createDocumentFragment(),k=h.createElement("option"),t=b.getStyleVal(a.id),m=this,q={safe:b.label.safe_fonts,
google:b.label.google_fonts},p=1>Object.keys(this.cf).length;!1===p&&(q.cf=b.label.cf_fonts);c.className="tb_font_preview_wrapper";d.className="tb_lb_option font-family-select";d.id=a.id;f.className="tb_font_preview";e.textContent=b.label.font_preview;k.value="";k.textContent="---";g.appendChild(k);a["class"]!==l&&(d.className+=" "+a["class"]);k=["google","safe"];!1===p&&k.push("cf");for(var n=k.length-1;0<=n;--n){var r=h.createElement("optgroup");r.label=q[k[n]];if(t!==l){var u=h.createElement("option");
u.value=t;u.selected=!0;u.textContent="cf"===k[n]&&this.cf[t]!==l?this.cf[t].n:"safe"===k[n]&&this.safe[t]!==l?this.safe[t]:"google"===k[n]&&this.google[t]!==l?this.google[t].n:l!==this.cf[t]?this.cf[t].n:t;r.appendChild(u)}g.appendChild(r)}c.addEventListener("focusin",function z(){var a=m.safe,g=h.createDocumentFragment(),k=d.getElementsByTagName("optgroup");d.dataset.init=!0;if(t!==l){var q=0;for(var n=k.length;q<n;++q)for(;k[q].firstChild;)k[q].removeChild(k[q].firstChild)}for(var u in a)q=h.createElement("option"),
q.value=u,q.textContent=a[u],q.dataset.type="webfont",t===u&&(q.selected=!0),g.appendChild(q);k[p?0:1].appendChild(g);n=["google"];!1===p&&n.unshift("cf");for(var w=n.length-1;0<=w;--w){a=m[n[w]];g=h.createDocumentFragment();for(u in a)q=h.createElement("option"),q.value=u,q.dataset.type=n[w],q.textContent=a[u].n,t===u&&(q.selected=!0),g.appendChild(q);k["cf"==n[w]?0:p?1:2].appendChild(g)}m.controlChange(d,f,e,b);c.removeEventListener("focusin",z,{once:!0,passive:!0})},{once:!0,passive:!0});d.appendChild(g);
f.appendChild(e);c.appendChild(b.initControl(d,a));c.appendChild(f);b.afterRun.push(function(){var d=b.create([{type:"select",label:"f_w",selector:a.selector,"class":"font-weight-select",id:a.id+"_w",prop:"font-weight"}]),e=c.closest(".tb_field"),f=d.querySelector(".tb_field");e.parentNode.insertBefore(d,e.nextElementSibling);m.updateFontVariant(t,f.querySelector(".font-weight-select"),b)});return c}},animation_select:{render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),
f=b["static"].preset_animation,e=h.createElement("select"),g=b.values[a.id];d.className="selectwrapper";e.className="tb_lb_option";e.id=a.id;c.appendChild(h.createElement("option"));for(var k in f){var l=h.createElement("optgroup"),m=h.createDocumentFragment();l.label=k;for(var q in f[k]){var n=h.createElement("option");n.value=q;n.text=f[k][q];g===q&&(n.selected=!0);m.appendChild(n)}l.appendChild(m);c.appendChild(l)}e.appendChild(c);d.appendChild(e);return d}},select_menu:{data:null,get:function(a,
b){var c=this,d=function(){var d=h.createDocumentFragment(),e;for(e in c.data){var g=h.createElement("option");g.value=c.data[e].slug;g.text=c.data[e].name;g.dataset.termid=c.data[e].term_id;b===c.data[e].slug&&(g.selected=!0);d.appendChild(g)}a.appendChild(d)};null===c.data?p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_menu",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){c.data=a;d()}}):d()},render:function(a,b){var c=h.createDocumentFragment(),
d=h.createElement("div"),f=h.createElement("select"),e=h.createElement("small"),g=b.values[a.id];d.className="selectwrapper";f.className="select_menu_field";!0===b.is_repeat?(f.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",f.dataset.inputId=a.id):(f.className+=" tb_lb_option",f.id=a.id);a["class"]!==l&&(f.className+=" "+a["class"]);e.innerHTML=b.label.menu_help;var k=h.createElement("option");k.value="";k.text=b.label.select_menu;c.appendChild(k);this.get(f,g);d.appendChild(b.initControl(f,
a));c=h.createDocumentFragment();c.appendChild(d);c.appendChild(h.createElement("br"));c.appendChild(e);return c}},sticky:{render:function(a,b){for(var c={},d=n.activeModel.get("element_id"),f=p.extend(!0,{},a),e=n.Utils.getUIDList(a.key),g=0,k=e.length;g<k;++g)if(e[g].element_id!==d){var h="row"===e[g].elType?"Row #"+e[g].element_id:e[g].mod_name+" #"+e[g].element_id;"row"===e[g].elType&&e[g].styling&&e[g].styling.custom_css_id?h="#"+e[g].styling.custom_css_id:"module"===e[g].elType&&e[g].mod_settings&&
e[g].mod_settings.custom_css_id&&(h="#"+e[g].mod_settings.custom_css_id);c[e[g].element_id]=h}f.options=c;return b.select.render(f,b)}},selectSearch:{update:function(a,b,c,d){d=h.createDocumentFragment();var f=null;b.removeAttribute("data-value");b.value="";if(c!==l){for(var e in c){var g=h.createElement("div");null===f&&(f=e);g.dataset.value=e;g.className="tb_search_item";g.textContent=c[e];a===e&&(g.className+=" selected",b.setAttribute("data-value",e),b.value=c[e]);d.appendChild(g)}""===b.value&&
null!==f&&(b.value=c[f],b.setAttribute("data-value",f))}return d},events:function(a,b){a.addEventListener("keyup",function(a){a=b.getElementsByClassName("tb_search_item");for(var c=this.value.trim(),f=new RegExp(c,"i"),e=0,g=a.length;e<g;++e)""===c||f.test(a[e].textContent)?a[e].style.display="block":a[e].style.display="none"},{passive:!0});b.addEventListener("mousedown",function(b){if(1===b.which&&b.target.classList.contains("tb_search_item")){b.preventDefault();b.stopPropagation();var c=this.getElementsByClassName("tb_search_item");
b=b.target;for(var f=c.length-1;-1<f;--f)c[f].classList.remove("selected");b.classList.add("selected");c=b.dataset.value;a.value=b.textContent;a.dataset.value=c;a.blur();a.previousElementSibling.blur();v.triggerEvent(a,"selectElement",{val:c})}})},render:function(a,b){var c=h.createElement("div"),d=h.createElement("div"),f=h.createElement("input"),e=h.createElement("span"),g=h.createElement("div");c.className="tb_search_wrapper";f.className="tb_search_input";f.autocomplete="off";g.className="tb_search_container";
!0===b.is_repeat?(f.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",f.dataset.inputId=a.id):(f.className+=" tb_lb_option",f.id=a.id);a["class"]!==l&&(f.className+=" "+a["class"]);e.className="fa fa-spin fa-spinner";g.tabIndex=1;d.tabIndex=1;d.className="tb_search_arrow";f.type="text";f.placeholder=(a.placeholder!==l?a.placeholder:a.label)+"...";g.appendChild(this.update(b.values[a.id],f,a.options,b));d.appendChild(e);c.appendChild(d);c.appendChild(b.initControl(f,a));c.appendChild(g);
a.after!==l&&c.appendChild(b.after(a));a.description!==l&&c.appendChild(b.description(a.description));a.tooltip!==l&&c.appendChild(b.tooltip(a.tooltip));this.events(f,g);setTimeout(function(){new SimpleBar(g)},100);return c}},optin_provider:{cache:null,render:function(a,b){var c=h.createElement("div"),d=this;null===this.cache?(A.showLoader("show"),p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_optin_get_settings",tb_load_nonce:themifyBuilder.tb_load_nonce},success:function(a){A.showLoader("spinhide");
d.cache=a;c.appendChild(b.create(d.cache));b.callbacks()},error:function(){A.showLoader("error")}})):c.appendChild(b.create(d.cache));return c}},check_map_api:{render:function(a,b){return themifyBuilder[a.map+"_api"]?h.createElement("span"):b.separator.render({type:"separator",html:"<span>"+themifyBuilder[a.map+"_api_err"]+"</span>",wrap_class:"tb_group_element_"+a.map},b)}},query_posts:{cacheTypes:null,cacheTerms:[],render:function(a,b){var c=this,d,f=a.description,e=a.after,g=b.values,k=function(a){var b=
[],c;for(c in a)b[c]=a[c].name;return b},t=function(a,c,d){var e=a.nextElementSibling.getElementsByClassName("simplebar-content")[0];e===l&&(e=a.nextElementSibling);for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(b.selectSearch.update(c,a,d,b))},m=function(b,c,d){b.classList.add("tb_search_wait");return p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_post_types",tb_load_nonce:themifyBuilder.tb_load_nonce,type:d,v:c,exclude:a.exclude,all:a.all},complete:function(){b.classList.remove("tb_search_wait")}})};
(function(){var q=p.extend(!0,{},a),w=null;d=h.createElement("div");d.id=a.id?a.id:a.term_id;b.afterRun.push(function(){for(var p=["id","tax_id","term_id"],r=h.createDocumentFragment(),u=null,B=function(d,k){var q=function(){if(a.term_id!==l){var m=a.term_id.replace("#tmp_id#",k),q=d.closest(".tb_input"),p;d.id=m;null===u&&g[m]!==l&&(p=g[m].split("|")[0]);p||(p=0);t(d,p,c.cacheTerms[k]);if(null===u){var m=h.createElement("input"),r=h.createElement("span"),x=h.createElement("div");r.innerHTML=b.label.or;
m.type="text";m.className="query_category_multiple";x.className="tb_query_multiple_wrap";x.appendChild(r);x.appendChild(m);q.insertBefore(x,q.nextSibling);e!==l&&q.appendChild(b.after(e));f!==l&&q.appendChild(b.description(f));if(a.slug_id!==l){var r=q.parentNode,x=b.create([{type:"radio",id:"term_type",label:b.label.query_by,"default":g.term_type===l&&"post_slug"===g[a.tax_id]?"post_slug":!1,option_js:!0,options:[{value:"category",name:b.label.query_term_id},{value:"post_slug",name:b.label.slug_label}]}]),
y=b.create([{id:a.slug_id,type:"text","class":"large",wrap_class:"tb_group_element_post_slug",help:b.label.slug_desc,label:b.label.slug_label}]);r.parentNode.insertBefore(x,r);r.parentNode.appendChild(y)}m.addEventListener("change",function(a){v.triggerEvent(d,"queryPosts",{val:p})},{passive:!0});null!==w&&clearTimeout(w);w=setTimeout(function(){b.callbacks()},2)}q.getElementsByClassName("query_category_multiple")[0].value=p;!0===u||b.is_new?v.triggerEvent(d,"queryPosts",{val:p}):ThemifyConstructor.settings=
n.Utils.clear(n.Forms.serialize("tb_options_setting"));u=!0}};c.cacheTerms[k]===l?m(d.parentNode,k,"terms").done(function(a){c.cacheTerms[k]=a;q()}):q()},z=0,y=p.length;z<y;++z)if(q[p[z]]){q.id=q[p[z]];q.label=b.label["query_"+p[z]];q.type="selectSearch";"term_id"===p[z]?(q.wrap_class="tb_search_term_wrap tb_group_element_category",q["class"]="query_category_single",q.help=b.label.query_desc,q.control={control_type:"queryPosts"}):"tax_id"===p[z]&&q.term_id===l&&(q.control={control_type:"queryPosts"});
delete q.description;delete q.after;var C=b.create([q]);(function(){var b="id"===p[z],d="term_id"===p[z],e=d?"":g[q.id],f=C.querySelector(".tb_search_input");f.addEventListener("selectElement",function(e){e=e.detail.val;var f=this.closest(".tb_field");d?(f.getElementsByClassName("query_category_multiple")[0].value=e,v.triggerEvent(this,"queryPosts",{val:e})):null!==f.nextElementSibling?(f=f.nextElementSibling,b||!0!==u||a.slug_id===l||(f=f.nextElementSibling),null!==f&&(f=f.getElementsByClassName("tb_search_input")[0],
b?c.cacheTypes[e]!==l&&(t(f,g[a.tax_id],k(c.cacheTypes[e].options)),v.triggerEvent(f,"selectElement",{val:f.getAttribute("data-value")})):B(f,e))):b||v.triggerEvent(this,"queryPosts",{val:this.getAttribute("data-value")})},{passive:!0});if(b){var h=function(){e||(e="post");t(f,e,k(c.cacheTypes));v.triggerEvent(f,"selectElement",{val:e});f=null};null===c.cacheTypes?m(f.parentNode,null,"post_types").done(function(a){c.cacheTypes=a;h()}):setTimeout(h,10)}else d&&!a.id&&a.taxonomy!==l&&B(f,a.taxonomy)})();
r.appendChild(C)}d.parentNode.replaceChild(r,d);q=d=null})})();return d}},position_box:{is_loaded:null,render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("div"),e=h.createElement("div"),g=h.createElement("div"),k=b.hidden.render(a,b);d.className="tb_position_box_wrapper";f.className="tb_position_box";e.className="tb_position_box_handle";g.className="tb_position_box_label";a.wrap_class!==l&&(d.className=" "+a.wrap_class);f.appendChild(e);c.appendChild(f);
a.after!==l&&c.appendChild(b.after(a));c.appendChild(g);c.appendChild(k);d.appendChild(c);var n=function(a){var b=k.value,c=200;switch(b){case "right-top":b="100,0";break;case "right-center":b="100,50";break;case "right-bottom":b="100,100";break;case "left-top":b="0,0";break;case "left-center":b="0,50";break;case "left-bottom":b="0,100";break;case "center-top":b="50,0";break;case "center-center":b="50,50";break;case "center-bottom":b="50,100"}var d=function(a){switch(a){case "0,0":a="Top Left";break;
case "50,0":a="Top Center";break;case "100,0":a="Top Right";break;case "0,50":a="Center Left";break;case "50,50":a="Center Center";break;case "100,50":a="Center Right";break;case "0,100":a="Bottom Left";break;case "50,100":a="Bottom Center";break;case "100,100":a="Bottom Right";break;default:a=a.split(","),a=""===a[0]?"Center Center":"X:"+a[0]+"% Y:"+a[1]+"%"}return a};r.$.fn.draggable.call(p(a),{drag:function(a,b){0>b.position.top&&(b.position.top=0);80<b.position.top&&(b.position.top=80);5>b.position.top&&
(5>b.position.left?(b.position.top=0,b.position.left=0):b.position.left>c/2-5&&b.position.left<c/2+5?(b.position.top=0,b.position.left=c/2):b.position.left>c-5&&(b.position.top=0,b.position.left=c));if(5<=b.position.top&&35>=b.position.top||45<=b.position.top&&75>=b.position.top)0>b.position.left?b.position.left=0:b.position.left>c&&(b.position.left=c);35<b.position.top&&45>b.position.top&&(5>b.position.left?(b.position.top=40,b.position.left=0):b.position.left>c/2-5&&b.position.left<c/2+5?(b.position.top=
40,b.position.left=c/2):b.position.left>c-5&&(b.position.top=40,b.position.left=c));75<b.position.top&&(5>b.position.left?(b.position.top=80,b.position.left=0):b.position.left>c/2-5&&b.position.left<c/2+5?(b.position.top=80,b.position.left=c/2):b.position.left>c-5&&(b.position.top=80,b.position.left=c))},create:function(a,k){setTimeout(function(){c=p(f).width()},0);var h=b.split(",");p(e).css({left:h[0]+"%",top:h[1]+"%"});g.textContent=d(b);b=null},stop:function(a,b){var e=+(b.position.left/c*100).toFixed(2),
f=+(b.position.top/80*100).toFixed(2),l=h.querySelector(".tb_element_clicked");k.value=e+","+f;g.textContent=d(e+","+f);l&&l.setAttribute("style","background-position:"+e+"% "+f+"%;")}})};null===this.is_loaded?(this.loaded=!0,r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/draggable.min.js",function(){n(this)}.bind(e),tbLocalScript.version,null,function(){return r.$.fn.draggable!==l})):b.afterRun.push(function(){n(this)}.bind(e));return d}},slider_range:{is_loaded:null,render:function(a,
b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("div"),e=b.hidden.render(a,b),g=this,k=0,n=100,m="%",q=!0,w=1;a.options!==l&&(a.options.min!==l&&(k=a.options.min),a.options.max!==l&&(n=a.options.max),a.options.unit!==l&&(m=a.options.unit),a.options.range!==l&&(q=!1),a.options["default"]!==l&&(w=a.options["default"]));e.setAttribute("data-min",k);e.setAttribute("data-max",n);e.setAttribute("data-unit",m);k=n=m=null;d.className="tb_slider_wrapper input-range";f.className=
"range-slider";a.wrap_class!==l&&(d.className=" "+a.wrap_class);c.appendChild(f);c.appendChild(e);d.appendChild(c);var v=function(a){var b=h.createElement("span"),c=h.createElement("span"),d=parseFloat(e.getAttribute("data-min")),f=parseFloat(e.getAttribute("data-max")),g=e.getAttribute("data-unit"),k=e.value,k=q?k?k.split(","):[d,f]:k?k:w;b.className="tb_slider_label_l";c.className="tb_slider_label_u";d={range:q,min:d,max:f,slide:function(a,d){q?(b.textContent=d.values[0]+g,c.textContent=d.values[1]+
g):b.textContent=d.value+g},create:function(a,d){var e=this.getElementsByClassName("ui-slider-handle");q?(b.textContent=k[0]+g,e[0].appendChild(b),c.textContent=k[1]+g,e[1].appendChild(c)):(b.textContent=k+g,e[0].appendChild(b));k=null},change:function(a,b){e.value=q?b.values[0]+","+b.values[1]:b.value}};q?d.values=k:d.value=k;r.$.fn.slider.call(p(a),d)};null===this.is_loaded||r.$.fn.slider===l?r.Themify.LoadAsync(themifyBuilder.includes_url+"js/jquery/ui/slider.min.js",function(){g.loaded=!0;v(this)}.bind(f),
tbLocalScript.version,null,function(){return r.$.fn.slider!==l}):b.afterRun.push(function(){v(this)}.bind(f));return d}},range:{update:function(a,b,c){var d=r.document.getElementById(a);null!==d&&(d.value=b!==l?b:"",b=a+"_unit",a=r.document.getElementById(b),null!==a&&"SELECT"===a.tagName&&(b=c.getStyleVal(b),b===l&&(b=a[0].value),a.value=b,this.setData(d,-1!==a.selectedIndex?a[a.selectedIndex]:a[0])))},setData:function(a,b){var c=b.getAttribute("data-min"),d=b.getAttribute("data-max"),f=b.getAttribute("data-increment"),
e=parseFloat(a.value.trim());if(e>parseFloat(d)||e<parseFloat(c))e=e>parseFloat(d)?d:c,a.value=0!==f%1?parseFloat(e).toFixed(1):parseInt(e);a.setAttribute("data-min",c);a.setAttribute("data-max",d);a.setAttribute("data-increment",f)},controlChange:function(a,b,c){function d(b){var c=a.getAttribute("data-increment");if(c){var d=0!==c%1,e=parseFloat(a.getAttribute("data-max")),f=parseFloat(a.getAttribute("data-min")),g=a.value,g=d?parseFloat(g||0):parseInt(g||0),c=d?parseFloat(c):parseInt(c);a.value=
+("increase"===b?g>=e?e:g+c:g<=f?f:g-c).toFixed(2)}}var f=b!==l&&"SELECT"===b.tagName,e=this;a.addEventListener("mousedown",function(b){if(1===b.which){var e=b.pageY,f=this,g=a.value,h=function(a){a.pageY<e?d("increase"):a.pageY>e&&d("decrease");e=a.pageY;v.triggerEvent(f,c)};r.document.body.classList.add("tb_panel_resize");r.document.addEventListener("mousemove",h,{passive:!0});r.document.addEventListener("mouseup",function x(){r.document.removeEventListener("mousemove",h,{passive:!0});a.value!==
g&&v.triggerEvent(f,c);n.hasChanged=!0;r.document.removeEventListener("mouseup",x,{once:!0,passive:!0});r.document.body.classList.remove("tb_panel_resize")},{once:!0,passive:!0})}},{passive:!0});a.addEventListener("keydown",function(a){a.stopPropagation();38===a.which?d("increase"):40===a.which&&d("decrease");v.triggerEvent(this,c)},{passive:!0});!0===f&&b.addEventListener("change",function(d){e.setData(a,b.options[b.selectedIndex]);v.triggerEvent(a,c)},{passive:!0});b!==l&&e.setData(a,f?-1!==b.selectedIndex?
b[b.selectedIndex]:b[0]:b)},render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("span"),e=h.createElement("input");var g=b.getStyleVal(a.id);d.className="tb_tooltip_container";a.wrap_class!==l&&(d.className=" "+a.wrap_class);f.className="tb_range_input";e.autocomplete="off";e.type="text";e.className="tb_range";g!==l&&(e.value=g);!0===b.is_repeat?(e.className+=!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",e.dataset.inputId=a.id):(e.className+=
" tb_lb_option",e.id=a.id);a["class"]!==l&&(e.className+=" "+a["class"]);f.appendChild(e);a.tooltip!==l&&f.appendChild(b.tooltip(a.tooltip));c.appendChild(f);if(a.units===l)e.dataset.min=0,e.dataset.max=500,e.dataset.increment=1;else{f=h.createElement("div");var k=Object.keys(a.units);f.className="selectwrapper noborder";if(1<k.length){var n=h.createDocumentFragment();g=b.getStyleVal(a.id+"_unit");var m=a.id+"_unit";k=h.createElement("select");k.className="tb_unit";!0===b.is_repeat?(k.className+=
!0===b.is_sort?" tb_lb_sort_child":" tb_lb_option_child",k.dataset.inputId=m):(k.className+=" tb_lb_option",k.id=m);a.select_class!==l&&(k.className+=" "+a.select_class);for(var q in a.units){e.setAttribute("min",parseInt(a.units[q].min));e.setAttribute("max",parseInt(a.units[q].max));var r=h.createElement("option");r.value=q;r.textContent=q;r.dataset.min=a.units[q].min;r.dataset.max=a.units[q].max;r.dataset.increment=a.units[q].increment!==l?a.units[q].increment:"em"===q||"em"===q?.1:1;g===q&&(r.selected=
!0);n.appendChild(r)}k.appendChild(n);b.initControl(k,{type:"select",id:m,control:a.control})}else q=k[0],e.setAttribute("min",parseFloat(a.units[q].min)),e.setAttribute("max",parseFloat(a.units[q].max)),a.units[q].increment!==l?e.setAttribute("step",parseFloat(a.units[q].increment)):e.setAttribute("step","1"),g<a.units[q].min?e.value=a.units[q].min:g>a.units[q].max&&(e.value=a.units[q].max),k=h.createElement("span"),k.className="tb_unit",k.id=a.id+"_unit",k.dataset.min=a.units[q].min,k.dataset.max=
a.units[q].max,k.dataset.increment=a.units[q].increment!==l?a.units[q].increment:"em"===q||"em"===q?.1:1,k.textContent=q;f.appendChild(k);c.appendChild(f)}a.after!==l&&c.appendChild(b.after(a.after));a.description!==l&&c.appendChild(b.description(a.description));d.appendChild(c);g="styling"===b.clicked?"keyup":"change";!0===a.opposite&&k.addEventListener("change",function(a){a.stopPropagation();b.margin.changeUnit(this)},{passive:!0});this.controlChange(e,k,g);k=p.extend({},a);!0===a.opposite&&e.addEventListener(g,
function(a){a.stopPropagation();b.margin.changeOppositive(this)},{passive:!0});k.type="range";b.initControl(e,k);return d}},icon:{render:function(a,b){var c=h.createElement("div"),d=h.createElement("input"),f=h.createElement("span"),e=h.createElement("span"),g=b.getStyleVal(a.id);d.type="text";d.className="themify_field_icon";f.className="tb_plus_btn themify_fa_toggle icon-close";c.className="tb_icon_wrap";e.className="tb_clear_input";!0===b.is_repeat?(d.className+=!0===b.is_sort?" tb_lb_sort_child":
" tb_lb_option_child",d.dataset.inputId=a.id):(d.className+=" tb_lb_option",d.id=a.id);a["class"]!==l&&(d.className+=" "+a["class"]);g!==l?(d.value=g,g=n.Utils.getIcon(g),!1===g&&(g="default_icon"),f.className+=" "+g):f.className+=" default_icon";c.appendChild(b.initControl(d,a));c.appendChild(f);c.appendChild(e);return c}},createMarginPadding:function(a,b){var c=b.options!==l?b.options:[{id:"top",label:this.label.top},{id:"right",label:this.label.right},{id:"bottom",label:this.label.bottom},{id:"left",
label:this.label.left}],d=h.createDocumentFragment(),f=h.createElement("ul"),e=this,g=b.id,k="border_radius"===a,n=p.extend(!0,{},b);n.units={px:{min:"margin"===a?-500:0,max:500},em:{min:"margin"===a?-10:0,max:10},"%":{min:"margin"===a?-100:0,max:100}};n.prop=null;n.opposite=!0;f.className="tb_seperate_items tb_inline_list tb_has_opposite";!0===k&&f.setAttribute("data-toptext",c[0].label);for(var m=0,q=c.length;m<q;++m){var r=h.createElement("li"),v=g+"_"+c[m].id;n.id=v;n.tooltip=c[m].label;n["class"]=
b["class"]===l?"":b["class"];n["class"]+=" tb_multi_field tb_range_"+c[m].id;!0===k&&(n["class"]+=" tb_is_border_radius");var D=this.range.render(n,this);if(0!==m&&2!==m){var u=h.createElement("li"),B="right"===c[m].id?"top":c[m].id;u.className="tb_seperate_opposite tb_opposite_"+("bottom"===B?"top":B);u.appendChild(this.checkboxGenerate("checkbox",{id:g+"_opp_"+B,"class":"style_apply_oppositive",options:[{name:"1",value:""}],new_line:!1}));var B=u.querySelector(".style_apply_oppositive"),z=h.createElement("div");
z.className="tb_oppositive_state";B.parentNode.insertBefore(z,B.nextSibling);B.addEventListener("change",function(a){a.stopPropagation();e.margin.bindingOppositive(this,!0)},{passive:!0});!0===B.checked&&e.afterRun.push(function(){e.margin.bindingOppositive(this)}.bind(B));d.appendChild(u)}r.appendChild(D);d.appendChild(r);!0===k?(r="border-","top"===c[m].id?r+="top-left-radius":"right"===c[m].id?r+="top-right-radius":"left"===c[m].id?r+="bottom-left-radius":"bottom"===c[m].id&&(r+="bottom-right-radius")):
r=b.prop+"-"+c[m].id;this.styles[v]={prop:r,selector:b.selector}}f.appendChild(d);n=null;d=h.createDocumentFragment();d.appendChild(f);if(4===q){d.appendChild(e.checkboxGenerate("icon_checkbox",{id:"checkbox_"+g+"_apply_all","class":"style_apply_all",options:[{name:"1",value:e.label.all,icon:'<span class="apply_all_checkbox_icon"></span>'}],"default":"module"===this.component&&!0===this.is_new||0===Object.keys(this.values).length?"1":!1,new_line:!1}));var y=d.querySelector(".style_apply_all");y.addEventListener("change",
function(a){e.margin.apply_all(this,!0)},{passive:!0});!0===y.checked&&e.afterRun.push(function(){e.margin.apply_all(y)})}return d},margin_opposity:{render:function(a,b){var c=["topId","bottomId"],d=h.createDocumentFragment(),f=h.createElement("ul"),e=p.extend(!0,{},a);f.className="tb_seperate_items tb_inline_list tb_has_opposite";for(var g=0;2>g;++g){var k=h.createElement("li");e.id=a[c[g]];e.prop="topId"===c[g]?"margin-top":"margin-bottom";e["class"]="tb_multi_field tb_range_"+("topId"===c[g]?"top":
"bottom");e.opposite=!0;e.tooltip="topId"===c[g]?b.label.top:b.label.bottom;k.appendChild(b.range.render(e,b));d.appendChild(k);if(0===g){k=h.createElement("li");k.className="tb_seperate_opposite tb_opposite_top";k.appendChild(b.checkboxGenerate("checkbox",{id:e.id+"_opp_top","class":"style_apply_oppositive",options:[{name:"1",value:""}],new_line:!1}));var l=k.querySelector(".style_apply_oppositive"),m=h.createElement("div");m.className="tb_oppositive_state";l.parentNode.insertBefore(m,l.nextSibling);
l.addEventListener("change",function(a){a.stopPropagation();b.margin.bindingOppositive(this,!0)},{passive:!0});d.appendChild(k)}b.styles[a[c[g]]]={prop:"topId"===c[g]?"margin-top":"margin-bottom",selector:a.selector}}f.appendChild(d);return f}},margin:{bindingOppositive:function(a,b){var c=a.closest(".tb_seperate_opposite"),d=c.parentNode,c=!0===c.classList.contains("tb_opposite_left")?c.nextElementSibling:c.previousElementSibling;var f=!0===a.checked;var e=this.getOppositiveDir(c.getElementsByClassName("tb_range")[0]),
d=d.getElementsByClassName("tb_range_"+e)[0],e=d.closest("li").getElementsByClassName("tb_unit")[0];if(!0===f){if(d.setAttribute("data-v",d.value),e.setAttribute("data-u",e.value),!0===b){f=c.getElementsByClassName("tb_range")[0];var g=f.value;var k=d.value;""!==g||""===k?(d.value=g,e.value=c.getElementsByClassName("tb_unit")[0].value):(f.value=k,c.getElementsByClassName("tb_unit")[0].value=e.value)}}else g=d.getAttribute("data-v"),d.value=g===l||null===g?"":g,e.value=e.getAttribute("data-u");!0===
b&&v.triggerEvent(d,"keyup")},changeUnit:function(a){var b=a.closest(".tb_has_opposite");if(!b.hasAttribute("data-checked")){var c=r.document.getElementById(a.getAttribute("id").replace(/_unit$/ig,""));var d=this.getOppositiveDir(c);c=c.classList.contains("tb_is_border_radius");!0===b.getElementsByClassName("tb_opposite_"+("top"===d||!0===c&&"right"===d||!1===c&&"bottom"===d?"top":"left"))[0].getElementsByClassName("style_apply_oppositive")[0].checked&&(c=b.getElementsByClassName("tb_range_"+d)[0],
c.closest("li").getElementsByClassName("tb_unit")[0].value=a.value)}},getOppositiveDir:function(a){a=a.classList;var b=a.contains("tb_range_top")?"bottom":a.contains("tb_range_bottom")?"top":a.contains("tb_range_left")?"right":"left";a.contains("tb_is_border_radius")&&(b="bottom"===b?"right":"top"===b?"left":"left"===b?"top":"bottom");return b},changeOppositive:function(a){var b=a.closest("li").parentNode;if(!b.hasAttribute("data-checked")){var c=this.getOppositiveDir(a),d=a.classList.contains("tb_is_border_radius");
!0===("top"===c||!0===d&&"right"===c||!1===d&&"bottom"===c?b.getElementsByClassName("tb_opposite_top")[0]:b.getElementsByClassName("tb_opposite_left")[0]).getElementsByClassName("style_apply_oppositive")[0].checked&&(b.getElementsByClassName("tb_range_"+c)[0].value=a.value)}},apply_all:function(a,b){var c=a.closest(".tb_input").getElementsByClassName("tb_seperate_items")[0],d=c.getElementsByTagName("li")[0];!0===a.checked===!0?(c.setAttribute("data-checked",1),c=ThemifyConstructor.label.all):(c.removeAttribute("data-checked"),
c=c.getAttribute("data-toptext"),c||(c=ThemifyConstructor.label.top));!0===b&&v.triggerEvent(d.getElementsByClassName("tb_multi_field")[0],"keyup");d.getElementsByClassName("tb_tooltip_up")[0].textContent=c},update:function(a,b,c){b=["top","right","bottom","left"];for(var d="checkbox_"+a+"_apply_all",f=r.document.getElementById(d).getElementsByClassName("style_apply_all")[0],e=3;-1<e;--e){var g=a+"_"+b[e];if(null!==r.document.getElementById(g)&&(c.range.update(g,c.getStyleVal(g),c),!0!==f.checked)){var g=
a+"_opp_"+b[e],k=r.document.getElementById(g);null!==k&&(k.getElementsByClassName("style_apply_oppositive")[0].checked=c.getStyleVal(g)?!0:!1)}}c.checkbox.update(d,c.getStyleVal(d),c);this.apply_all(f)},render:function(a,b){return b.createMarginPadding(a.type,a)}},padding:{render:function(a,b){return b.createMarginPadding(a.type,a)}},box_shadow:{update:function(a,b,c){b=["hOffset","vOffset","blur"];for(var d=2;-1<d;--d){var f=a+"_"+b[d];null!==r.document.getElementById(f)&&c.range.update(f,c.getStyleVal(f),
c)}b=a+"_color";a+="_inset";c.color.update(b,c.getStyleVal(b),c);c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){var c={hOffset:{label:b.label.h_o,units:{px:{min:-200,max:200},em:{min:0,max:10}}},vOffset:{label:b.label.v_o,units:{px:{min:-200,max:200},em:{min:0,max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}}},d=h.createDocumentFragment(),f=h.createElement("ul"),e=a.id,g=p.extend(!0,{},a);g["class"]="tb_shadow_field";g.prop=null;f.className="tb_seperate_items tb_inline_list tb_shadow_inputs";
for(var k in c)if(c[k]!==l){var n=c[k];var m=h.createElement("li");var q=e+"_"+k;g.id=q;g.tooltip=n.label;g.units=n.units;g.selector=a.selector;m.appendChild(b.range.render(g,b));d.appendChild(m);b.styles[q]={prop:a.prop,selector:a.selector}}m=h.createElement("li");q=e+"_color";c={id:q,type:"color","class":g["class"],selector:a.selector};b.styles[q]={prop:a.prop,selector:a.selector,type:"color"};m.appendChild(b.color.render(c,b));d.appendChild(m);m=h.createElement("li");q=e+"_inset";e=b.checkboxGenerate("checkbox",
{id:q,origID:e,type:"checkbox","class":g["class"],isBoxShadow:!0,prop:a.prop,options:[{value:b.label.in_sh,name:"inset"}]});b.styles[q]={prop:a.prop,selector:a.selector};m.className="tb_box_shadow_inset";m.appendChild(e);d.appendChild(m);f.appendChild(d);return f}},text_shadow:{update:function(a,b,c){b=[c.label.h_sh,c.label.v_sh,c.label.bl];for(var d=2;-1<d;--d){var f=a+"_"+b[d];null!==r.document.getElementById(f)&&c.range.update(f,c.getStyleVal(f),c)}a+="_color";c.color.update(a,c.getStyleVal(a),
c)},render:function(a,b){var c={hShadow:{label:b.label.h_sh,units:{px:{min:-200,max:200},em:{min:0,max:10}}},vShadow:{label:b.label.v_sh,units:{px:{min:-200,max:200},em:{min:0,max:10}}},blur:{label:b.label.bl,units:{px:{min:0,max:300},em:{min:0,max:10}}}},d=h.createDocumentFragment(),f=h.createElement("ul"),e=a.id,g=p.extend(!0,{},a);g["class"]="tb_shadow_field";g.prop=null;f.className="tb_seperate_items tb_inline_list tb_shadow_inputs";for(var k in c)if(c.hasOwnProperty(k)){var l=c[k];var m=h.createElement("li");
var q=e+"_"+k;g.id=q;g.tooltip=l.label;g.units=l.units;m.appendChild(b.range.render(g,b));d.appendChild(m);b.styles[q]={prop:a.prop,selector:a.selector}}m=h.createElement("li");q=e+"_color";c={id:q,type:"color","class":g["class"],selector:a.selector};b.styles[q]={prop:a.prop,selector:a.selector,type:"color"};m.appendChild(b.color.render(c,b));d.appendChild(m);f.appendChild(d);return f}},border_radius:{render:function(a,b){a.options=b.getOptions(a);return b.createMarginPadding(a.type,a)}},border:{changeControl:function(a){var b=
a.parentNode;a=a.value;for(var c=b.parentNode.children,d=c.length-1;-1<d;--d)c[d]!==b&&("none"===a?c[d].classList.add("_tb_hide_binding"):c[d].classList.remove("_tb_hide_binding"))},apply_all:function(a,b){for(var c=b.getElementsByTagName("input"),d=function(b,d){for(var e=c.length-1;0<e;--e){var f=c[e].parentNode;!0===b?f.classList.add("_tb_disable"):f.classList.remove("_tb_disable")}!0===b?a.dataset.checked=1:a.removeAttribute("data-checked");!0===d&&v.triggerEvent(a.children[0].getElementsByTagName("select")[0],
"change")},f=c.length-1;-1<f;--f)c[f].addEventListener("change",function(){d("all"===this.value,!0)},{passive:!0}),!0===c[f].checked&&"all"===c[f].value&&d(!0,null)},update:function(a,b,c){b=["top","right","bottom","left"];for(var d=a+"-type",f=0;4>f;++f){var e=a+"_"+b[f],g=e+"_color",k=e+"_style",e=e+"_width";c.color.update(g,c.getStyleVal(g),c);c.select.update(k,c.getStyleVal(k),c);this.changeControl(r.document.getElementById(k));c.range.update(e,c.getStyleVal(e),c)}c.radio.update(d,c.getStyleVal(d),
c)},render:function(a,b){var c=["top","right","bottom","left"],d=h.createElement("ul"),f=h.createDocumentFragment(),e=h.createDocumentFragment(),g=a.id,k=p.extend(!0,{},a),l=this,m=p.extend(!0,{},a);m.options=[{value:"all",name:b.label.all,"class":"style_apply_all",icon:'<i class="tic-border-all"></i>',label_class:"tb_radio_label_borders"}];m.option_js=!0;m.id=g+"-type";m.no_toggle=!0;m["default"]="top";m.prop=null;k.options=b["static"].border;k.prop=null;d.className="tb_seperate_items tb_borders tb_group_element_border";
for(var q=0;4>q;++q){var n=h.createElement("li"),r=g+"_"+c[q];m.options.push({value:c[q],name:b.label[c[q]],icon:'<i class="tic-border-'+c[q]+'"></i>',label_class:"tb_radio_label_borders"});n.className="tb_group_element_"+c[q];"top"===c[q]&&(n.className+=" tb_group_element_all");b.styles[r+"_color"]={prop:"border-"+c[q],selector:a.selector};k.id=r+"_color";k.type="color";k["class"]="border_color";f.appendChild(b.color.render(k,b));b.styles[r+"_width"]={prop:"border-"+c[q],selector:a.selector};k.id=
r+"_width";k.type="range";k["class"]="border_width";k.wrap_class="range_wrapper";k.units={px:{min:0,max:300}};f.appendChild(b.range.render(k,b));b.styles[r+"_style"]={prop:"border-"+c[q],selector:a.selector};k.id=r+"_style";k.type="select";k["class"]="border_style tb_multi_field";var r=b.select.render(k,b),v=r.querySelector("select");f.appendChild(r);n.appendChild(f);e.appendChild(n);v.addEventListener("change",function(a){l.changeControl(this)},{passive:!0});"none"===v.value&&l.changeControl(v)}d.appendChild(e);
f=h.createDocumentFragment();f.appendChild(b.radioGenerate("icon_radio",m,b));l.apply_all(d,f.querySelector("#"+m.id));f.appendChild(d);return f}},slider:{render:function(a,b){return b.create(b.getOptions(a))}},custom_css:{render:function(a,b){a["class"]="large";a.control=!1;a.help=b.label.custom_css_help;var c=b.text.render(a,b);n.Utils.changeOptions(c.querySelector("#"+a.id),a.type);return c}},custom_css_id:{render:function(a,b){var c=b.create([{id:"custom_css_id",type:"text",label:b.label.id_name,
help:b.label.id_help,control:!1,"class":"large"}],b);n.Utils.changeOptions(c.querySelector("#custom_css_id"),a.type);return c}},hidden:{render:function(a,b){var c=h.createElement("input"),d=b.getStyleVal(a.id);c.type="hidden";!0===b.is_repeat?(c.className=!0===b.is_sort?"tb_lb_sort_child":"tb_lb_option_child",c.dataset.inputId=a.id):(c.className="tb_lb_option",c.id=a.id);a["class"]!==l&&(c.className+=" "+a["class"]);d!==l?c.value=d:a.value!==l&&(c.value=a.value);return b.initControl(c,a)}},frame:{render:function(a,
b){a.options=b["static"].frame;a["class"]="tb_frame";return b.layout.render(a,b)}},title:{render:function(a,b){a["class"]="large";a.control={event:"keyup",control_type:"change",selector:".module-title"};return b.text.render(a,b)}},url:{render:function(a,b){a.input_type="url";return b.text.render(a,b)}},advacned_link:{render:function(a,b){return b.create([{id:"link",type:"radio",label:"l",control:!1,wrap_class:" tb_compact_radios",link_to:!0,binding:{permalink:{show:["open_link"],hide:["custom_link"]},
custom:{show:["custom_link"],hide:["open_link"]},none:{hide:["custom_link","open_link","no_follow"]}}},{id:"custom_link",type:"url",label:"cl"},{id:"open_link",type:"radio",label:"o_l",link_type:!0,control:!1,wrap_class:" tb_compact_radios",binding:{lightbox:{show:["tb_t_m_lightbox"]},regular:{hide:["tb_t_m_lightbox"]},newtab:{hide:["tb_t_m_lightbox"]}}},{type:"multi",wrap_class:"tb_t_m_lightbox",label:"lg",options:[{id:"lightbox_w",type:"range",label:"w",control:!1,units:{px:{min:0,max:1E3},"%":{min:0,
max:100}}},{id:"lightbox_h",type:"range",label:"ht",control:!1,units:{px:{min:0,max:1E3},"%":{min:0,max:100}}}]}])}},button:{render:function(a,b){var c=h.createElement("button");c.className="builder_button";c.id=a.id;a["class"]!==l&&(c.className+=" "+a["class"]);c.textContent=a.name;return b.initControl(c,a)}},row_anchor:{render:function(a,b){a.control=!1;var c=b.text.render(a,b);n.Utils.changeOptions(c.querySelector("#"+a.id),a.type);return c}},widget_form:{render:function(a,b){var c=h.createElement("div");
c.id=a.id;c.className="module-widget-form-container wp-core-ui tb_lb_option";return c}},widget_select:{data:null,el:null,cache:[],mediaInit:null,textInit:null,render:function(a,b){var c=h.createDocumentFragment(),d=h.createElement("div"),f=h.createElement("i"),e=h.createElement("input"),g=h.createElement("div"),k=h.createElement("div");d.id="available-widgets-filter";f.className="fa fa-spin fa-spinner tb_loading_widgets";e.type="text";e.id="widgets-search";e.dataset.validation="not_empty";e.dataset.errorMsg=
b.label.widget_validate;e.autocomplete="off";e.placeholder=b.label.search_widget;g.id="available-widgets";g.tabIndex=1;k.id=a.id;k.className="tb_lb_option tb_widget_select";this.el=k;d.appendChild(f);d.appendChild(e);g.appendChild(k);c.appendChild(d);c.appendChild(g);var t=this,m=b.values[a.id],q=function(){var c=h.createDocumentFragment(),d=[],q=function(b,c){for(var f=d.length-1;-1<f;--f)d[f].classList.remove("selected");b.classList.add("selected");f=b.dataset.value;e.value=b.getElementsByClassName("widget-title")[0].textContent;
g.style.display="none";t.select(f,t.data[f].b,c,a)},p;for(p in t.data){var r=h.createElement("div"),w=h.createElement("div"),v=h.createElement("h3");r.className="widget-tpl "+t.data[p].b;r.dataset.value=p;w.className="widget-title";v.textContent=t.data[p].n;w.appendChild(v);r.appendChild(w);r.addEventListener("click",function(c){c.preventDefault();c.stopPropagation();b.settings[a.id]=this.dataset.value;q(this,null)});d.push(r);t.data[p].d!==l&&(w=h.createElement("div"),w.className="widget-description",
w.innerHTML=t.data[p].d,r.appendChild(w));c.appendChild(r);m===p&&q(r,b.values.instance_widget)}k.appendChild(c);m||new SimpleBar(k);t.search(e,g);f.parentNode.removeChild(f);f=null;n.hasChanged=!0};if(null===t.data){p.ajax({type:"POST",url:themifyBuilder.ajaxurl,dataType:"json",data:{action:"tb_get_widget_items",nonce:themifyBuilder.tb_load_nonce},success:function(a){t.data=a;q()}});for(var w in themifyBuilder.widget_css)r.Themify.LoadCss(themifyBuilder.widget_css[w],tbLocalScript.version);themifyBuilder.widget_css=
null}else setTimeout(q,5);return c},search:function(a,b){var c=this;a.addEventListener("focus",this.show.bind(this),{passive:!0});a.addEventListener("blur",function(a){a.relatedTarget&&"available-widgets"===a.relatedTarget.id||(b.style.display="none")},{passive:!0});a.addEventListener("keyup",function(a){c.show();a=this.value.trim();for(var b=new RegExp(a,"i"),d=c.el.getElementsByClassName("widget-tpl"),g=0,k=d.length;g<k;++g)if(""===a)d[g].style.display="block";else{var h=d[g].getElementsByTagName("h3")[0],
h=h.textContent||h.innerText;b.test(h)?d[g].style.display="block":d[g].style.display="none"}},{passive:!0})},show:function(){this.el.closest("#available-widgets").style.display="block"},hide:function(){this.el.closest("#available-widgets").style.display="none"},select:function(a,b,c,d){var f=this,e=p("#instance_widget",A.Lightbox.$lightbox),g=function(g){var k=function(){var k=p(g.form);e.addClass("open").html(k.html());if(c)for(var l in c)k.find('[name="'+l+'"]').val(c[l]);k=null;"text"===b?wp.textWidgets&&
(f.textInit||(f.textInit=!0,wp.textWidgets.init()),c&&delete wp.textWidgets.widgetControls[c["widget-id"]]):wp.mediaWidgets&&(f.mediaInit||(wp.mediaWidgets.init(),f.mediaInit=!0),c&&delete wp.mediaWidgets.widgetControls[c["widget-id"]]);p(h).trigger("widget-added",[e]);"text"===b&&ThemifyConstructor.initControl(e.find(".wp-editor-area")[0],{control:{control_type:"wp_editor",type:"refresh"}});c&&setTimeout(function(){new SimpleBar(r.document.getElementById("tb_options_setting"));new SimpleBar(f.el)},
100);if("visual"===n.mode){var m=p.extend(!0,{},d);m.id=e[0].id;e.on("change",":input",function(){!1===n.is_ajax_call&&ThemifyConstructor.control.widget_select(e,m)});a&&ThemifyConstructor.control.widget_select(e,m)}e.removeClass("tb_loading_widgets_form").find("select").wrap('<span class="selectwrapper"/>')},m=function(a,b){var c=a.length;(function(a,b){v.LoadAsync(a,b,g.v)})(a[b].src,function(){if(a[b].extra&&a[b].extra.after){var d=a[b].extra.after,e="";if("object"===typeof d)for(var f in d)d[f]&&
(e+=d[f]);""!==e&&(d=h.createElement("script"),d.type="text/javascript",d.text=e,e=h.getElementsByTagName("script")[0],e.parentNode.insertBefore(d,e))}++b;b<c?m(a,b):k()})};f.cache[b]===l?(g.template&&h.body.insertAdjacentHTML("beforeend",g.template),0<g.src.length?m(g.src,0):k()):k()};e.addClass("tb_loading_widgets_form").html('<i class="fa fa-refresh fa-spin"></i>');c&&p.each(c,function(a,b){var d=a.match(/.*\[\d\]\[(.*)\]/);p.isArray(d)&&"undefined"!==d[1]&&(delete c[a],c[d[1]]=b)});p.ajax({type:"POST",
dataType:"json",url:themifyBuilder.ajaxurl,data:{action:"module_widget_get_form",tb_load_nonce:themifyBuilder.tb_load_nonce,load_class:a,tpl_loaded:1===f.cache[b]?1:0,id_base:b,widget_instance:c},success:function(a){a&&a.form&&(g(a),f.cache[b]=1)}})}},message:{render:function(a,b){var c=h.createElement("div");a["class"]!==l&&(c.className+=a["class"]);c.innerHTML=a.comment;return c}},filters:{render:function(a,b){var c={hue:{label:b.label.hue,units:{deg:{min:0,max:360}},prop:"hue-rotate"},saturation:{label:b.label.sat,
units:{"%":{min:0,max:200}},prop:"saturate"},brightness:{label:b.label.bri,units:{"%":{min:0,max:200}},prop:"brightness"},contrast:{label:b.label.con,units:{"%":{min:0,max:200}},prop:"contrast"},invert:{label:b.label.inv,units:{"%":{min:0,max:100}},prop:"invert"},sepia:{label:b.label.se,units:{"%":{min:0,max:100}},prop:"sepia"},opacity:{label:b.label.op,units:{"%":{min:0,max:100}},prop:"opacity"},blur:{label:b.label.bl,units:{px:{min:0,max:50}},prop:"blur"}},d=h.createDocumentFragment(),f=h.createElement("ul"),
e=a.id,g=p.extend(!0,{},a);g["class"]="tb_filters_field";g.prop=null;f.className="tb_seperate_items tb_filters_fields";for(var k in c)if(c[k]!==l){var n=c[k],m=h.createElement("li"),q=e+"_"+k;g.id=q;g.units=n.units;g.selector=a.selector;var r=h.createElement("div"),v=h.createElement("span");r.className="tb_label";v.className="tb_label_text";v.textContent=n.label;r.appendChild(v);m.appendChild(r);m.appendChild(b.range.render(g,b));d.appendChild(m);b.styles[q]={prop:n.prop,selector:a.selector}}f.appendChild(d);
return f}},help:function(a){var b=h.createElement("div"),c=h.createElement("div"),d=h.createElement("i");b.className="tb_help";d.className="icon ti-help";c.className="tb_help_content";d.tabIndex=-1;c.innerHTML=a;b.appendChild(d);b.appendChild(c);return b},tooltip:function(a){var b=h.createElement("span");b.className="tb_tooltip_up";b.textContent=a;return b},description:function(a){var b=h.createElement("small");b.innerHTML=a;return b},after:function(a){var b=h.createElement("span");b.className="tb_input_after";
b.textContent=a.after;a.label!==l&&""!==a.label||a.help===l||""===a.help||b.appendChild(this.help(a.help));return b},height:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isHeight=!0;var c=h.createDocumentFragment(),d=p.extend(!0,{},a);d.label="ht";d.type="range";d.id=a.id;d.prop="height";d.wrap_class="tb_group_element_"+a.id+"_height tb_inline_list";d.units={px:{min:0,max:1200},vh:{min:0,max:100},"%":{min:0,max:100},em:{min:0,max:200}};b.range.render(d,b);
b.styles[a.id]={prop:"height",selector:a.selector};b.styles[a.id+"_auto_height"]={prop:"height",selector:a.selector};c.appendChild(b.range.render(d,b));c.appendChild(b.checkboxGenerate("checkbox",{id:a.id+"_auto_height",heightID:a.id,type:"checkbox",isHeight:!0,wrap_checkbox:"tb_inline_list",prop:"height",binding:{checked:{hide:["tb_group_element_ht_height"]},not_checked:{show:["tb_group_element_ht_height"]}},options:[{value:b.label.a_ht,name:"auto"}]}));return c}},toggle_switch:{update:function(a,
b,c){c.checkbox.update(a,c.getStyleVal(a),c)},controlChange:function(a,b){a.addEventListener("change",function(){this.value=!0===this.checked?b.on.name:b.off!==l?b.off.name:""},{passive:!0})},render:function(a,b){var c=p.extend(!0,{},a),d={},f=h.createElement("div"),e="off",g=b.getStyleVal(a.id);c.control=!1;c["class"]=c["class"]===l?"toggle_switch":c["class"]+" toggle_switch";var k=c.options;if(k===l||"simple"===k)"simple"===k?k={on:{name:"yes",value:b.label.y},off:{name:"no",value:b.label.no}}:
(k={on:{name:"no",value:b.label.s},off:{name:"yes",value:b.label.hi}},c["default"]===l&&(c["default"]="on"));g===l?("on"===c["default"]&&(e="on"),g="on"===e?k.on.name:k.off!==l?k.off.name:""):(!1===g&&(g=""),e=k.on.name===g?"on":"off");for(var n in k)c.after===l&&k[n].value!==l&&f.setAttribute("data-"+n,b.label[k[n].value]!==l?b.label[k[n].value]:k[n].value),d[n]=k[n];n=Object.keys(k)[0];delete c.binding;delete k[n].value;delete c["default"];c.options=[k[n]];c.wrap_checkbox===l&&(c.wrap_checkbox=
"");c.wrap_checkbox+=" tb_switcher";f.className="switch_label";c=b.checkboxGenerate("checkbox",c);k=c.querySelector(".toggle_switch");k.value=g;k.checked="on"===e;this.controlChange(k,d);k.parentNode.appendChild(f);b.initControl(k,a);return c}},width:{update:function(a,b,c){c.checkbox.update(a,c.getStyleVal(a),c)},render:function(a,b){a.isWidth=!0;var c={id:a.id+"_auto_width",widthID:a.id,type:"checkbox",isWidth:!0,prop:"width",options:[{value:b.label.a_wd,name:"auto"}]},d=b.checkboxGenerate("checkbox",
c),f=d.querySelector(".tb_lb_option"),c=d.querySelector("input"),e=p.extend(!0,{},a);c.addEventListener("change",function(b){var c=r.document.getElementsByClassName("tb_group_element_"+a.id+"_width")[0];b.target.checked?c.classList.add("hide-auto-height"):c.classList.remove("hide-auto-height")});e.label="w";e.type="range";e.id=a.id;e.prop="width";e.wrap_class="tb_group_element_"+a.id+"_width";"auto"===b.values[a.id+"_auto_width"]&&(e.wrap_class+=" hide-auto-height");e.units={px:{min:-2E3,max:2E3},
"%":{min:0,max:100,increment:1},em:{min:-20,max:20}};var g=b.create([e]);e=c=null;b.afterRun.push(function(){var a=f.parentNode.closest(".tb_field");a.parentNode.insertBefore(g,a);g=f=null});return d}},position:{render:function(a,b){var c={top:b.label.top,right:b.label.right,bottom:b.label.bottom,left:b.label.left},d=h.createElement("ul"),f=h.createDocumentFragment(),e=h.createDocumentFragment(),g=a.id,k=p.extend(!0,{},a),l=p.extend(!0,{},a);l.options=[];l.option_js=!0;l.id=g+"-type";l.no_toggle=
!0;l["default"]="top";l.prop=null;d.className="tb_seperate_items tb_group_element_position";for(var c=Object.keys(c),m=0;4>m;++m){var n=h.createElement("li");var r=g+"_"+c[m];l.options.push({value:c[m],name:b.label[c[m]],icon:'<i class="tic-border-'+c[m]+'"></i>',label_class:"tb_radio_label_borders"});n.className="tb_group_element_"+c[m];b.styles[r]={prop:c[m],selector:a.selector};k.id=r;k.type="range";k.prop="position";k.wrap_class="range_wrapper "+g+"_"+c[m];k.units={px:{min:-2E3,max:2E3},"%":{min:0,
max:100}};f.appendChild(b.range.render(k,b));b.styles[r+"_auto"]={prop:"position",selector:a.selector};f.appendChild(b.checkboxGenerate("checkbox",{id:r+"_auto",is_position:!0,posId:r,prop:c[m],type:"checkbox",selector:a.selector,options:[{name:"auto",value:b.label.auto}],wrap_checkbox:"tb_inline_list",binding:{checked:{hide:[g+"_"+c[m]]},not_checked:{show:[g+"_"+c[m]]}}}));n.appendChild(f);e.appendChild(n)}n=h.createElement("li");n.appendChild(b.radioGenerate("icon_radio",l,b));d.insertBefore(n,
d.childNodes[0]);d.appendChild(e);f=h.createDocumentFragment();b.styles[g]={prop:"position",selector:a.selector};k.id=g;k.binding={empty:{hide:["tb_group_element_position"]},absolute:{show:["tb_group_element_position"]},fixed:{show:["tb_group_element_position"]},relative:{hide:["tb_group_element_position"]},"static":{hide:["tb_group_element_position"]}};k.type="select";k.prop="position";k.options={"":"",absolute:b.label.abs,fixed:b.label.fi,relative:b.label.re,"static":b.label.st};k["class"]="tb_position_field tb_multi_field";
f.appendChild(b.select.render(k,b));f.appendChild(d);return f}}}})(jQuery,Themify,window.top,document,void 0);
